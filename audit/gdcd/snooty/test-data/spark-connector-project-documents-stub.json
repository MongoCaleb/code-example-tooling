{"type":"timestamp","data":1741185816582}
{"type":"metadata","data":{"_id":"67a278b7d7fdbcdd4a2c0cd8","project":"spark-connector","branch":"v10.4","title":"Spark Connector","eol":false,"canonical":null,"slugToTitle":{"api-docs":[{"type":"text","position":{"start":{"line":2}},"value":"API Documentation"}],"batch-mode/batch-read-config":[{"type":"text","position":{"start":{"line":4}},"value":"Batch Read Configuration Options"}],"batch-mode/batch-read":[{"type":"text","position":{"start":{"line":4}},"value":"Read from MongoDB in Batch Mode"}],"batch-mode/batch-write-config":[{"type":"text","position":{"start":{"line":4}},"value":"Batch Write Configuration Options"}],"batch-mode/batch-write":[{"type":"text","position":{"start":{"line":4}},"value":"Write to MongoDB in Batch Mode"}],"batch-mode":[{"type":"text","position":{"start":{"line":2}},"value":"Batch Mode"}],"configuration":[{"type":"text","position":{"start":{"line":4}},"value":"Configuring Spark"}],"faq":[{"type":"text","position":{"start":{"line":2}},"value":"FAQ"}],"getting-started":[{"type":"text","position":{"start":{"line":2}},"value":"Getting Started with the Spark Connector"}],"index":[{"type":"text","position":{"start":{"line":2}},"value":"MongoDB Connector for Spark"}],"release-notes":[{"type":"text","position":{"start":{"line":4}},"value":"Release Notes"}],"streaming-mode/streaming-read-config":[{"type":"text","position":{"start":{"line":4}},"value":"Streaming Read Configuration Options"}],"streaming-mode/streaming-read":[{"type":"text","position":{"start":{"line":4}},"value":"Read from MongoDB in Streaming Mode"}],"streaming-mode/streaming-write-config":[{"type":"text","position":{"start":{"line":4}},"value":"Streaming Write Configuration Options"}],"streaming-mode/streaming-write":[{"type":"text","position":{"start":{"line":4}},"value":"Write to MongoDB in Streaming Mode"}],"streaming-mode":[{"type":"text","position":{"start":{"line":4}},"value":"Streaming Mode"}],"tls":[{"type":"text","position":{"start":{"line":4}},"value":"Configure TLS/SSL"}]},"slugToBreadcrumbLabel":{"api-docs":"API Documentation","batch-mode/batch-read-config":"Configuration","batch-mode/batch-read":"Read","batch-mode/batch-write-config":"Configuration","batch-mode/batch-write":"Write","batch-mode":"Batch Mode","configuration":"Configuring Spark","faq":"FAQ","getting-started":"Getting Started with the Spark Connector","index":"MongoDB Connector for Spark","release-notes":"Release Notes","streaming-mode/streaming-read-config":"Configuration","streaming-mode/streaming-read":"Read","streaming-mode/streaming-write-config":"Configuration","streaming-mode/streaming-write":"Write","streaming-mode":"Streaming Mode","tls":"Configure TLS/SSL"},"toctree":{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Spark Connector"}],"slug":"/","children":[{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Get Started"}],"slug":"getting-started","children":[],"options":{"drawer":true}},{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Configure Spark"}],"slug":"configuration","children":[],"options":{"drawer":false}},{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Configure TLS/SSL"}],"slug":"tls","children":[],"options":{"drawer":true}},{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Batch Mode"}],"slug":"batch-mode","children":[{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Read"}],"slug":"batch-mode/batch-read","children":[{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Configuration"}],"slug":"batch-mode/batch-read-config","children":[],"options":{"drawer":true}}],"options":{"drawer":false}},{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Write"}],"slug":"batch-mode/batch-write","children":[{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Configuration"}],"slug":"batch-mode/batch-write-config","children":[],"options":{"drawer":true}}],"options":{"drawer":false}}],"options":{"drawer":false}},{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Streaming Mode"}],"slug":"streaming-mode","children":[{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Read"}],"slug":"streaming-mode/streaming-read","children":[{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Configuration"}],"slug":"streaming-mode/streaming-read-config","children":[],"options":{"drawer":true}}],"options":{"drawer":false}},{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Write"}],"slug":"streaming-mode/streaming-write","children":[{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Configuration"}],"slug":"streaming-mode/streaming-write-config","children":[],"options":{"drawer":true}}],"options":{"drawer":false}}],"options":{"drawer":false}},{"title":[{"type":"text","position":{"start":{"line":0}},"value":"FAQ"}],"slug":"faq","children":[],"options":{"drawer":true}},{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Release Notes"}],"slug":"release-notes","children":[],"options":{"drawer":true}},{"title":[{"type":"text","position":{"start":{"line":0}},"value":"API Documentation"}],"slug":"api-docs","children":[{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Spark Connector for Scala 2.13"}],"url":"https://www.javadoc.io/doc/org.mongodb.spark/mongo-spark-connector_2.13/10.4.1/index.html","children":[]},{"title":[{"type":"text","position":{"start":{"line":0}},"value":"Spark Connector for Scala 2.12"}],"url":"https://www.javadoc.io/doc/org.mongodb.spark/mongo-spark-connector_2.12/10.4.1/index.html","children":[]}],"options":{"drawer":true}}]},"toctreeOrder":["/","getting-started","configuration","tls","batch-mode","batch-mode/batch-read","batch-mode/batch-read-config","batch-mode/batch-write","batch-mode/batch-write-config","streaming-mode","streaming-mode/streaming-read","streaming-mode/streaming-read-config","streaming-mode/streaming-write","streaming-mode/streaming-write-config","faq","release-notes","api-docs"],"parentPaths":{"getting-started":[],"configuration":[],"tls":[],"batch-mode":[],"batch-mode/batch-read":["batch-mode"],"batch-mode/batch-read-config":["batch-mode","batch-mode/batch-read"],"batch-mode/batch-write":["batch-mode"],"batch-mode/batch-write-config":["batch-mode","batch-mode/batch-write"],"streaming-mode":[],"streaming-mode/streaming-read":["streaming-mode"],"streaming-mode/streaming-read-config":["streaming-mode","streaming-mode/streaming-read"],"streaming-mode/streaming-write":["streaming-mode"],"streaming-mode/streaming-write-config":["streaming-mode","streaming-mode/streaming-write"],"faq":[],"release-notes":[]},"multiPageTutorials":{},"static_files":{"objects.inv":"IyBTcGhpbnggaW52ZW50b3J5IHZlcnNpb24gMgojIFByb2plY3Q6IHNwYXJrLWNvbm5lY3RvcgojIFZlcnNpb246IAojIFRoZSByZW1haW5kZXIgb2YgdGhpcyBmaWxlIGlzIGNvbXByZXNzZWQgdXNpbmcgemxpYi4KeNq1WE1z3CgQvetXUJUzpdprLinbqWxciTfeVbb2zEjMiI0GFMF4Mvn1aT4sIQkk7FEOLo+a7tcPaJpuSMtwJUqJpKrewg+E/0DEyXJ083iP3ovydKRcEcUEz3ZElTU+iorm9mdHSYVLwffs4GMs6eXoVovQPyBCd0Z06gw8+tLqfzLsZhU/t5D7ThzRg+AH8f4WMe68PYDuHPfcMUVT+PuKzxP4T8tSZ2AA1l3kDlWJ1SlEwHzlcsTN0x8N5P0cGD+goiXdt2xPvvv68JmjDzd/ZweqFGhhqUin6GhPJkM5+tMKUOF0z0zVSNXUutBOOS2V6DLGK/rDh+rn3uugPfxZah1tKJEUc6HoKHBHAzoYzCf6S39mUkGIHDU/s0rDZySCU/RzmJoTL0XzIlSyz0h0DwzMjkchYpGeZOBPdCnql8HS3YZPweJUF8CnhqoZhQ18DieAoq+fi7woPmdSBxueZC9j15AdbVaz3BtQxUYVh6FWs6Bvxnh7UhtR8LC+PNHuidFzBsOKabe0u8LLDOVxEIwnKU1uAkjYXUmObUM929c5XwIsjCTKxpLZkscrKVj6NekqWm25IHPEworWlmRLKq9mYebQkgPjRNHdRbKfW0ZLHPjRjdxeChhZIfk7+G1MjXElehC5LcU49jPVe9Doicq1wINs7Z2fjQIwDlqYoZ7UCjtyUmJ3Kr9RtQ2xMN4NSG+NNE7Hw9aVgY3oapfAxScRQ1mrp/8nTwTLsqZHArfKnnaUl/SFvsMYOGsvqhb8WvQYCs5kSZqryUdAsLu73UANh+OlwDP7oqUl21/QJy7OHH1gtKmkLakLo4U+gpZ0W/K9edUugBkelR1DEbiCN6oWI3WHB7beQPmG4qQSq58UGj5aX//45kokHiNbq87O0QxlpaWbd2m9y3GfNkkbg828f7MTnq9YFNAz+Ff2OBo4E3ZL8JG0iWC+hUUj/c6iB9JmJYGYxQsT1w2nP92A/kdxRiXg3iNdWFBE7PLeNYzCcWEc+lB9FknZCSmh79QhL99BXnFnq6bN5JRMO9hRHvGtJp2tyyWh3jgFO2w99eEy2Y5I5t5r0nj7VmHepG1fyFVbFLTZY4gPRRgHuoUeQDdt27DSXk19RNkOHs/79t7huHMPRWUQY9Lh2w2aN+pjX0mN/TwTB2DTmv+JeayRu5ZWqKkra8IP1Clt4DOAd2dEbikmtYmjaO8tfDw1ikEHBHZNA7tpcsEWS7CE7y5N0/q7cSA5jEMi1g9Sgwl67ERLO3XJJu7j1dXyq43PdwEx6W1nsuWxyzntSWchljzgxHefCUD0wr6aWvDynsLELvCVR6fgViVd5usvUzEOQZ/GKrj5zzcgMGomp0c/YwXv80F//sj1C2iBzXg="},"github_username":"docs-builder-bot","build_id":"67a2781217a2103536045b52","created_at":"2025-02-04T20:29:43.389Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d19","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/api-docs","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"section","position":{"start":{"line":2}},"children":[{"type":"heading","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"API Documentation"}],"id":"api-documentation"},{"type":"list","position":{"start":{"line":4}},"children":[{"type":"listItem","position":{"start":{"line":4}},"children":[{"type":"paragraph","position":{"start":{"line":4}},"children":[{"type":"reference","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Spark Connector for Scala 2.13"}],"refuri":"https://www.javadoc.io/doc/org.mongodb.spark/mongo-spark-connector_2.13/10.4.1/index.html"}]}]},{"type":"listItem","position":{"start":{"line":4}},"children":[{"type":"paragraph","position":{"start":{"line":5}},"children":[{"type":"reference","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"Spark Connector for Scala 2.12"}],"refuri":"https://www.javadoc.io/doc/org.mongodb.spark/mongo-spark-connector_2.12/10.4.1/index.html"}]}]}],"enumtype":"unordered"},{"type":"directive","position":{"start":{"line":7}},"children":[],"domain":"","name":"toctree","argument":[],"options":{"titlesonly":true},"entries":[{"title":"Spark Connector for Scala 2.13","url":"https://www.javadoc.io/doc/org.mongodb.spark/mongo-spark-connector_2.13/10.4.1/index.html"},{"title":"Spark Connector for Scala 2.12","url":"https://www.javadoc.io/doc/org.mongodb.spark/mongo-spark-connector_2.12/10.4.1/index.html"}]}]}],"fileid":"api-docs.txt"},"build_id":"67a262d5234479c10483105c","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"api-docs.txt","static_assets":[],"updated_at":"2025-02-04T18:59:02.075Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d2c","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/batch-mode","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"section","position":{"start":{"line":2}},"children":[{"type":"heading","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"Batch Mode"}],"id":"batch-mode"},{"type":"directive","position":{"start":{"line":4}},"children":[],"domain":"","name":"contents","argument":[{"type":"text","position":{"start":{"line":4}},"value":"On this page"}],"options":{"local":true,"backlinks":"none","depth":1,"class":"singlecol"}},{"type":"directive","position":{"start":{"line":10}},"children":[],"domain":"","name":"toctree","argument":[],"entries":[{"title":"Read","slug":"/batch-mode/batch-read"},{"title":"Write","slug":"/batch-mode/batch-write"}]},{"type":"section","position":{"start":{"line":16}},"children":[{"type":"heading","position":{"start":{"line":16}},"children":[{"type":"text","position":{"start":{"line":16}},"value":"Overview"}],"id":"overview"},{"type":"paragraph","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"In batch mode, you can use the Spark Dataset and DataFrame APIs to process data at\na specified time interval."}]},{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"The following sections show you how to use the Spark Connector to read data from\nMongoDB and write data to MongoDB in batch mode:"}]},{"type":"list","position":{"start":{"line":24}},"children":[{"type":"listItem","position":{"start":{"line":24}},"children":[{"type":"paragraph","position":{"start":{"line":24}},"children":[{"type":"ref_role","position":{"start":{"line":24}},"children":[{"type":"text","position":{"start":{"line":24}},"value":"Read from MongoDB in Batch Mode"}],"domain":"std","name":"label","target":"batch-read-from-mongodb","flag":"","fileid":["batch-mode/batch-read","std-label-batch-read-from-mongodb"]}]}]},{"type":"listItem","position":{"start":{"line":24}},"children":[{"type":"paragraph","position":{"start":{"line":25}},"children":[{"type":"ref_role","position":{"start":{"line":25}},"children":[{"type":"text","position":{"start":{"line":25}},"value":"Write to MongoDB in Batch Mode"}],"domain":"std","name":"label","target":"batch-write-to-mongodb","flag":"","fileid":["batch-mode/batch-write","std-label-batch-write-to-mongodb"]}]}]}],"enumtype":"unordered"},{"type":"directive","position":{"start":{"line":27}},"children":[{"type":"paragraph","position":{"start":{"line":29}},"children":[{"type":"text","position":{"start":{"line":29}},"value":"To learn more about using Spark to process batches of data, see the\n"},{"type":"reference","position":{"start":{"line":29}},"children":[{"type":"text","position":{"start":{"line":29}},"value":"Spark Programming Guide"}],"refuri":"https://spark.apache.org/docs/latest/sql-programming-guide.html"},{"type":"text","position":{"start":{"line":29}},"value":"."}]}],"domain":"","name":"tip","argument":[{"type":"text","position":{"start":{"line":27}},"value":"Apache Spark Documentation"}]}]}]}],"fileid":"batch-mode.txt","options":{"headings":[{"depth":2,"id":"overview","title":[{"type":"text","position":{"start":{"line":16}},"value":"Overview"}],"selector_ids":{}}]}},"build_id":"674f335303fff01a16b0b68f","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"batch-mode.txt","static_assets":[],"updated_at":"2024-12-03T16:37:46.994Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d1f","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/batch-mode/batch-read","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Read from MongoDB in Batch Mode"}],"ids":["batch-read-from-mongodb"]}],"domain":"std","name":"label","html_id":"std-label-batch-read-from-mongodb"},{"type":"section","position":{"start":{"line":4}},"children":[{"type":"heading","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Read from MongoDB in Batch Mode"}],"id":"read-from-mongodb-in-batch-mode"},{"type":"directive","position":{"start":{"line":6}},"children":[],"domain":"","name":"toctree","argument":[],"options":{"caption":"Batch Read Configuration Options"},"entries":[{"title":"Configuration","slug":"/batch-mode/batch-read-config"}]},{"type":"directive","position":{"start":{"line":11}},"children":[],"domain":"","name":"contents","argument":[{"type":"text","position":{"start":{"line":11}},"value":"On this page"}],"options":{"local":true,"backlinks":"none","depth":1,"class":"singlecol"}},{"type":"section","position":{"start":{"line":18}},"children":[{"type":"heading","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"Overview"}],"id":"overview"},{"type":"directive","position":{"start":{"line":20}},"children":[{"type":"directive","position":{"start":{"line":22}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"To read data from MongoDB, call the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"read()"}]},{"type":"text","position":{"start":{"line":0}},"value":" method on your\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":0}},"value":" object. This method returns a\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrameReader"}]},{"type":"text","position":{"start":{"line":0}},"value":" object, which you can use to specify the format and other\nconfiguration settings for your batch read operation."}]},{"type":"directive","position":{"start":{"line":5}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"You must specify the following configuration settings to read from MongoDB:"}]},{"type":"directive","position":{"start":{"line":2}},"children":[{"type":"list","position":{"start":{"line":7}},"children":[{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":7}},"children":[{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"Setting"}]}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":10}},"children":[{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"dataFrame.read.format()"}]}]}]},{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"Specifies the format of the underlying input data source. Use "},{"type":"literal","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":11}},"value":"\nto read from MongoDB."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":14}},"children":[{"type":"listItem","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":14}},"children":[{"type":"literal","position":{"start":{"line":14}},"children":[{"type":"text","position":{"start":{"line":14}},"value":"dataFrame.read.option()"}]}]}]},{"type":"listItem","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"Use the "},{"type":"literal","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"option"}]},{"type":"text","position":{"start":{"line":15}},"value":" method to configure batch read settings, including the\nMongoDB deployment\n"},{"type":"reference","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"connection string"}],"refuri":"https://www.mongodb.com/docs/manual/reference/connection-string/"},{"type":"text","position":{"start":{"line":15}},"value":",\nMongoDB database and collection, and\npartitioner configuration."}]},{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"For a list of batch read configuration options, see\nthe "},{"type":"ref_role","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Batch Read Configuration Options"}],"domain":"std","name":"label","target":"spark-batch-read-conf","flag":"","fileid":["batch-mode/batch-read-config","std-label-spark-batch-read-conf"]},{"type":"text","position":{"start":{"line":21}},"value":" guide."}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"stub-columns":1,"widths":"10 40"}}],"fileid":"includes/batch-read-settings.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":5}},"value":"/includes/batch-read-settings.rst"}]},{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"The following code example shows how to use the previous\nconfiguration settings to read data from "},{"type":"literal","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"people.contacts"}]},{"type":"text","position":{"start":{"line":7}},"value":" in MongoDB:"}]},{"type":"code","position":{"start":{"line":10}},"lang":"java","copyable":true,"emphasize_lines":[],"value":"Dataset<Row> dataFrame = spark.read()\n                       .format(\"mongodb\")\n                       .option(\"database\", \"people\")\n                       .option(\"collection\", \"contacts\")\n                       .load();","linenos":false},{"type":"directive","position":{"start":{"line":18}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":2}},"value":" doesn't exist as a class in the Java API. Use\n"},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"Dataset<Row>"}]},{"type":"text","position":{"start":{"line":2}},"value":" to reference a DataFrame."}]}],"domain":"","name":"tip","argument":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrame Type"}]}],"fileid":"includes/java-dataframe-tip.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":18}},"value":"/includes/java-dataframe-tip.rst"}]}],"fileid":"java/read-from-mongodb.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/java/read-from-mongodb.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":20}},"value":"Java (Sync)"}],"options":{"tabid":"java-sync"}},{"type":"directive","position":{"start":{"line":27}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"To read data from MongoDB, call the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"read"}]},{"type":"text","position":{"start":{"line":0}},"value":" function on your\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":0}},"value":" object. This function returns a\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrameReader"}]},{"type":"text","position":{"start":{"line":0}},"value":"\nobject, which you can use to specify the format and other configuration settings for your\nbatch read operation."}]},{"type":"directive","position":{"start":{"line":6}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"You must specify the following configuration settings to read from MongoDB:"}]},{"type":"directive","position":{"start":{"line":2}},"children":[{"type":"list","position":{"start":{"line":7}},"children":[{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":7}},"children":[{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"Setting"}]}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":10}},"children":[{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"dataFrame.read.format()"}]}]}]},{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"Specifies the format of the underlying input data source. Use "},{"type":"literal","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":11}},"value":"\nto read from MongoDB."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":14}},"children":[{"type":"listItem","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":14}},"children":[{"type":"literal","position":{"start":{"line":14}},"children":[{"type":"text","position":{"start":{"line":14}},"value":"dataFrame.read.option()"}]}]}]},{"type":"listItem","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"Use the "},{"type":"literal","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"option"}]},{"type":"text","position":{"start":{"line":15}},"value":" method to configure batch read settings, including the\nMongoDB deployment\n"},{"type":"reference","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"connection string"}],"refuri":"https://www.mongodb.com/docs/manual/reference/connection-string/"},{"type":"text","position":{"start":{"line":15}},"value":",\nMongoDB database and collection, and\npartitioner configuration."}]},{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"For a list of batch read configuration options, see\nthe "},{"type":"ref_role","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Batch Read Configuration Options"}],"domain":"std","name":"label","target":"spark-batch-read-conf","flag":"","fileid":["batch-mode/batch-read-config","std-label-spark-batch-read-conf"]},{"type":"text","position":{"start":{"line":21}},"value":" guide."}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"stub-columns":1,"widths":"10 40"}}],"fileid":"includes/batch-read-settings.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":6}},"value":"/includes/batch-read-settings.rst"}]},{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"The following code example shows how to use the previous\nconfiguration settings to read data from "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"people.contacts"}]},{"type":"text","position":{"start":{"line":8}},"value":" in MongoDB:"}]},{"type":"code","position":{"start":{"line":11}},"lang":"python","copyable":true,"emphasize_lines":[],"value":"dataFrame = spark.read\n                 .format(\"mongodb\")\n                 .option(\"database\", \"people\")\n                 .option(\"collection\", \"contacts\")\n                 .load()","linenos":false}],"fileid":"python/read-from-mongodb.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/python/read-from-mongodb.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":20}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":32}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"To read data from MongoDB, call the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"read"}]},{"type":"text","position":{"start":{"line":0}},"value":" method on your\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":0}},"value":" object. This method returns a\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrameReader"}]},{"type":"text","position":{"start":{"line":0}},"value":"\nobject, which you can use to specify the format and other configuration settings for your\nbatch read operation."}]},{"type":"directive","position":{"start":{"line":6}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"You must specify the following configuration settings to read from MongoDB:"}]},{"type":"directive","position":{"start":{"line":2}},"children":[{"type":"list","position":{"start":{"line":7}},"children":[{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":7}},"children":[{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"Setting"}]}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":10}},"children":[{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"dataFrame.read.format()"}]}]}]},{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"Specifies the format of the underlying input data source. Use "},{"type":"literal","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":11}},"value":"\nto read from MongoDB."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":14}},"children":[{"type":"listItem","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":14}},"children":[{"type":"literal","position":{"start":{"line":14}},"children":[{"type":"text","position":{"start":{"line":14}},"value":"dataFrame.read.option()"}]}]}]},{"type":"listItem","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"Use the "},{"type":"literal","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"option"}]},{"type":"text","position":{"start":{"line":15}},"value":" method to configure batch read settings, including the\nMongoDB deployment\n"},{"type":"reference","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"connection string"}],"refuri":"https://www.mongodb.com/docs/manual/reference/connection-string/"},{"type":"text","position":{"start":{"line":15}},"value":",\nMongoDB database and collection, and\npartitioner configuration."}]},{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"For a list of batch read configuration options, see\nthe "},{"type":"ref_role","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Batch Read Configuration Options"}],"domain":"std","name":"label","target":"spark-batch-read-conf","flag":"","fileid":["batch-mode/batch-read-config","std-label-spark-batch-read-conf"]},{"type":"text","position":{"start":{"line":21}},"value":" guide."}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"stub-columns":1,"widths":"10 40"}}],"fileid":"includes/batch-read-settings.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":6}},"value":"/includes/batch-read-settings.rst"}]},{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"The following code example shows how to use the previous\nconfiguration settings to read data from "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"people.contacts"}]},{"type":"text","position":{"start":{"line":8}},"value":" in MongoDB:"}]},{"type":"code","position":{"start":{"line":11}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"val dataFrame = spark.read\n              .format(\"mongodb\")\n              .option(\"database\", \"people\")\n              .option(\"collection\", \"contacts\")\n              .load()","linenos":false},{"type":"directive","position":{"start":{"line":19}},"children":[{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"A DataFrame is represented by a "},{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Dataset"}]},{"type":"text","position":{"start":{"line":21}},"value":" of "},{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Row"}]},{"type":"text","position":{"start":{"line":21}},"value":" objects.\nThe "},{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":21}},"value":" type is an alias for "},{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Dataset[Row]"}]},{"type":"text","position":{"start":{"line":21}},"value":"."}]}],"domain":"","name":"tip","argument":[{"type":"text","position":{"start":{"line":19}},"value":"DataFrame Type"}]}],"fileid":"scala/read-from-mongodb.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/scala/read-from-mongodb.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":20}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}}]},{"type":"section","position":{"start":{"line":39}},"children":[{"type":"heading","position":{"start":{"line":39}},"children":[{"type":"text","position":{"start":{"line":39}},"value":"Schema Inference"}],"id":"schema-inference"},{"type":"directive","position":{"start":{"line":41}},"children":[{"type":"directive","position":{"start":{"line":43}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[],"ids":["java-schema-inference"]}],"domain":"std","name":"label","html_id":"std-label-java-schema-inference"},{"type":"directive","position":{"start":{"line":2}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"When you load a Dataset or DataFrame without a schema, Spark samples\nthe records to infer the schema of the collection."}]},{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"Suppose that the MongoDB collection "},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"people.contacts"}]},{"type":"text","position":{"start":{"line":3}},"value":" contains the following documents:"}]},{"type":"code","position":{"start":{"line":5}},"lang":"javascript","copyable":true,"emphasize_lines":[],"value":"{ \"_id\" : ObjectId(\"585024d558bef808ed84fc3e\"), \"name\" : \"Bilbo Baggins\", \"age\" : 50 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc3f\"), \"name\" : \"Gandalf\", \"age\" : 1000 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc40\"), \"name\" : \"Thorin\", \"age\" : 195 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc41\"), \"name\" : \"Balin\", \"age\" : 178 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc42\"), \"name\" : \"Kíli\", \"age\" : 77 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc43\"), \"name\" : \"Dwalin\", \"age\" : 169 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc44\"), \"name\" : \"Óin\", \"age\" : 167 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc45\"), \"name\" : \"Glóin\", \"age\" : 158 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc46\"), \"name\" : \"Fíli\", \"age\" : 82 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc47\"), \"name\" : \"Bombur\" }","linenos":false},{"type":"paragraph","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"The following operation loads data from "},{"type":"literal","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"people.contacts"}]},{"type":"text","position":{"start":{"line":18}},"value":"\nand infers the schema of the DataFrame:"}]}],"fileid":"includes/schema-inference-intro.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":2}},"value":"/includes/schema-inference-intro.rst"}]},{"type":"code","position":{"start":{"line":4}},"lang":"java","copyable":true,"emphasize_lines":[],"value":"Dataset<Row> dataFrame = spark.read()\n                              .format(\"mongodb\")\n                              .option(\"database\", \"people\")\n                              .option(\"collection\", \"contacts\")\n                              .load();","linenos":false},{"type":"paragraph","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"To see the inferred schema, use the "},{"type":"literal","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"printSchema()"}]},{"type":"text","position":{"start":{"line":12}},"value":" method on your "},{"type":"literal","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"Dataset<Row>"}]},{"type":"text","position":{"start":{"line":12}},"value":"\nobject, as shown in the following example:"}]},{"type":"directive","position":{"start":{"line":15}},"children":[{"type":"directive","position":{"start":{"line":18}},"children":[{"type":"code","position":{"start":{"line":18}},"lang":"java","copyable":true,"emphasize_lines":[],"value":"dataFrame.printSchema();","linenos":false}],"domain":"","name":"input","argument":[],"options":{"language":"java"}},{"type":"directive","position":{"start":{"line":23}},"children":[{"type":"code","position":{"start":{"line":23}},"lang":"none","copyable":true,"emphasize_lines":[],"value":"root\n |-- _id: struct (nullable = true)\n |    |-- oid: string (nullable = true)\n |-- age: integer (nullable = true)\n |-- name: string (nullable = true)","linenos":false}],"domain":"","name":"output","argument":[],"options":{"language":"none","visible":false}}],"domain":"","name":"io-code-block","argument":[],"options":{"copyable":true}},{"type":"paragraph","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"To see the data in the DataFrame, use the "},{"type":"literal","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"show()"}]},{"type":"text","position":{"start":{"line":33}},"value":" method on your "},{"type":"literal","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":33}},"value":" object,\nas shown in the following example:"}]},{"type":"directive","position":{"start":{"line":36}},"children":[{"type":"directive","position":{"start":{"line":39}},"children":[{"type":"code","position":{"start":{"line":39}},"lang":"java","copyable":true,"emphasize_lines":[],"value":"dataFrame.show();","linenos":false}],"domain":"","name":"input","argument":[],"options":{"language":"java"}},{"type":"directive","position":{"start":{"line":44}},"children":[{"type":"code","position":{"start":{"line":44}},"lang":"none","copyable":true,"emphasize_lines":[],"value":"+--------------------+----+-------------+\n|                 _id| age|         name|\n+--------------------+----+-------------+\n|[585024d558bef808...|  50|Bilbo Baggins|\n|[585024d558bef808...|1000|      Gandalf|\n|[585024d558bef808...| 195|       Thorin|\n|[585024d558bef808...| 178|        Balin|\n|[585024d558bef808...|  77|         Kíli|\n|[585024d558bef808...| 169|       Dwalin|\n|[585024d558bef808...| 167|          Óin|\n|[585024d558bef808...| 158|        Glóin|\n|[585024d558bef808...|  82|         Fíli|\n|[585024d558bef808...|null|       Bombur|\n+--------------------+----+-------------+","linenos":false}],"domain":"","name":"output","argument":[],"options":{"language":"none","visible":false}}],"domain":"","name":"io-code-block","argument":[],"options":{"copyable":true}}],"fileid":"java/schema-inference.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/java/schema-inference.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":41}},"value":"Java (Sync)"}],"options":{"tabid":"java-sync"}},{"type":"directive","position":{"start":{"line":48}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[],"ids":["python-schema-inference"]}],"domain":"std","name":"label","html_id":"std-label-python-schema-inference"},{"type":"directive","position":{"start":{"line":2}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"When you load a Dataset or DataFrame without a schema, Spark samples\nthe records to infer the schema of the collection."}]},{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"Suppose that the MongoDB collection "},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"people.contacts"}]},{"type":"text","position":{"start":{"line":3}},"value":" contains the following documents:"}]},{"type":"code","position":{"start":{"line":5}},"lang":"javascript","copyable":true,"emphasize_lines":[],"value":"{ \"_id\" : ObjectId(\"585024d558bef808ed84fc3e\"), \"name\" : \"Bilbo Baggins\", \"age\" : 50 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc3f\"), \"name\" : \"Gandalf\", \"age\" : 1000 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc40\"), \"name\" : \"Thorin\", \"age\" : 195 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc41\"), \"name\" : \"Balin\", \"age\" : 178 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc42\"), \"name\" : \"Kíli\", \"age\" : 77 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc43\"), \"name\" : \"Dwalin\", \"age\" : 169 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc44\"), \"name\" : \"Óin\", \"age\" : 167 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc45\"), \"name\" : \"Glóin\", \"age\" : 158 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc46\"), \"name\" : \"Fíli\", \"age\" : 82 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc47\"), \"name\" : \"Bombur\" }","linenos":false},{"type":"paragraph","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"The following operation loads data from "},{"type":"literal","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"people.contacts"}]},{"type":"text","position":{"start":{"line":18}},"value":"\nand infers the schema of the DataFrame:"}]}],"fileid":"includes/schema-inference-intro.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":2}},"value":"/includes/schema-inference-intro.rst"}]},{"type":"code","position":{"start":{"line":4}},"lang":"python","copyable":true,"emphasize_lines":[],"value":"dataFrame = spark.read\n                 .format(\"mongodb\")\n                 .option(\"database\", \"people\")\n                 .option(\"collection\", \"contacts\")\n                 .load()","linenos":false},{"type":"paragraph","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"To see the inferred schema, use the "},{"type":"literal","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"printSchema()"}]},{"type":"text","position":{"start":{"line":12}},"value":" function on your "},{"type":"literal","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":12}},"value":"\nobject, as shown in the following example:"}]},{"type":"directive","position":{"start":{"line":15}},"children":[{"type":"directive","position":{"start":{"line":18}},"children":[{"type":"code","position":{"start":{"line":18}},"lang":"python","copyable":true,"emphasize_lines":[],"value":"dataFrame.printSchema()","linenos":false}],"domain":"","name":"input","argument":[],"options":{"language":"python"}},{"type":"directive","position":{"start":{"line":23}},"children":[{"type":"code","position":{"start":{"line":23}},"lang":"none","copyable":true,"emphasize_lines":[],"value":"root\n |-- _id: struct (nullable = true)\n |    |-- oid: string (nullable = true)\n |-- age: integer (nullable = true)\n |-- name: string (nullable = true)","linenos":false}],"domain":"","name":"output","argument":[],"options":{"language":"none","visible":false}}],"domain":"","name":"io-code-block","argument":[],"options":{"copyable":true}},{"type":"paragraph","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"To see the data in the DataFrame, use the "},{"type":"literal","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"show()"}]},{"type":"text","position":{"start":{"line":33}},"value":" function on your "},{"type":"literal","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":33}},"value":"\nobject, as shown in the following example:"}]},{"type":"directive","position":{"start":{"line":36}},"children":[{"type":"directive","position":{"start":{"line":39}},"children":[{"type":"code","position":{"start":{"line":39}},"lang":"python","copyable":true,"emphasize_lines":[],"value":"dataFrame.show()","linenos":false}],"domain":"","name":"input","argument":[],"options":{"language":"python"}},{"type":"directive","position":{"start":{"line":44}},"children":[{"type":"code","position":{"start":{"line":44}},"lang":"none","copyable":true,"emphasize_lines":[],"value":"+--------------------+----+-------------+\n|                 _id| age|         name|\n+--------------------+----+-------------+\n|[585024d558bef808...|  50|Bilbo Baggins|\n|[585024d558bef808...|1000|      Gandalf|\n|[585024d558bef808...| 195|       Thorin|\n|[585024d558bef808...| 178|        Balin|\n|[585024d558bef808...|  77|         Kíli|\n|[585024d558bef808...| 169|       Dwalin|\n|[585024d558bef808...| 167|          Óin|\n|[585024d558bef808...| 158|        Glóin|\n|[585024d558bef808...|  82|         Fíli|\n|[585024d558bef808...|null|       Bombur|\n+--------------------+----+-------------+","linenos":false}],"domain":"","name":"output","argument":[],"options":{"language":"none","visible":false}}],"domain":"","name":"io-code-block","argument":[],"options":{"copyable":true}}],"fileid":"python/schema-inference.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/python/schema-inference.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":41}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":53}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[],"ids":["scala-schema-inference"]}],"domain":"std","name":"label","html_id":"std-label-scala-schema-inference"},{"type":"directive","position":{"start":{"line":2}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"When you load a Dataset or DataFrame without a schema, Spark samples\nthe records to infer the schema of the collection."}]},{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"Suppose that the MongoDB collection "},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"people.contacts"}]},{"type":"text","position":{"start":{"line":3}},"value":" contains the following documents:"}]},{"type":"code","position":{"start":{"line":5}},"lang":"javascript","copyable":true,"emphasize_lines":[],"value":"{ \"_id\" : ObjectId(\"585024d558bef808ed84fc3e\"), \"name\" : \"Bilbo Baggins\", \"age\" : 50 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc3f\"), \"name\" : \"Gandalf\", \"age\" : 1000 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc40\"), \"name\" : \"Thorin\", \"age\" : 195 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc41\"), \"name\" : \"Balin\", \"age\" : 178 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc42\"), \"name\" : \"Kíli\", \"age\" : 77 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc43\"), \"name\" : \"Dwalin\", \"age\" : 169 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc44\"), \"name\" : \"Óin\", \"age\" : 167 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc45\"), \"name\" : \"Glóin\", \"age\" : 158 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc46\"), \"name\" : \"Fíli\", \"age\" : 82 }\n{ \"_id\" : ObjectId(\"585024d558bef808ed84fc47\"), \"name\" : \"Bombur\" }","linenos":false},{"type":"paragraph","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"The following operation loads data from "},{"type":"literal","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"people.contacts"}]},{"type":"text","position":{"start":{"line":18}},"value":"\nand infers the schema of the DataFrame:"}]}],"fileid":"includes/schema-inference-intro.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":2}},"value":"/includes/schema-inference-intro.rst"}]},{"type":"code","position":{"start":{"line":4}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"val dataFrame = spark.read()\n                     .format(\"mongodb\")\n                     .option(\"database\", \"people\")\n                     .option(\"collection\", \"contacts\")\n                     .load()","linenos":false},{"type":"paragraph","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"To see the inferred schema, use the "},{"type":"literal","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"printSchema()"}]},{"type":"text","position":{"start":{"line":12}},"value":" method on your "},{"type":"literal","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":12}},"value":"\nobject, as shown in the following example:"}]},{"type":"directive","position":{"start":{"line":15}},"children":[{"type":"directive","position":{"start":{"line":18}},"children":[{"type":"code","position":{"start":{"line":18}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"dataFrame.printSchema()","linenos":false}],"domain":"","name":"input","argument":[],"options":{"language":"scala"}},{"type":"directive","position":{"start":{"line":23}},"children":[{"type":"code","position":{"start":{"line":23}},"lang":"none","copyable":true,"emphasize_lines":[],"value":"root\n |-- _id: struct (nullable = true)\n |    |-- oid: string (nullable = true)\n |-- age: integer (nullable = true)\n |-- name: string (nullable = true)","linenos":false}],"domain":"","name":"output","argument":[],"options":{"language":"none","visible":false}}],"domain":"","name":"io-code-block","argument":[],"options":{"copyable":true}},{"type":"paragraph","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"To see the data in the DataFrame, use the "},{"type":"literal","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"show()"}]},{"type":"text","position":{"start":{"line":33}},"value":" method on your "},{"type":"literal","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":33}},"value":" object,\nas shown in the following example:"}]},{"type":"directive","position":{"start":{"line":36}},"children":[{"type":"directive","position":{"start":{"line":39}},"children":[{"type":"code","position":{"start":{"line":39}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"dataFrame.show()","linenos":false}],"domain":"","name":"input","argument":[],"options":{"language":"scala"}},{"type":"directive","position":{"start":{"line":44}},"children":[{"type":"code","position":{"start":{"line":44}},"lang":"none","copyable":true,"emphasize_lines":[],"value":"+--------------------+----+-------------+\n|                 _id| age|         name|\n+--------------------+----+-------------+\n|[585024d558bef808...|  50|Bilbo Baggins|\n|[585024d558bef808...|1000|      Gandalf|\n|[585024d558bef808...| 195|       Thorin|\n|[585024d558bef808...| 178|        Balin|\n|[585024d558bef808...|  77|         Kíli|\n|[585024d558bef808...| 169|       Dwalin|\n|[585024d558bef808...| 167|          Óin|\n|[585024d558bef808...| 158|        Glóin|\n|[585024d558bef808...|  82|         Fíli|\n|[585024d558bef808...|null|       Bombur|\n+--------------------+----+-------------+","linenos":false}],"domain":"","name":"output","argument":[],"options":{"language":"none","visible":false}}],"domain":"","name":"io-code-block","argument":[],"options":{"copyable":true}}],"fileid":"scala/schema-inference.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/scala/schema-inference.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":41}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}},{"type":"target","position":{"start":{"line":59}},"children":[{"type":"target_identifier","position":{"start":{"line":59}},"children":[{"type":"text","position":{"start":{"line":62}},"value":"Specify Known Fields with Schema Hints"}],"ids":["spark-schema-hint"]}],"domain":"std","name":"label","html_id":"std-label-spark-schema-hint"},{"type":"section","position":{"start":{"line":62}},"children":[{"type":"heading","position":{"start":{"line":62}},"children":[{"type":"text","position":{"start":{"line":62}},"value":"Specify Known Fields with Schema Hints"}],"id":"specify-known-fields-with-schema-hints"},{"type":"paragraph","position":{"start":{"line":64}},"children":[{"type":"text","position":{"start":{"line":64}},"value":"You can specify a schema containing known field values to use during\nschema inference by specifying the "},{"type":"literal","position":{"start":{"line":64}},"children":[{"type":"text","position":{"start":{"line":64}},"value":"schemaHint"}]},{"type":"text","position":{"start":{"line":64}},"value":" configuration option. You can\nspecify the "},{"type":"literal","position":{"start":{"line":64}},"children":[{"type":"text","position":{"start":{"line":64}},"value":"schemaHint"}]},{"type":"text","position":{"start":{"line":64}},"value":" option in any of the following Spark formats:"}]},{"type":"directive","position":{"start":{"line":68}},"children":[{"type":"list","position":{"start":{"line":72}},"children":[{"type":"listItem","position":{"start":{"line":72}},"children":[{"type":"list","position":{"start":{"line":72}},"children":[{"type":"listItem","position":{"start":{"line":72}},"children":[{"type":"paragraph","position":{"start":{"line":72}},"children":[{"type":"text","position":{"start":{"line":72}},"value":"Type"}]}]},{"type":"listItem","position":{"start":{"line":72}},"children":[{"type":"paragraph","position":{"start":{"line":73}},"children":[{"type":"text","position":{"start":{"line":73}},"value":"Format"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":72}},"children":[{"type":"list","position":{"start":{"line":75}},"children":[{"type":"listItem","position":{"start":{"line":75}},"children":[{"type":"paragraph","position":{"start":{"line":75}},"children":[{"type":"text","position":{"start":{"line":75}},"value":"DDL"}]}]},{"type":"listItem","position":{"start":{"line":75}},"children":[{"type":"paragraph","position":{"start":{"line":76}},"children":[{"type":"literal","position":{"start":{"line":76}},"children":[{"type":"text","position":{"start":{"line":76}},"value":"<field one name> <FIELD ONE TYPE>, <field two name> <FIELD TWO TYPE>"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":72}},"children":[{"type":"list","position":{"start":{"line":78}},"children":[{"type":"listItem","position":{"start":{"line":78}},"children":[{"type":"paragraph","position":{"start":{"line":78}},"children":[{"type":"text","position":{"start":{"line":78}},"value":"SQL DDL"}]}]},{"type":"listItem","position":{"start":{"line":78}},"children":[{"type":"paragraph","position":{"start":{"line":79}},"children":[{"type":"literal","position":{"start":{"line":79}},"children":[{"type":"text","position":{"start":{"line":79}},"value":"STRUCT<<field one name>: <FIELD ONE TYPE>, <field two name>: <FIELD TWO TYPE>"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":72}},"children":[{"type":"list","position":{"start":{"line":81}},"children":[{"type":"listItem","position":{"start":{"line":81}},"children":[{"type":"paragraph","position":{"start":{"line":81}},"children":[{"type":"text","position":{"start":{"line":81}},"value":"JSON"}]}]},{"type":"listItem","position":{"start":{"line":81}},"children":[{"type":"code","position":{"start":{"line":82}},"lang":"json","copyable":false,"emphasize_lines":[],"value":"{ \"type\": \"struct\", \"fields\": [\n{ \"name\": \"<field name>\", \"type\": \"<field type>\", \"nullable\": <true/false> },\n{ \"name\": \"<field name>\", \"type\": \"<field type>\", \"nullable\": <true/false> }]}","linenos":false}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"widths":"35 65"}},{"type":"paragraph","position":{"start":{"line":89}},"children":[{"type":"text","position":{"start":{"line":89}},"value":"The following example shows how to specify the "},{"type":"literal","position":{"start":{"line":89}},"children":[{"type":"text","position":{"start":{"line":89}},"value":"schemaHint"}]},{"type":"text","position":{"start":{"line":89}},"value":" option in each\nformat by using the Spark shell. The example specifies a string-valued field named\n"},{"type":"literal","position":{"start":{"line":89}},"children":[{"type":"text","position":{"start":{"line":89}},"value":"\"value\""}]},{"type":"text","position":{"start":{"line":89}},"value":" and an integer-valued field named "},{"type":"literal","position":{"start":{"line":89}},"children":[{"type":"text","position":{"start":{"line":89}},"value":"\"count\""}]},{"type":"text","position":{"start":{"line":89}},"value":"."}]},{"type":"code","position":{"start":{"line":93}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"import org.apache.spark.sql.types._\n\nval mySchema = StructType(Seq(\n    StructField(\"value\", StringType),\n    StructField(\"count\", IntegerType))\n\n// Generate DDL format\nmySchema.toDDL\n\n// Generate SQL DDL format\nmySchema.sql\n\n// Generate Simple String DDL format\nmySchema.simpleString\n\n// Generate JSON format\nmySchema.json","linenos":false},{"type":"paragraph","position":{"start":{"line":113}},"children":[{"type":"text","position":{"start":{"line":113}},"value":"You can also specify the "},{"type":"literal","position":{"start":{"line":113}},"children":[{"type":"text","position":{"start":{"line":113}},"value":"schemaHint"}]},{"type":"text","position":{"start":{"line":113}},"value":" option in the Simple String DDL format,\nor in JSON format by using PySpark, as shown in the following example:"}]},{"type":"code","position":{"start":{"line":116}},"lang":"python","copyable":true,"emphasize_lines":[],"value":"from pyspark.sql.types import StructType, StructField, StringType, IntegerType\n\nmySchema = StructType([\n   StructField('value', StringType(), True),\n   StructField('count', IntegerType(), True)])\n\n# Generate Simple String DDL format\nmySchema.simpleString()\n\n# Generate JSON format\nmySchema.json()","linenos":false}]}]},{"type":"section","position":{"start":{"line":131}},"children":[{"type":"heading","position":{"start":{"line":131}},"children":[{"type":"text","position":{"start":{"line":131}},"value":"Filters"}],"id":"filters"},{"type":"directive","position":{"start":{"line":133}},"children":[{"type":"directive","position":{"start":{"line":136}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"When using filters with DataFrames or Datasets, the\nunderlying MongoDB Connector code constructs an "},{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"aggregation\npipeline"}],"refuri":"https://www.mongodb.com/docs/manual/core/aggregation-pipeline/"},{"type":"text","position":{"start":{"line":0}},"value":" to filter the data in\nMongoDB before sending it to Spark. This improves Spark performance\nby retrieving and processing only the data you need."}]},{"type":"paragraph","position":{"start":{"line":6}},"children":[{"type":"text","position":{"start":{"line":6}},"value":"MongoDB Spark Connector turns the following filters into\naggregation pipeline stages:"}]},{"type":"list","position":{"start":{"line":9}},"children":[{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":9}},"children":[{"type":"text","position":{"start":{"line":9}},"value":"And"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"EqualNullSafe"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"EqualTo"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"GreaterThan"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"GreaterThanOrEqual"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":14}},"children":[{"type":"text","position":{"start":{"line":14}},"value":"In"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"IsNull"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":16}},"children":[{"type":"text","position":{"start":{"line":16}},"value":"LessThan"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"LessThanOrEqual"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"Not"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":19}},"children":[{"type":"text","position":{"start":{"line":19}},"value":"Or"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":20}},"children":[{"type":"text","position":{"start":{"line":20}},"value":"StringContains"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"StringEndsWith"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"StringStartsWith"}]}]}],"enumtype":"unordered"}],"fileid":"includes/pushed-filters.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"includes/pushed-filters.rst"}]},{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"Use "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"filter()"}]},{"type":"text","position":{"start":{"line":2}},"value":" to read a subset of data from your MongoDB collection."}]},{"type":"directive","position":{"start":{"line":4}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Consider a collection named "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"fruit"}]},{"type":"text","position":{"start":{"line":0}},"value":" that contains the\nfollowing documents:"}]},{"type":"code","position":{"start":{"line":3}},"lang":"javascript","copyable":true,"emphasize_lines":[],"value":"{ \"_id\" : 1, \"type\" : \"apple\", \"qty\" : 5 }\n{ \"_id\" : 2, \"type\" : \"orange\", \"qty\" : 10 }\n{ \"_id\" : 3, \"type\" : \"banana\", \"qty\" : 15 }","linenos":false}],"fileid":"includes/example-load-dataframe.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":4}},"value":"/includes/example-load-dataframe.rst"}]},{"type":"paragraph","position":{"start":{"line":6}},"children":[{"type":"text","position":{"start":{"line":6}},"value":"First, set up a "},{"type":"literal","position":{"start":{"line":6}},"children":[{"type":"text","position":{"start":{"line":6}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":6}},"value":" object to connect with your default MongoDB data\nsource:"}]},{"type":"code","position":{"start":{"line":9}},"lang":"python","copyable":true,"emphasize_lines":[],"value":"df = spark.read.format(\"mongodb\").load()","linenos":false},{"type":"paragraph","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"The following example includes only\nrecords in which the "},{"type":"literal","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"qty"}]},{"type":"text","position":{"start":{"line":13}},"value":" field is greater than or equal to "},{"type":"literal","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"10"}]},{"type":"text","position":{"start":{"line":13}},"value":"."}]},{"type":"code","position":{"start":{"line":16}},"lang":"python","copyable":true,"emphasize_lines":[],"value":"df.filter(df['qty'] >= 10).show()","linenos":false},{"type":"paragraph","position":{"start":{"line":20}},"children":[{"type":"text","position":{"start":{"line":20}},"value":"The operation prints the following output:"}]},{"type":"code","position":{"start":{"line":22}},"lang":"none","copyable":true,"emphasize_lines":[],"value":"+---+----+------+\n|_id| qty|  type|\n+---+----+------+\n|2.0|10.0|orange|\n|3.0|15.0|banana|\n+---+----+------+","linenos":false}],"fileid":"python/filters.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/python/filters.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":133}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":141}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"When using filters with DataFrames or Datasets, the\nunderlying MongoDB Connector code constructs an "},{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"aggregation\npipeline"}],"refuri":"https://www.mongodb.com/docs/manual/core/aggregation-pipeline/"},{"type":"text","position":{"start":{"line":0}},"value":" to filter the data in\nMongoDB before sending it to Spark. This improves Spark performance\nby retrieving and processing only the data you need."}]},{"type":"paragraph","position":{"start":{"line":6}},"children":[{"type":"text","position":{"start":{"line":6}},"value":"MongoDB Spark Connector turns the following filters into\naggregation pipeline stages:"}]},{"type":"list","position":{"start":{"line":9}},"children":[{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":9}},"children":[{"type":"text","position":{"start":{"line":9}},"value":"And"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"EqualNullSafe"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"EqualTo"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"GreaterThan"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"GreaterThanOrEqual"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":14}},"children":[{"type":"text","position":{"start":{"line":14}},"value":"In"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"IsNull"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":16}},"children":[{"type":"text","position":{"start":{"line":16}},"value":"LessThan"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"LessThanOrEqual"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"Not"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":19}},"children":[{"type":"text","position":{"start":{"line":19}},"value":"Or"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":20}},"children":[{"type":"text","position":{"start":{"line":20}},"value":"StringContains"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"StringEndsWith"}]}]},{"type":"listItem","position":{"start":{"line":9}},"children":[{"type":"paragraph","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"StringStartsWith"}]}]}],"enumtype":"unordered"}],"fileid":"includes/pushed-filters.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/includes/pushed-filters.rst"}]},{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"The following example filters and output the characters with ages under\n100:"}]},{"type":"code","position":{"start":{"line":5}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"df.filter(df(\"age\") < 100).show()","linenos":false},{"type":"paragraph","position":{"start":{"line":9}},"children":[{"type":"text","position":{"start":{"line":9}},"value":"The operation outputs the following:"}]},{"type":"code","position":{"start":{"line":11}},"lang":"none","copyable":true,"emphasize_lines":[],"value":"+--------------------+---+-------------+\n|                 _id|age|         name|\n+--------------------+---+-------------+\n|[5755d7b4566878c9...| 50|Bilbo Baggins|\n|[5755d7b4566878c9...| 82|         Fíli|\n|[5755d7b4566878c9...| 77|         Kíli|\n+--------------------+---+-------------+","linenos":false}],"fileid":"scala/filters.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/scala/filters.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":133}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}}]},{"type":"section","position":{"start":{"line":148}},"children":[{"type":"heading","position":{"start":{"line":148}},"children":[{"type":"text","position":{"start":{"line":148}},"value":"SQL Queries"}],"id":"sql-queries"},{"type":"directive","position":{"start":{"line":150}},"children":[{"type":"directive","position":{"start":{"line":152}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[],"ids":["java-sql"]}],"domain":"std","name":"label","html_id":"std-label-java-sql"},{"type":"directive","position":{"start":{"line":2}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Before running SQL queries on your Dataset, you must register a\ntemporary view for the Dataset."}]},{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"The following operation registers a\n"},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"characters"}]},{"type":"text","position":{"start":{"line":3}},"value":" table and then queries it to find all characters that\nare 100 or older:"}]}],"fileid":"includes/scala-java-sql-register-table.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":2}},"value":"/includes/scala-java-sql-register-table.rst"}]},{"type":"code","position":{"start":{"line":4}},"lang":"java","copyable":true,"emphasize_lines":[],"value":"implicitDS.createOrReplaceTempView(\"characters\");\nDataset<Row> centenarians = spark.sql(\"SELECT name, age FROM characters WHERE age >= 100\");\ncentenarians.show();","linenos":false},{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"centenarians.show()"}]},{"type":"text","position":{"start":{"line":10}},"value":" outputs the following:"}]},{"type":"code","position":{"start":{"line":12}},"lang":"sh","copyable":true,"emphasize_lines":[],"value":"+-------+----+\n|   name| age|\n+-------+----+\n|Gandalf|1000|\n| Thorin| 195|\n|  Balin| 178|\n| Dwalin| 169|\n|    Óin| 167|\n|  Glóin| 158|\n+-------+----+","linenos":false}],"fileid":"java/sql.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/java/sql.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":150}},"value":"Java (Sync)"}],"options":{"tabid":"java-sync"}},{"type":"directive","position":{"start":{"line":157}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Before you can run SQL queries against your DataFrame, you need to\nregister a temporary table."}]},{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"The following example registers a temporary table called "},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"temp"}]},{"type":"text","position":{"start":{"line":3}},"value":",\nthen uses SQL to query for records in which the "},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"type"}]},{"type":"text","position":{"start":{"line":3}},"value":" field\ncontains the letter "},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"e"}]},{"type":"text","position":{"start":{"line":3}},"value":":"}]},{"type":"code","position":{"start":{"line":7}},"lang":"python","copyable":true,"emphasize_lines":[],"value":"df.createOrReplaceTempView(\"temp\")\nsome_fruit = spark.sql(\"SELECT type, qty FROM temp WHERE type LIKE '%e%'\")\nsome_fruit.show()","linenos":false},{"type":"paragraph","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"In the "},{"type":"literal","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"pyspark"}]},{"type":"text","position":{"start":{"line":13}},"value":" shell, the operation prints the following output:"}]},{"type":"code","position":{"start":{"line":15}},"lang":"none","copyable":true,"emphasize_lines":[],"value":"+------+----+\n|  type| qty|\n+------+----+\n| apple| 5.0|\n|orange|10.0|\n+------+----+","linenos":false}],"fileid":"python/sql.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/python/sql.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":150}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":162}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Before running SQL queries on your Dataset, you must register a\ntemporary view for the Dataset."}]},{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"The following operation registers a\n"},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"characters"}]},{"type":"text","position":{"start":{"line":3}},"value":" table and then queries it to find all characters that\nare 100 or older:"}]}],"fileid":"includes/scala-java-sql-register-table.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/includes/scala-java-sql-register-table.rst"}]},{"type":"code","position":{"start":{"line":2}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"val characters = spark.read.format(\"mongodb\").as[Character]\ncharacters.createOrReplaceTempView(\"characters\")\n\nval centenarians = spark.sql(\"SELECT name, age FROM characters WHERE age >= 100\")\ncentenarians.show()","linenos":false}],"fileid":"scala/sql.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/scala/sql.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":150}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}}]},{"type":"section","position":{"start":{"line":169}},"children":[{"type":"heading","position":{"start":{"line":169}},"children":[{"type":"text","position":{"start":{"line":169}},"value":"API Documentation"}],"id":"api-documentation"},{"type":"paragraph","position":{"start":{"line":171}},"children":[{"type":"text","position":{"start":{"line":171}},"value":"To learn more about the types used in these examples, see the following Apache Spark\nAPI documentation:"}]},{"type":"directive","position":{"start":{"line":174}},"children":[{"type":"directive","position":{"start":{"line":176}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Dataset<T>"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/Dataset.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":1}},"children":[{"type":"reference","position":{"start":{"line":1}},"children":[{"type":"text","position":{"start":{"line":1}},"value":"DataFrameReader"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/DataFrameReader.html"}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":174}},"value":"Java (Sync)"}],"options":{"tabid":"java-sync"}},{"type":"directive","position":{"start":{"line":182}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrame"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.sql/dataframe.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":1}},"children":[{"type":"reference","position":{"start":{"line":1}},"children":[{"type":"text","position":{"start":{"line":1}},"value":"DataFrameReader"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.sql/api/pyspark.sql.DataFrameReader.html"}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":174}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":188}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Dataset[T]"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/Dataset.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":1}},"children":[{"type":"reference","position":{"start":{"line":1}},"children":[{"type":"text","position":{"start":{"line":1}},"value":"DataFrameReader"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/DataFrameReader.html"}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":174}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}}]}]}],"fileid":"batch-mode/batch-read.txt","options":{"headings":[{"depth":2,"id":"overview","title":[{"type":"text","position":{"start":{"line":18}},"value":"Overview"}],"selector_ids":{}},{"depth":2,"id":"schema-inference","title":[{"type":"text","position":{"start":{"line":39}},"value":"Schema Inference"}],"selector_ids":{}},{"depth":2,"id":"filters","title":[{"type":"text","position":{"start":{"line":131}},"value":"Filters"}],"selector_ids":{}},{"depth":2,"id":"sql-queries","title":[{"type":"text","position":{"start":{"line":148}},"value":"SQL Queries"}],"selector_ids":{}},{"depth":2,"id":"api-documentation","title":[{"type":"text","position":{"start":{"line":169}},"value":"API Documentation"}],"selector_ids":{}}]}},"build_id":"674f335303fff01a16b0b68f","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"batch-mode/batch-read.txt","static_assets":[],"updated_at":"2024-12-03T16:37:46.994Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d1c","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/batch-mode/batch-read-config","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Batch Read Configuration Options"}],"ids":["spark-batch-read-conf"]}],"domain":"std","name":"label","html_id":"std-label-spark-batch-read-conf"},{"type":"section","position":{"start":{"line":4}},"children":[{"type":"heading","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Batch Read Configuration Options"}],"id":"batch-read-configuration-options"},{"type":"directive","position":{"start":{"line":6}},"children":[],"domain":"","name":"contents","argument":[{"type":"text","position":{"start":{"line":6}},"value":"On this page"}],"options":{"local":true,"backlinks":"none","depth":1,"class":"singlecol"}},{"type":"directive","position":{"start":{"line":12}},"children":[],"domain":"mongodb","name":"facet","argument":[],"options":{"name":"genre","values":"reference"}},{"type":"directive","position":{"start":{"line":16}},"children":[],"domain":"","name":"meta","argument":[],"options":{"keywords":"partitioner, customize, settings"}},{"type":"target","position":{"start":{"line":19}},"children":[{"type":"target_identifier","position":{"start":{"line":19}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"Overview"}],"ids":["spark-batch-input-conf"]}],"domain":"std","name":"label","html_id":"std-label-spark-batch-input-conf"},{"type":"section","position":{"start":{"line":22}},"children":[{"type":"heading","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"Overview"}],"id":"overview"},{"type":"paragraph","position":{"start":{"line":24}},"children":[{"type":"text","position":{"start":{"line":24}},"value":"You can configure the following properties when reading data from MongoDB in batch mode."}]},{"type":"directive","position":{"start":{"line":26}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"If you use "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":2}},"value":" to set the connector's read configurations,\nprefix "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"spark.mongodb.read."}]},{"type":"text","position":{"start":{"line":2}},"value":" to each property."}]}],"domain":"","name":"note","argument":[]}],"fileid":"includes/conf-read-prefix.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":26}},"value":"/includes/conf-read-prefix.rst"}]},{"type":"directive","position":{"start":{"line":28}},"children":[{"type":"list","position":{"start":{"line":32}},"children":[{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":32}},"children":[{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"paragraph","position":{"start":{"line":32}},"children":[{"type":"text","position":{"start":{"line":32}},"value":"Property name"}]}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"paragraph","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":35}},"children":[{"type":"listItem","position":{"start":{"line":35}},"children":[{"type":"paragraph","position":{"start":{"line":35}},"children":[{"type":"literal","position":{"start":{"line":35}},"children":[{"type":"text","position":{"start":{"line":35}},"value":"connection.uri"}]}]}]},{"type":"listItem","position":{"start":{"line":35}},"children":[{"type":"line_block","position":{"start":{"line":35}},"children":[{"type":"line","position":{"start":{"line":35}},"children":[{"type":"strong","position":{"start":{"line":35}},"children":[{"type":"text","position":{"start":{"line":35}},"value":"Required."}]}]},{"type":"line","position":{"start":{"line":35}},"children":[{"type":"text","position":{"start":{"line":35}},"value":"The connection string configuration key."}]},{"type":"line","position":{"start":{"line":35}},"children":[]},{"type":"line","position":{"start":{"line":35}},"children":[{"type":"strong","position":{"start":{"line":35}},"children":[{"type":"text","position":{"start":{"line":35}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":35}},"value":" "},{"type":"literal","position":{"start":{"line":35}},"children":[{"type":"text","position":{"start":{"line":35}},"value":"mongodb://localhost:27017/"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":41}},"children":[{"type":"listItem","position":{"start":{"line":41}},"children":[{"type":"paragraph","position":{"start":{"line":41}},"children":[{"type":"literal","position":{"start":{"line":41}},"children":[{"type":"text","position":{"start":{"line":41}},"value":"database"}]}]}]},{"type":"listItem","position":{"start":{"line":41}},"children":[{"type":"line_block","position":{"start":{"line":41}},"children":[{"type":"line","position":{"start":{"line":41}},"children":[{"type":"strong","position":{"start":{"line":41}},"children":[{"type":"text","position":{"start":{"line":41}},"value":"Required."}]}]},{"type":"line","position":{"start":{"line":41}},"children":[{"type":"text","position":{"start":{"line":41}},"value":"The database name configuration."}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":45}},"children":[{"type":"listItem","position":{"start":{"line":45}},"children":[{"type":"paragraph","position":{"start":{"line":45}},"children":[{"type":"literal","position":{"start":{"line":45}},"children":[{"type":"text","position":{"start":{"line":45}},"value":"collection"}]}]}]},{"type":"listItem","position":{"start":{"line":45}},"children":[{"type":"line_block","position":{"start":{"line":45}},"children":[{"type":"line","position":{"start":{"line":45}},"children":[{"type":"strong","position":{"start":{"line":45}},"children":[{"type":"text","position":{"start":{"line":45}},"value":"Required."}]}]},{"type":"line","position":{"start":{"line":45}},"children":[{"type":"text","position":{"start":{"line":45}},"value":"The collection name configuration."}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":49}},"children":[{"type":"listItem","position":{"start":{"line":49}},"children":[{"type":"paragraph","position":{"start":{"line":49}},"children":[{"type":"literal","position":{"start":{"line":49}},"children":[{"type":"text","position":{"start":{"line":49}},"value":"comment"}]}]}]},{"type":"listItem","position":{"start":{"line":49}},"children":[{"type":"line_block","position":{"start":{"line":49}},"children":[{"type":"line","position":{"start":{"line":49}},"children":[{"type":"text","position":{"start":{"line":49}},"value":"The comment to append to the read operation. Comments appear in the\n"},{"type":"reference","position":{"start":{"line":49}},"children":[{"type":"text","position":{"start":{"line":49}},"value":"output of the Database Profiler."}],"refuri":"https://www.mongodb.com/docs/manual/reference/database-profiler/"}]},{"type":"line","position":{"start":{"line":49}},"children":[]},{"type":"line","position":{"start":{"line":49}},"children":[{"type":"strong","position":{"start":{"line":49}},"children":[{"type":"text","position":{"start":{"line":49}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":49}},"value":" None"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":55}},"children":[{"type":"listItem","position":{"start":{"line":55}},"children":[{"type":"paragraph","position":{"start":{"line":55}},"children":[{"type":"literal","position":{"start":{"line":55}},"children":[{"type":"text","position":{"start":{"line":55}},"value":"mode"}]}]}]},{"type":"listItem","position":{"start":{"line":55}},"children":[{"type":"line_block","position":{"start":{"line":55}},"children":[{"type":"line","position":{"start":{"line":55}},"children":[{"type":"text","position":{"start":{"line":55}},"value":"The parsing strategy to use when handling documents that don't match the\nexpected schema. This option accepts the following values:"}]}]},{"type":"list","position":{"start":{"line":59}},"children":[{"type":"listItem","position":{"start":{"line":59}},"children":[{"type":"paragraph","position":{"start":{"line":59}},"children":[{"type":"literal","position":{"start":{"line":59}},"children":[{"type":"text","position":{"start":{"line":59}},"value":"ReadConfig.ParseMode.FAILFAST"}]},{"type":"text","position":{"start":{"line":59}},"value":": Throws an exception when parsing a document that\ndoesn't match the schema."}]}]},{"type":"listItem","position":{"start":{"line":59}},"children":[{"type":"paragraph","position":{"start":{"line":61}},"children":[{"type":"literal","position":{"start":{"line":61}},"children":[{"type":"text","position":{"start":{"line":61}},"value":"ReadConfig.ParseMode.PERMISSIVE"}]},{"type":"text","position":{"start":{"line":61}},"value":": Sets fields to "},{"type":"literal","position":{"start":{"line":61}},"children":[{"type":"text","position":{"start":{"line":61}},"value":"null"}]},{"type":"text","position":{"start":{"line":61}},"value":" when data types don't match\nthe schema. To store each invalid document as an extended JSON string,\ncombine this value with the "},{"type":"literal","position":{"start":{"line":61}},"children":[{"type":"text","position":{"start":{"line":61}},"value":"columnNameOfCorruptRecord"}]},{"type":"text","position":{"start":{"line":61}},"value":" option."}]}]},{"type":"listItem","position":{"start":{"line":59}},"children":[{"type":"paragraph","position":{"start":{"line":64}},"children":[{"type":"literal","position":{"start":{"line":64}},"children":[{"type":"text","position":{"start":{"line":64}},"value":"ReadConfig.ParseMode.DROPMALFORMED"}]},{"type":"text","position":{"start":{"line":64}},"value":": Ignores any document that doesn't match\nthe schema."}]}]}],"enumtype":"unordered"},{"type":"line_block","position":{"start":{"line":55}},"children":[{"type":"line","position":{"start":{"line":55}},"children":[]},{"type":"line","position":{"start":{"line":55}},"children":[{"type":"strong","position":{"start":{"line":55}},"children":[{"type":"text","position":{"start":{"line":55}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":55}},"value":" "},{"type":"literal","position":{"start":{"line":55}},"children":[{"type":"text","position":{"start":{"line":55}},"value":"ReadConfig.ParseMode.FAILFAST"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":70}},"children":[{"type":"listItem","position":{"start":{"line":70}},"children":[{"type":"paragraph","position":{"start":{"line":70}},"children":[{"type":"literal","position":{"start":{"line":70}},"children":[{"type":"text","position":{"start":{"line":70}},"value":"columnNameOfCorruptRecord"}]}]}]},{"type":"listItem","position":{"start":{"line":70}},"children":[{"type":"line_block","position":{"start":{"line":70}},"children":[{"type":"line","position":{"start":{"line":70}},"children":[{"type":"text","position":{"start":{"line":70}},"value":"If you set the "},{"type":"literal","position":{"start":{"line":70}},"children":[{"type":"text","position":{"start":{"line":70}},"value":"mode"}]},{"type":"text","position":{"start":{"line":70}},"value":" option to "},{"type":"literal","position":{"start":{"line":70}},"children":[{"type":"text","position":{"start":{"line":70}},"value":"ReadConfig.ParseMode.PERMISSIVE"}]},{"type":"text","position":{"start":{"line":70}},"value":",\nthis option specifies the name of the new column that stores the invalid\ndocument as extended JSON. If you're using an explicit schema, it must\ninclude the name of the new column. If you're\nusing an inferred schema, the Spark Connector adds the new column to the\nend of the schema."}]},{"type":"line","position":{"start":{"line":70}},"children":[]},{"type":"line","position":{"start":{"line":70}},"children":[{"type":"strong","position":{"start":{"line":70}},"children":[{"type":"text","position":{"start":{"line":70}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":70}},"value":" None"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":80}},"children":[{"type":"listItem","position":{"start":{"line":80}},"children":[{"type":"paragraph","position":{"start":{"line":80}},"children":[{"type":"literal","position":{"start":{"line":80}},"children":[{"type":"text","position":{"start":{"line":80}},"value":"mongoClientFactory"}]}]}]},{"type":"listItem","position":{"start":{"line":80}},"children":[{"type":"line_block","position":{"start":{"line":80}},"children":[{"type":"line","position":{"start":{"line":80}},"children":[{"type":"text","position":{"start":{"line":80}},"value":"MongoClientFactory configuration key."}]},{"type":"line","position":{"start":{"line":80}},"children":[{"type":"text","position":{"start":{"line":80}},"value":"You can specify a custom implementation which must implement the\n"},{"type":"literal","position":{"start":{"line":80}},"children":[{"type":"text","position":{"start":{"line":80}},"value":"com.mongodb.spark.sql.connector.connection.MongoClientFactory"}]},{"type":"text","position":{"start":{"line":80}},"value":"\ninterface."}]},{"type":"line","position":{"start":{"line":80}},"children":[]},{"type":"line","position":{"start":{"line":80}},"children":[{"type":"strong","position":{"start":{"line":80}},"children":[{"type":"text","position":{"start":{"line":80}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":80}},"value":" "},{"type":"literal","position":{"start":{"line":80}},"children":[{"type":"text","position":{"start":{"line":80}},"value":"com.mongodb.spark.sql.connector.connection.DefaultMongoClientFactory"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":88}},"children":[{"type":"listItem","position":{"start":{"line":88}},"children":[{"type":"paragraph","position":{"start":{"line":88}},"children":[{"type":"literal","position":{"start":{"line":88}},"children":[{"type":"text","position":{"start":{"line":88}},"value":"partitioner"}]}]}]},{"type":"listItem","position":{"start":{"line":88}},"children":[{"type":"line_block","position":{"start":{"line":88}},"children":[{"type":"line","position":{"start":{"line":88}},"children":[{"type":"text","position":{"start":{"line":88}},"value":"The partitioner full class name."}]}]},{"type":"line_block","position":{"start":{"line":88}},"children":[{"type":"line","position":{"start":{"line":88}},"children":[{"type":"text","position":{"start":{"line":88}},"value":"You can specify a custom implementation that must implement the\n"},{"type":"literal","position":{"start":{"line":88}},"children":[{"type":"text","position":{"start":{"line":88}},"value":"com.mongodb.spark.sql.connector.read.partitioner.Partitioner"}]},{"type":"text","position":{"start":{"line":88}},"value":"\n interface."}]},{"type":"line","position":{"start":{"line":88}},"children":[{"type":"text","position":{"start":{"line":88}},"value":"See the\n"},{"type":"ref_role","position":{"start":{"line":88}},"children":[{"type":"text","position":{"start":{"line":88}},"value":"Partitioner Configuration"}],"domain":"std","name":"label","target":"partitioner-conf","flag":"","fileid":["batch-mode/batch-read-config","std-label-partitioner-conf"]},{"type":"text","position":{"start":{"line":88}},"value":" section for more\ninformation about partitioners."}]},{"type":"line","position":{"start":{"line":88}},"children":[]},{"type":"line","position":{"start":{"line":88}},"children":[{"type":"strong","position":{"start":{"line":88}},"children":[{"type":"text","position":{"start":{"line":88}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":88}},"value":" "},{"type":"literal","position":{"start":{"line":88}},"children":[{"type":"text","position":{"start":{"line":88}},"value":"com.mongodb.spark.sql.connector.read.partitioner.SamplePartitioner"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":100}},"children":[{"type":"listItem","position":{"start":{"line":100}},"children":[{"type":"paragraph","position":{"start":{"line":100}},"children":[{"type":"literal","position":{"start":{"line":100}},"children":[{"type":"text","position":{"start":{"line":100}},"value":"partitioner.options."}]}]}]},{"type":"listItem","position":{"start":{"line":100}},"children":[{"type":"line_block","position":{"start":{"line":100}},"children":[{"type":"line","position":{"start":{"line":100}},"children":[{"type":"text","position":{"start":{"line":100}},"value":"Partitioner configuration prefix."}]},{"type":"line","position":{"start":{"line":100}},"children":[{"type":"text","position":{"start":{"line":100}},"value":"See the\n"},{"type":"ref_role","position":{"start":{"line":100}},"children":[{"type":"text","position":{"start":{"line":100}},"value":"Partitioner Configuration"}],"domain":"std","name":"label","target":"partitioner-conf","flag":"","fileid":["batch-mode/batch-read-config","std-label-partitioner-conf"]},{"type":"text","position":{"start":{"line":100}},"value":" section for more\ninformation about partitioners."}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":106}},"children":[{"type":"listItem","position":{"start":{"line":106}},"children":[{"type":"paragraph","position":{"start":{"line":106}},"children":[{"type":"literal","position":{"start":{"line":106}},"children":[{"type":"text","position":{"start":{"line":106}},"value":"sampleSize"}]}]}]},{"type":"listItem","position":{"start":{"line":106}},"children":[{"type":"line_block","position":{"start":{"line":106}},"children":[{"type":"line","position":{"start":{"line":106}},"children":[{"type":"text","position":{"start":{"line":106}},"value":"The number of documents to sample from the collection when inferring"}]},{"type":"line","position":{"start":{"line":106}},"children":[{"type":"text","position":{"start":{"line":106}},"value":"the schema."}]},{"type":"line","position":{"start":{"line":106}},"children":[]},{"type":"line","position":{"start":{"line":106}},"children":[{"type":"strong","position":{"start":{"line":106}},"children":[{"type":"text","position":{"start":{"line":106}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":106}},"value":" "},{"type":"literal","position":{"start":{"line":106}},"children":[{"type":"text","position":{"start":{"line":106}},"value":"1000"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":112}},"children":[{"type":"listItem","position":{"start":{"line":112}},"children":[{"type":"paragraph","position":{"start":{"line":112}},"children":[{"type":"literal","position":{"start":{"line":112}},"children":[{"type":"text","position":{"start":{"line":112}},"value":"sql.inferSchema.mapTypes.enabled"}]}]}]},{"type":"listItem","position":{"start":{"line":112}},"children":[{"type":"line_block","position":{"start":{"line":112}},"children":[{"type":"line","position":{"start":{"line":112}},"children":[{"type":"text","position":{"start":{"line":112}},"value":"Whether to enable Map types when inferring the schema."}]},{"type":"line","position":{"start":{"line":112}},"children":[{"type":"text","position":{"start":{"line":112}},"value":"When enabled, large compatible struct types are inferred to a\n"},{"type":"literal","position":{"start":{"line":112}},"children":[{"type":"text","position":{"start":{"line":112}},"value":"MapType"}]},{"type":"text","position":{"start":{"line":112}},"value":" instead."}]},{"type":"line","position":{"start":{"line":112}},"children":[]},{"type":"line","position":{"start":{"line":112}},"children":[{"type":"strong","position":{"start":{"line":112}},"children":[{"type":"text","position":{"start":{"line":112}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":112}},"value":" "},{"type":"literal","position":{"start":{"line":112}},"children":[{"type":"text","position":{"start":{"line":112}},"value":"true"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":119}},"children":[{"type":"listItem","position":{"start":{"line":119}},"children":[{"type":"paragraph","position":{"start":{"line":119}},"children":[{"type":"literal","position":{"start":{"line":119}},"children":[{"type":"text","position":{"start":{"line":119}},"value":"sql.inferSchema.mapTypes.minimum.key.size"}]}]}]},{"type":"listItem","position":{"start":{"line":119}},"children":[{"type":"line_block","position":{"start":{"line":119}},"children":[{"type":"line","position":{"start":{"line":119}},"children":[{"type":"text","position":{"start":{"line":119}},"value":"Minimum size of a "},{"type":"literal","position":{"start":{"line":119}},"children":[{"type":"text","position":{"start":{"line":119}},"value":"StructType"}]},{"type":"text","position":{"start":{"line":119}},"value":" before inferring as a "},{"type":"literal","position":{"start":{"line":119}},"children":[{"type":"text","position":{"start":{"line":119}},"value":"MapType"}]},{"type":"text","position":{"start":{"line":119}},"value":"."}]},{"type":"line","position":{"start":{"line":119}},"children":[]},{"type":"line","position":{"start":{"line":119}},"children":[{"type":"strong","position":{"start":{"line":119}},"children":[{"type":"text","position":{"start":{"line":119}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":119}},"value":" "},{"type":"literal","position":{"start":{"line":119}},"children":[{"type":"text","position":{"start":{"line":119}},"value":"250"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":124}},"children":[{"type":"listItem","position":{"start":{"line":124}},"children":[{"type":"paragraph","position":{"start":{"line":124}},"children":[{"type":"literal","position":{"start":{"line":124}},"children":[{"type":"text","position":{"start":{"line":124}},"value":"aggregation.pipeline"}]}]}]},{"type":"listItem","position":{"start":{"line":124}},"children":[{"type":"line_block","position":{"start":{"line":124}},"children":[{"type":"line","position":{"start":{"line":124}},"children":[{"type":"text","position":{"start":{"line":124}},"value":"Specifies a custom aggregation pipeline to apply to the collection\nbefore sending data to Spark."}]},{"type":"line","position":{"start":{"line":124}},"children":[{"type":"text","position":{"start":{"line":124}},"value":"The value must be either an extended JSON single document or list\nof documents."}]},{"type":"line","position":{"start":{"line":124}},"children":[{"type":"text","position":{"start":{"line":124}},"value":"A single document resembles the following:"}]}]},{"type":"code","position":{"start":{"line":131}},"lang":"json","copyable":true,"emphasize_lines":[],"value":"{\"$match\": {\"closed\": false}}","linenos":false},{"type":"line_block","position":{"start":{"line":124}},"children":[{"type":"line","position":{"start":{"line":124}},"children":[{"type":"text","position":{"start":{"line":124}},"value":"A list of documents resembles the following:"}]}]},{"type":"code","position":{"start":{"line":137}},"lang":"json","copyable":true,"emphasize_lines":[],"value":"[{\"$match\": {\"closed\": false}}, {\"$project\": {\"status\": 1, \"name\": 1, \"description\": 1}}]","linenos":false},{"type":"paragraph","position":{"start":{"line":141}},"children":[{"type":"role","position":{"start":{"line":141}},"children":[{"type":"text","position":{"start":{"line":141}},"value":"IMPORTANT:"}],"domain":"","name":"gold","target":"","flag":""},{"type":"text","position":{"start":{"line":141}},"value":" Custom aggregation pipelines must be\ncompatible with the partitioner strategy. For example,\naggregation stages such as\n"},{"type":"literal","position":{"start":{"line":141}},"children":[{"type":"text","position":{"start":{"line":141}},"value":"$group"}]},{"type":"text","position":{"start":{"line":141}},"value":" do not work with any partitioner that creates more\nthan one partition."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":147}},"children":[{"type":"listItem","position":{"start":{"line":147}},"children":[{"type":"paragraph","position":{"start":{"line":147}},"children":[{"type":"literal","position":{"start":{"line":147}},"children":[{"type":"text","position":{"start":{"line":147}},"value":"aggregation.allowDiskUse"}]}]}]},{"type":"listItem","position":{"start":{"line":147}},"children":[{"type":"line_block","position":{"start":{"line":147}},"children":[{"type":"line","position":{"start":{"line":147}},"children":[{"type":"text","position":{"start":{"line":147}},"value":"Specifies whether to allow storage to disk when running the\naggregation."}]},{"type":"line","position":{"start":{"line":147}},"children":[]},{"type":"line","position":{"start":{"line":147}},"children":[{"type":"strong","position":{"start":{"line":147}},"children":[{"type":"text","position":{"start":{"line":147}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":147}},"value":" "},{"type":"literal","position":{"start":{"line":147}},"children":[{"type":"text","position":{"start":{"line":147}},"value":"true"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":153}},"children":[{"type":"listItem","position":{"start":{"line":153}},"children":[{"type":"paragraph","position":{"start":{"line":153}},"children":[{"type":"literal","position":{"start":{"line":153}},"children":[{"type":"text","position":{"start":{"line":153}},"value":"outputExtendedJson"}]}]}]},{"type":"listItem","position":{"start":{"line":153}},"children":[{"type":"line_block","position":{"start":{"line":153}},"children":[{"type":"line","position":{"start":{"line":153}},"children":[{"type":"text","position":{"start":{"line":153}},"value":"When "},{"type":"literal","position":{"start":{"line":153}},"children":[{"type":"text","position":{"start":{"line":153}},"value":"true"}]},{"type":"text","position":{"start":{"line":153}},"value":", the connector converts BSON types not supported by Spark into\nextended JSON strings.\nWhen "},{"type":"literal","position":{"start":{"line":153}},"children":[{"type":"text","position":{"start":{"line":153}},"value":"false"}]},{"type":"text","position":{"start":{"line":153}},"value":", the connector uses the original relaxed JSON format for\nunsupported types."}]},{"type":"line","position":{"start":{"line":153}},"children":[]},{"type":"line","position":{"start":{"line":153}},"children":[{"type":"strong","position":{"start":{"line":153}},"children":[{"type":"text","position":{"start":{"line":153}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":153}},"value":" "},{"type":"literal","position":{"start":{"line":153}},"children":[{"type":"text","position":{"start":{"line":153}},"value":"false"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":32}},"children":[{"type":"list","position":{"start":{"line":161}},"children":[{"type":"listItem","position":{"start":{"line":161}},"children":[{"type":"paragraph","position":{"start":{"line":161}},"children":[{"type":"literal","position":{"start":{"line":161}},"children":[{"type":"text","position":{"start":{"line":161}},"value":"schemaHint"}]}]}]},{"type":"listItem","position":{"start":{"line":161}},"children":[{"type":"line_block","position":{"start":{"line":161}},"children":[{"type":"line","position":{"start":{"line":161}},"children":[{"type":"text","position":{"start":{"line":161}},"value":"Specifies a partial schema of known field types to use when inferring\nthe schema for the collection. To learn more about the "},{"type":"literal","position":{"start":{"line":161}},"children":[{"type":"text","position":{"start":{"line":161}},"value":"schemaHint"}]},{"type":"text","position":{"start":{"line":161}},"value":"\noption, see the "},{"type":"ref_role","position":{"start":{"line":161}},"children":[{"type":"text","position":{"start":{"line":161}},"value":"Specify Known Fields with Schema Hints"}],"domain":"std","name":"label","target":"spark-schema-hint","flag":"","fileid":["batch-mode/batch-read","std-label-spark-schema-hint"]},{"type":"text","position":{"start":{"line":161}},"value":" section."}]},{"type":"line","position":{"start":{"line":161}},"children":[]},{"type":"line","position":{"start":{"line":161}},"children":[{"type":"strong","position":{"start":{"line":161}},"children":[{"type":"text","position":{"start":{"line":161}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":161}},"value":" None"}]}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"widths":"35 65"}},{"type":"target","position":{"start":{"line":168}},"children":[{"type":"target_identifier","position":{"start":{"line":168}},"children":[{"type":"text","position":{"start":{"line":171}},"value":"Partitioner Configurations"}],"ids":["partitioner-conf"]}],"domain":"std","name":"label","html_id":"std-label-partitioner-conf"}]},{"type":"section","position":{"start":{"line":171}},"children":[{"type":"heading","position":{"start":{"line":171}},"children":[{"type":"text","position":{"start":{"line":171}},"value":"Partitioner Configurations"}],"id":"partitioner-configurations"},{"type":"paragraph","position":{"start":{"line":173}},"children":[{"type":"text","position":{"start":{"line":173}},"value":"Partitioners change the read behavior of batch reads that use the Spark Connector. By\ndividing the data into partitions, you can run transformations in parallel."}]},{"type":"paragraph","position":{"start":{"line":176}},"children":[{"type":"text","position":{"start":{"line":176}},"value":"This section contains configuration information for the following\npartitioner:"}]},{"type":"list","position":{"start":{"line":179}},"children":[{"type":"listItem","position":{"start":{"line":179}},"children":[{"type":"paragraph","position":{"start":{"line":179}},"children":[{"type":"ref_role","position":{"start":{"line":179}},"children":[{"type":"text","position":{"start":{"line":179}},"value":"SamplePartitioner"}],"domain":"std","name":"label","target":"conf-samplepartitioner","flag":"","fileid":["batch-mode/batch-read-config","std-label-conf-samplepartitioner"]}]}]},{"type":"listItem","position":{"start":{"line":179}},"children":[{"type":"paragraph","position":{"start":{"line":180}},"children":[{"type":"ref_role","position":{"start":{"line":180}},"children":[{"type":"text","position":{"start":{"line":180}},"value":"ShardedPartitioner"}],"domain":"std","name":"label","target":"conf-shardedpartitioner","flag":"","fileid":["batch-mode/batch-read-config","std-label-conf-shardedpartitioner"]}]}]},{"type":"listItem","position":{"start":{"line":179}},"children":[{"type":"paragraph","position":{"start":{"line":181}},"children":[{"type":"ref_role","position":{"start":{"line":181}},"children":[{"type":"text","position":{"start":{"line":181}},"value":"PaginateBySizePartitioner"}],"domain":"std","name":"label","target":"conf-paginatebysizepartitioner","flag":"","fileid":["batch-mode/batch-read-config","std-label-conf-paginatebysizepartitioner"]}]}]},{"type":"listItem","position":{"start":{"line":179}},"children":[{"type":"paragraph","position":{"start":{"line":182}},"children":[{"type":"ref_role","position":{"start":{"line":182}},"children":[{"type":"text","position":{"start":{"line":182}},"value":"PaginateIntoPartitionsPartitioner"}],"domain":"std","name":"label","target":"conf-paginateintopartitionspartitioner","flag":"","fileid":["batch-mode/batch-read-config","std-label-conf-paginateintopartitionspartitioner"]}]}]},{"type":"listItem","position":{"start":{"line":179}},"children":[{"type":"paragraph","position":{"start":{"line":183}},"children":[{"type":"ref_role","position":{"start":{"line":183}},"children":[{"type":"text","position":{"start":{"line":183}},"value":"SinglePartitionPartitioner"}],"domain":"std","name":"label","target":"conf-singlepartitionpartitioner","flag":"","fileid":["batch-mode/batch-read-config","std-label-conf-singlepartitionpartitioner"]}]}]},{"type":"listItem","position":{"start":{"line":179}},"children":[{"type":"paragraph","position":{"start":{"line":184}},"children":[{"type":"ref_role","position":{"start":{"line":184}},"children":[{"type":"text","position":{"start":{"line":184}},"value":"AutoBucketPartitioner"}],"domain":"std","name":"label","target":"conf-autobucketpartitioner","flag":"","fileid":["batch-mode/batch-read-config","std-label-conf-autobucketpartitioner"]}]}]}],"enumtype":"unordered"},{"type":"directive","position":{"start":{"line":186}},"children":[{"type":"paragraph","position":{"start":{"line":188}},"children":[{"type":"text","position":{"start":{"line":188}},"value":"Because the data-stream-processing engine produces a single data stream,\npartitioners do not affect streaming reads."}]}],"domain":"","name":"note","argument":[{"type":"text","position":{"start":{"line":186}},"value":"Batch Reads Only"}]},{"type":"target","position":{"start":{"line":191}},"children":[{"type":"target_identifier","position":{"start":{"line":191}},"children":[{"type":"literal","position":{"start":{"line":195}},"children":[{"type":"text","position":{"start":{"line":195}},"value":"SamplePartitioner"}]},{"type":"text","position":{"start":{"line":195}},"value":" Configuration"}],"ids":["conf-mongosamplepartitioner"]}],"domain":"std","name":"label","html_id":"std-label-conf-mongosamplepartitioner"},{"type":"target","position":{"start":{"line":192}},"children":[{"type":"target_identifier","position":{"start":{"line":192}},"children":[{"type":"literal","position":{"start":{"line":195}},"children":[{"type":"text","position":{"start":{"line":195}},"value":"SamplePartitioner"}]},{"type":"text","position":{"start":{"line":195}},"value":" Configuration"}],"ids":["conf-samplepartitioner"]}],"domain":"std","name":"label","html_id":"std-label-conf-samplepartitioner"},{"type":"section","position":{"start":{"line":195}},"children":[{"type":"heading","position":{"start":{"line":195}},"children":[{"type":"literal","position":{"start":{"line":195}},"children":[{"type":"text","position":{"start":{"line":195}},"value":"SamplePartitioner"}]},{"type":"text","position":{"start":{"line":195}},"value":" Configuration"}],"id":"samplepartitioner-configuration"},{"type":"paragraph","position":{"start":{"line":197}},"children":[{"type":"literal","position":{"start":{"line":197}},"children":[{"type":"text","position":{"start":{"line":197}},"value":"SamplePartitioner"}]},{"type":"text","position":{"start":{"line":197}},"value":" is the default partitioner configuration. This configuration\nlets you specify a partition field, partition size, and number of samples per partition."}]},{"type":"paragraph","position":{"start":{"line":200}},"children":[{"type":"text","position":{"start":{"line":200}},"value":"To use this configuration, set the "},{"type":"literal","position":{"start":{"line":200}},"children":[{"type":"text","position":{"start":{"line":200}},"value":"partitioner"}]},{"type":"text","position":{"start":{"line":200}},"value":" configuration option to\n"},{"type":"literal","position":{"start":{"line":200}},"children":[{"type":"text","position":{"start":{"line":200}},"value":"com.mongodb.spark.sql.connector.read.partitioner.SamplePartitioner"}]},{"type":"text","position":{"start":{"line":200}},"value":"."}]},{"type":"directive","position":{"start":{"line":203}},"children":[{"type":"list","position":{"start":{"line":207}},"children":[{"type":"listItem","position":{"start":{"line":207}},"children":[{"type":"list","position":{"start":{"line":207}},"children":[{"type":"listItem","position":{"start":{"line":207}},"children":[{"type":"paragraph","position":{"start":{"line":207}},"children":[{"type":"text","position":{"start":{"line":207}},"value":"Property name"}]}]},{"type":"listItem","position":{"start":{"line":207}},"children":[{"type":"paragraph","position":{"start":{"line":208}},"children":[{"type":"text","position":{"start":{"line":208}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":207}},"children":[{"type":"list","position":{"start":{"line":210}},"children":[{"type":"listItem","position":{"start":{"line":210}},"children":[{"type":"paragraph","position":{"start":{"line":210}},"children":[{"type":"literal","position":{"start":{"line":210}},"children":[{"type":"text","position":{"start":{"line":210}},"value":"partitioner.options.partition.field"}]}]}]},{"type":"listItem","position":{"start":{"line":210}},"children":[{"type":"paragraph","position":{"start":{"line":211}},"children":[{"type":"text","position":{"start":{"line":211}},"value":"The field to use for partitioning, which must be a unique field."}]},{"type":"paragraph","position":{"start":{"line":213}},"children":[{"type":"strong","position":{"start":{"line":213}},"children":[{"type":"text","position":{"start":{"line":213}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":213}},"value":" "},{"type":"literal","position":{"start":{"line":213}},"children":[{"type":"text","position":{"start":{"line":213}},"value":"_id"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":207}},"children":[{"type":"list","position":{"start":{"line":215}},"children":[{"type":"listItem","position":{"start":{"line":215}},"children":[{"type":"paragraph","position":{"start":{"line":215}},"children":[{"type":"literal","position":{"start":{"line":215}},"children":[{"type":"text","position":{"start":{"line":215}},"value":"partitioner.options.partition.size"}]}]}]},{"type":"listItem","position":{"start":{"line":215}},"children":[{"type":"paragraph","position":{"start":{"line":216}},"children":[{"type":"text","position":{"start":{"line":216}},"value":"The size (in MB) for each partition. Smaller partition sizes\ncreate more partitions containing fewer documents."}]},{"type":"paragraph","position":{"start":{"line":219}},"children":[{"type":"strong","position":{"start":{"line":219}},"children":[{"type":"text","position":{"start":{"line":219}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":219}},"value":" "},{"type":"literal","position":{"start":{"line":219}},"children":[{"type":"text","position":{"start":{"line":219}},"value":"64"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":207}},"children":[{"type":"list","position":{"start":{"line":221}},"children":[{"type":"listItem","position":{"start":{"line":221}},"children":[{"type":"paragraph","position":{"start":{"line":221}},"children":[{"type":"literal","position":{"start":{"line":221}},"children":[{"type":"text","position":{"start":{"line":221}},"value":"partitioner.options.samples.per.partition"}]}]}]},{"type":"listItem","position":{"start":{"line":221}},"children":[{"type":"paragraph","position":{"start":{"line":222}},"children":[{"type":"text","position":{"start":{"line":222}},"value":"The number of samples to take per partition. The total number of\nsamples taken is:"}]},{"type":"code","position":{"start":{"line":225}},"lang":"none","copyable":true,"emphasize_lines":[],"value":"samples per partition * ( count / number of documents per partition)","linenos":false},{"type":"paragraph","position":{"start":{"line":229}},"children":[{"type":"strong","position":{"start":{"line":229}},"children":[{"type":"text","position":{"start":{"line":229}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":229}},"value":" "},{"type":"literal","position":{"start":{"line":229}},"children":[{"type":"text","position":{"start":{"line":229}},"value":"10"}]}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"widths":"35 65"}},{"type":"directive","position":{"start":{"line":231}},"children":[{"type":"paragraph","position":{"start":{"line":233}},"children":[{"type":"text","position":{"start":{"line":233}},"value":"For a collection with 640 documents with an average document\nsize of 0.5 MB, the default "},{"type":"literal","position":{"start":{"line":233}},"children":[{"type":"text","position":{"start":{"line":233}},"value":"SamplePartitioner"}]},{"type":"text","position":{"start":{"line":233}},"value":" configuration creates\n5 partitions with 128 documents per partition."}]},{"type":"paragraph","position":{"start":{"line":237}},"children":[{"type":"text","position":{"start":{"line":237}},"value":"The Spark Connector samples 50 documents (the default 10\nper intended partition) and defines 5 partitions by selecting\npartition field ranges from the sampled documents."}]}],"domain":"","name":"example","argument":[]},{"type":"target","position":{"start":{"line":241}},"children":[{"type":"target_identifier","position":{"start":{"line":241}},"children":[{"type":"literal","position":{"start":{"line":245}},"children":[{"type":"text","position":{"start":{"line":245}},"value":"ShardedPartitioner"}]},{"type":"text","position":{"start":{"line":245}},"value":" Configuration"}],"ids":["conf-mongoshardedpartitioner"]}],"domain":"std","name":"label","html_id":"std-label-conf-mongoshardedpartitioner"},{"type":"target","position":{"start":{"line":242}},"children":[{"type":"target_identifier","position":{"start":{"line":242}},"children":[{"type":"literal","position":{"start":{"line":245}},"children":[{"type":"text","position":{"start":{"line":245}},"value":"ShardedPartitioner"}]},{"type":"text","position":{"start":{"line":245}},"value":" Configuration"}],"ids":["conf-shardedpartitioner"]}],"domain":"std","name":"label","html_id":"std-label-conf-shardedpartitioner"}]},{"type":"section","position":{"start":{"line":245}},"children":[{"type":"heading","position":{"start":{"line":245}},"children":[{"type":"literal","position":{"start":{"line":245}},"children":[{"type":"text","position":{"start":{"line":245}},"value":"ShardedPartitioner"}]},{"type":"text","position":{"start":{"line":245}},"value":" Configuration"}],"id":"shardedpartitioner-configuration"},{"type":"paragraph","position":{"start":{"line":247}},"children":[{"type":"text","position":{"start":{"line":247}},"value":"The "},{"type":"literal","position":{"start":{"line":247}},"children":[{"type":"text","position":{"start":{"line":247}},"value":"ShardedPartitioner"}]},{"type":"text","position":{"start":{"line":247}},"value":" configuration automatically partitions the data\nbased on your shard configuration."}]},{"type":"paragraph","position":{"start":{"line":250}},"children":[{"type":"text","position":{"start":{"line":250}},"value":"To use this configuration, set the "},{"type":"literal","position":{"start":{"line":250}},"children":[{"type":"text","position":{"start":{"line":250}},"value":"partitioner"}]},{"type":"text","position":{"start":{"line":250}},"value":" configuration option to\n"},{"type":"literal","position":{"start":{"line":250}},"children":[{"type":"text","position":{"start":{"line":250}},"value":"com.mongodb.spark.sql.connector.read.partitioner.ShardedPartitioner"}]},{"type":"text","position":{"start":{"line":250}},"value":"."}]},{"type":"directive","position":{"start":{"line":253}},"children":[{"type":"list","position":{"start":{"line":255}},"children":[{"type":"listItem","position":{"start":{"line":255}},"children":[{"type":"paragraph","position":{"start":{"line":255}},"children":[{"type":"text","position":{"start":{"line":255}},"value":"In MongoDB Server v6.0 and later, the sharding operation creates one large initial\nchunk to cover all shard key values, making the sharded partitioner inefficient.\nWe do not recommend using the sharded partitioner when connected to MongoDB v6.0 and later."}]}]},{"type":"listItem","position":{"start":{"line":255}},"children":[{"type":"paragraph","position":{"start":{"line":258}},"children":[{"type":"text","position":{"start":{"line":258}},"value":"The sharded partitioner is not compatible with hashed shard keys."}]}]}],"enumtype":"arabic"}],"domain":"","name":"important","argument":[{"type":"text","position":{"start":{"line":253}},"value":"ShardedPartitioner Restrictions"}]},{"type":"target","position":{"start":{"line":260}},"children":[{"type":"target_identifier","position":{"start":{"line":260}},"children":[{"type":"literal","position":{"start":{"line":264}},"children":[{"type":"text","position":{"start":{"line":264}},"value":"PaginateBySizePartitioner"}]},{"type":"text","position":{"start":{"line":264}},"value":" Configuration"}],"ids":["conf-mongopaginatebysizepartitioner"]}],"domain":"std","name":"label","html_id":"std-label-conf-mongopaginatebysizepartitioner"},{"type":"target","position":{"start":{"line":261}},"children":[{"type":"target_identifier","position":{"start":{"line":261}},"children":[{"type":"literal","position":{"start":{"line":264}},"children":[{"type":"text","position":{"start":{"line":264}},"value":"PaginateBySizePartitioner"}]},{"type":"text","position":{"start":{"line":264}},"value":" Configuration"}],"ids":["conf-paginatebysizepartitioner"]}],"domain":"std","name":"label","html_id":"std-label-conf-paginatebysizepartitioner"}]},{"type":"section","position":{"start":{"line":264}},"children":[{"type":"heading","position":{"start":{"line":264}},"children":[{"type":"literal","position":{"start":{"line":264}},"children":[{"type":"text","position":{"start":{"line":264}},"value":"PaginateBySizePartitioner"}]},{"type":"text","position":{"start":{"line":264}},"value":" Configuration"}],"id":"paginatebysizepartitioner-configuration"},{"type":"paragraph","position":{"start":{"line":266}},"children":[{"type":"text","position":{"start":{"line":266}},"value":"The "},{"type":"literal","position":{"start":{"line":266}},"children":[{"type":"text","position":{"start":{"line":266}},"value":"PaginateBySizePartitioner"}]},{"type":"text","position":{"start":{"line":266}},"value":" configuration paginates the data by using the\naverage document size to split the collection into average-sized chunks."}]},{"type":"paragraph","position":{"start":{"line":269}},"children":[{"type":"text","position":{"start":{"line":269}},"value":"To use this configuration, set the "},{"type":"literal","position":{"start":{"line":269}},"children":[{"type":"text","position":{"start":{"line":269}},"value":"partitioner"}]},{"type":"text","position":{"start":{"line":269}},"value":" configuration option to\n"},{"type":"literal","position":{"start":{"line":269}},"children":[{"type":"text","position":{"start":{"line":269}},"value":"com.mongodb.spark.sql.connector.read.partitioner.PaginateBySizePartitioner"}]},{"type":"text","position":{"start":{"line":269}},"value":"."}]},{"type":"directive","position":{"start":{"line":272}},"children":[{"type":"list","position":{"start":{"line":276}},"children":[{"type":"listItem","position":{"start":{"line":276}},"children":[{"type":"list","position":{"start":{"line":276}},"children":[{"type":"listItem","position":{"start":{"line":276}},"children":[{"type":"paragraph","position":{"start":{"line":276}},"children":[{"type":"text","position":{"start":{"line":276}},"value":"Property name"}]}]},{"type":"listItem","position":{"start":{"line":276}},"children":[{"type":"paragraph","position":{"start":{"line":277}},"children":[{"type":"text","position":{"start":{"line":277}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":276}},"children":[{"type":"list","position":{"start":{"line":279}},"children":[{"type":"listItem","position":{"start":{"line":279}},"children":[{"type":"paragraph","position":{"start":{"line":279}},"children":[{"type":"literal","position":{"start":{"line":279}},"children":[{"type":"text","position":{"start":{"line":279}},"value":"partitioner.options.partition.field"}]}]}]},{"type":"listItem","position":{"start":{"line":279}},"children":[{"type":"paragraph","position":{"start":{"line":280}},"children":[{"type":"text","position":{"start":{"line":280}},"value":"The field to use for partitioning, which must be a unique field."}]},{"type":"paragraph","position":{"start":{"line":282}},"children":[{"type":"strong","position":{"start":{"line":282}},"children":[{"type":"text","position":{"start":{"line":282}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":282}},"value":" "},{"type":"literal","position":{"start":{"line":282}},"children":[{"type":"text","position":{"start":{"line":282}},"value":"_id"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":276}},"children":[{"type":"list","position":{"start":{"line":284}},"children":[{"type":"listItem","position":{"start":{"line":284}},"children":[{"type":"paragraph","position":{"start":{"line":284}},"children":[{"type":"literal","position":{"start":{"line":284}},"children":[{"type":"text","position":{"start":{"line":284}},"value":"partitioner.options.partition.size"}]}]}]},{"type":"listItem","position":{"start":{"line":284}},"children":[{"type":"paragraph","position":{"start":{"line":285}},"children":[{"type":"text","position":{"start":{"line":285}},"value":"The size (in MB) for each partition. Smaller partition sizes"}]},{"type":"paragraph","position":{"start":{"line":287}},"children":[{"type":"text","position":{"start":{"line":287}},"value":"create more partitions containing fewer documents."}]},{"type":"paragraph","position":{"start":{"line":289}},"children":[{"type":"strong","position":{"start":{"line":289}},"children":[{"type":"text","position":{"start":{"line":289}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":289}},"value":" "},{"type":"literal","position":{"start":{"line":289}},"children":[{"type":"text","position":{"start":{"line":289}},"value":"64"}]}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"widths":"35 65"}},{"type":"target","position":{"start":{"line":291}},"children":[{"type":"target_identifier","position":{"start":{"line":291}},"children":[{"type":"literal","position":{"start":{"line":294}},"children":[{"type":"text","position":{"start":{"line":294}},"value":"PaginateIntoPartitionsPartitioner"}]},{"type":"text","position":{"start":{"line":294}},"value":" Configuration"}],"ids":["conf-paginateintopartitionspartitioner"]}],"domain":"std","name":"label","html_id":"std-label-conf-paginateintopartitionspartitioner"}]},{"type":"section","position":{"start":{"line":294}},"children":[{"type":"heading","position":{"start":{"line":294}},"children":[{"type":"literal","position":{"start":{"line":294}},"children":[{"type":"text","position":{"start":{"line":294}},"value":"PaginateIntoPartitionsPartitioner"}]},{"type":"text","position":{"start":{"line":294}},"value":" Configuration"}],"id":"paginateintopartitionspartitioner-configuration"},{"type":"paragraph","position":{"start":{"line":296}},"children":[{"type":"text","position":{"start":{"line":296}},"value":"The "},{"type":"literal","position":{"start":{"line":296}},"children":[{"type":"text","position":{"start":{"line":296}},"value":"PaginateIntoPartitionsPartitioner"}]},{"type":"text","position":{"start":{"line":296}},"value":" configuration paginates the data by dividing\nthe count of documents in the collection by the maximum number of allowable partitions."}]},{"type":"paragraph","position":{"start":{"line":299}},"children":[{"type":"text","position":{"start":{"line":299}},"value":"To use this configuration, set the "},{"type":"literal","position":{"start":{"line":299}},"children":[{"type":"text","position":{"start":{"line":299}},"value":"partitioner"}]},{"type":"text","position":{"start":{"line":299}},"value":" configuration option to\n"},{"type":"literal","position":{"start":{"line":299}},"children":[{"type":"text","position":{"start":{"line":299}},"value":"com.mongodb.spark.sql.connector.read.partitioner.PaginateIntoPartitionsPartitioner"}]},{"type":"text","position":{"start":{"line":299}},"value":"."}]},{"type":"directive","position":{"start":{"line":302}},"children":[{"type":"list","position":{"start":{"line":306}},"children":[{"type":"listItem","position":{"start":{"line":306}},"children":[{"type":"list","position":{"start":{"line":306}},"children":[{"type":"listItem","position":{"start":{"line":306}},"children":[{"type":"paragraph","position":{"start":{"line":306}},"children":[{"type":"text","position":{"start":{"line":306}},"value":"Property name"}]}]},{"type":"listItem","position":{"start":{"line":306}},"children":[{"type":"paragraph","position":{"start":{"line":307}},"children":[{"type":"text","position":{"start":{"line":307}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":306}},"children":[{"type":"list","position":{"start":{"line":309}},"children":[{"type":"listItem","position":{"start":{"line":309}},"children":[{"type":"paragraph","position":{"start":{"line":309}},"children":[{"type":"literal","position":{"start":{"line":309}},"children":[{"type":"text","position":{"start":{"line":309}},"value":"partitioner.options.partition.field"}]}]}]},{"type":"listItem","position":{"start":{"line":309}},"children":[{"type":"paragraph","position":{"start":{"line":310}},"children":[{"type":"text","position":{"start":{"line":310}},"value":"The field to use for partitioning, which must be a unique field."}]},{"type":"paragraph","position":{"start":{"line":312}},"children":[{"type":"strong","position":{"start":{"line":312}},"children":[{"type":"text","position":{"start":{"line":312}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":312}},"value":" "},{"type":"literal","position":{"start":{"line":312}},"children":[{"type":"text","position":{"start":{"line":312}},"value":"_id"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":306}},"children":[{"type":"list","position":{"start":{"line":314}},"children":[{"type":"listItem","position":{"start":{"line":314}},"children":[{"type":"paragraph","position":{"start":{"line":314}},"children":[{"type":"literal","position":{"start":{"line":314}},"children":[{"type":"text","position":{"start":{"line":314}},"value":"partitioner.options.max.number.of.partitions"}]}]}]},{"type":"listItem","position":{"start":{"line":314}},"children":[{"type":"paragraph","position":{"start":{"line":315}},"children":[{"type":"text","position":{"start":{"line":315}},"value":"The number of partitions to create."}]},{"type":"paragraph","position":{"start":{"line":317}},"children":[{"type":"strong","position":{"start":{"line":317}},"children":[{"type":"text","position":{"start":{"line":317}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":317}},"value":" "},{"type":"literal","position":{"start":{"line":317}},"children":[{"type":"text","position":{"start":{"line":317}},"value":"64"}]}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"widths":"35 65"}},{"type":"target","position":{"start":{"line":319}},"children":[{"type":"target_identifier","position":{"start":{"line":319}},"children":[{"type":"literal","position":{"start":{"line":322}},"children":[{"type":"text","position":{"start":{"line":322}},"value":"SinglePartitionPartitioner"}]},{"type":"text","position":{"start":{"line":322}},"value":" Configuration"}],"ids":["conf-singlepartitionpartitioner"]}],"domain":"std","name":"label","html_id":"std-label-conf-singlepartitionpartitioner"}]},{"type":"section","position":{"start":{"line":322}},"children":[{"type":"heading","position":{"start":{"line":322}},"children":[{"type":"literal","position":{"start":{"line":322}},"children":[{"type":"text","position":{"start":{"line":322}},"value":"SinglePartitionPartitioner"}]},{"type":"text","position":{"start":{"line":322}},"value":" Configuration"}],"id":"singlepartitionpartitioner-configuration"},{"type":"paragraph","position":{"start":{"line":324}},"children":[{"type":"text","position":{"start":{"line":324}},"value":"The "},{"type":"literal","position":{"start":{"line":324}},"children":[{"type":"text","position":{"start":{"line":324}},"value":"SinglePartitionPartitioner"}]},{"type":"text","position":{"start":{"line":324}},"value":" configuration creates a single partition."}]},{"type":"paragraph","position":{"start":{"line":326}},"children":[{"type":"text","position":{"start":{"line":326}},"value":"To use this configuration, set the "},{"type":"literal","position":{"start":{"line":326}},"children":[{"type":"text","position":{"start":{"line":326}},"value":"partitioner"}]},{"type":"text","position":{"start":{"line":326}},"value":" configuration option to\n"},{"type":"literal","position":{"start":{"line":326}},"children":[{"type":"text","position":{"start":{"line":326}},"value":"com.mongodb.spark.sql.connector.read.partitioner.SinglePartitionPartitioner"}]},{"type":"text","position":{"start":{"line":326}},"value":"."}]},{"type":"target","position":{"start":{"line":329}},"children":[{"type":"target_identifier","position":{"start":{"line":329}},"children":[{"type":"literal","position":{"start":{"line":332}},"children":[{"type":"text","position":{"start":{"line":332}},"value":"AutoBucketPartitioner"}]},{"type":"text","position":{"start":{"line":332}},"value":" Configuration"}],"ids":["conf-autobucketpartitioner"]}],"domain":"std","name":"label","html_id":"std-label-conf-autobucketpartitioner"}]},{"type":"section","position":{"start":{"line":332}},"children":[{"type":"heading","position":{"start":{"line":332}},"children":[{"type":"literal","position":{"start":{"line":332}},"children":[{"type":"text","position":{"start":{"line":332}},"value":"AutoBucketPartitioner"}]},{"type":"text","position":{"start":{"line":332}},"value":" Configuration"}],"id":"autobucketpartitioner-configuration"},{"type":"paragraph","position":{"start":{"line":334}},"children":[{"type":"text","position":{"start":{"line":334}},"value":"The "},{"type":"literal","position":{"start":{"line":334}},"children":[{"type":"text","position":{"start":{"line":334}},"value":"AutoBucketPartitioner"}]},{"type":"text","position":{"start":{"line":334}},"value":" configuration is similar to the\n"},{"type":"ref_role","position":{"start":{"line":334}},"children":[{"type":"text","position":{"start":{"line":334}},"value":"SamplePartitioner"}],"domain":"std","name":"label","target":"conf-samplepartitioner","flag":"","fileid":["batch-mode/batch-read-config","std-label-conf-samplepartitioner"]},{"type":"text","position":{"start":{"line":334}},"value":"\nconfiguration, but uses the "},{"type":"reference","position":{"start":{"line":334}},"children":[{"type":"text","position":{"start":{"line":334}},"value":"$bucketAuto"}],"refuri":"https://www.mongodb.com/docs/manual/reference/operator/aggregation/bucketAuto/"},{"type":"text","position":{"start":{"line":334}},"value":"\naggregation stage to paginate the data. By using this configuration,\nyou can partition the data across single or multiple fields, including nested fields."}]},{"type":"paragraph","position":{"start":{"line":340}},"children":[{"type":"text","position":{"start":{"line":340}},"value":"To use this configuration, set the "},{"type":"literal","position":{"start":{"line":340}},"children":[{"type":"text","position":{"start":{"line":340}},"value":"partitioner"}]},{"type":"text","position":{"start":{"line":340}},"value":" configuration option to\n"},{"type":"literal","position":{"start":{"line":340}},"children":[{"type":"text","position":{"start":{"line":340}},"value":"com.mongodb.spark.sql.connector.read.partitioner.AutoBucketPartitioner"}]},{"type":"text","position":{"start":{"line":340}},"value":"."}]},{"type":"directive","position":{"start":{"line":343}},"children":[{"type":"list","position":{"start":{"line":347}},"children":[{"type":"listItem","position":{"start":{"line":347}},"children":[{"type":"list","position":{"start":{"line":347}},"children":[{"type":"listItem","position":{"start":{"line":347}},"children":[{"type":"paragraph","position":{"start":{"line":347}},"children":[{"type":"text","position":{"start":{"line":347}},"value":"Property name"}]}]},{"type":"listItem","position":{"start":{"line":347}},"children":[{"type":"paragraph","position":{"start":{"line":348}},"children":[{"type":"text","position":{"start":{"line":348}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":347}},"children":[{"type":"list","position":{"start":{"line":350}},"children":[{"type":"listItem","position":{"start":{"line":350}},"children":[{"type":"paragraph","position":{"start":{"line":350}},"children":[{"type":"literal","position":{"start":{"line":350}},"children":[{"type":"text","position":{"start":{"line":350}},"value":"partitioner.options.partition.fieldList"}]}]}]},{"type":"listItem","position":{"start":{"line":350}},"children":[{"type":"paragraph","position":{"start":{"line":351}},"children":[{"type":"text","position":{"start":{"line":351}},"value":"The list of fields to use for partitioning. The value can be either a single field\nname or a list of comma-separated fields."}]},{"type":"paragraph","position":{"start":{"line":354}},"children":[{"type":"strong","position":{"start":{"line":354}},"children":[{"type":"text","position":{"start":{"line":354}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":354}},"value":" "},{"type":"literal","position":{"start":{"line":354}},"children":[{"type":"text","position":{"start":{"line":354}},"value":"_id"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":347}},"children":[{"type":"list","position":{"start":{"line":356}},"children":[{"type":"listItem","position":{"start":{"line":356}},"children":[{"type":"paragraph","position":{"start":{"line":356}},"children":[{"type":"literal","position":{"start":{"line":356}},"children":[{"type":"text","position":{"start":{"line":356}},"value":"partitioner.options.partition.chunkSize"}]}]}]},{"type":"listItem","position":{"start":{"line":356}},"children":[{"type":"paragraph","position":{"start":{"line":357}},"children":[{"type":"text","position":{"start":{"line":357}},"value":"The average size (MB) for each partition. Smaller partition sizes\ncreate more partitions containing fewer documents.\nBecause this configuration uses the average document size to determine the number of\ndocuments per partition, partitions might not be the same size."}]},{"type":"paragraph","position":{"start":{"line":362}},"children":[{"type":"strong","position":{"start":{"line":362}},"children":[{"type":"text","position":{"start":{"line":362}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":362}},"value":" "},{"type":"literal","position":{"start":{"line":362}},"children":[{"type":"text","position":{"start":{"line":362}},"value":"64"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":347}},"children":[{"type":"list","position":{"start":{"line":364}},"children":[{"type":"listItem","position":{"start":{"line":364}},"children":[{"type":"paragraph","position":{"start":{"line":364}},"children":[{"type":"literal","position":{"start":{"line":364}},"children":[{"type":"text","position":{"start":{"line":364}},"value":"partitioner.options.partition.samplesPerPartition"}]}]}]},{"type":"listItem","position":{"start":{"line":364}},"children":[{"type":"paragraph","position":{"start":{"line":365}},"children":[{"type":"text","position":{"start":{"line":365}},"value":"The number of samples to take per partition."}]},{"type":"paragraph","position":{"start":{"line":367}},"children":[{"type":"strong","position":{"start":{"line":367}},"children":[{"type":"text","position":{"start":{"line":367}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":367}},"value":" "},{"type":"literal","position":{"start":{"line":367}},"children":[{"type":"text","position":{"start":{"line":367}},"value":"100"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":347}},"children":[{"type":"list","position":{"start":{"line":369}},"children":[{"type":"listItem","position":{"start":{"line":369}},"children":[{"type":"paragraph","position":{"start":{"line":369}},"children":[{"type":"literal","position":{"start":{"line":369}},"children":[{"type":"text","position":{"start":{"line":369}},"value":"partitioner.options.partition.partitionKeyProjectionField"}]}]}]},{"type":"listItem","position":{"start":{"line":369}},"children":[{"type":"paragraph","position":{"start":{"line":370}},"children":[{"type":"text","position":{"start":{"line":370}},"value":"The field name to use for a projected field that contains all the\nfields used to partition the collection.\nWe recommend changing the value of this property only if each document already\ncontains the "},{"type":"literal","position":{"start":{"line":370}},"children":[{"type":"text","position":{"start":{"line":370}},"value":"__idx"}]},{"type":"text","position":{"start":{"line":370}},"value":" field."}]},{"type":"paragraph","position":{"start":{"line":375}},"children":[{"type":"strong","position":{"start":{"line":375}},"children":[{"type":"text","position":{"start":{"line":375}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":375}},"value":" "},{"type":"literal","position":{"start":{"line":375}},"children":[{"type":"text","position":{"start":{"line":375}},"value":"__idx"}]}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"widths":"35 65"}}]}]},{"type":"section","position":{"start":{"line":378}},"children":[{"type":"heading","position":{"start":{"line":378}},"children":[{"type":"text","position":{"start":{"line":378}},"value":"Specifying Properties in "},{"type":"literal","position":{"start":{"line":378}},"children":[{"type":"text","position":{"start":{"line":378}},"value":"connection.uri"}]}],"id":"specifying-properties-in-connection.uri"},{"type":"directive","position":{"start":{"line":380}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"If you use "},{"type":"ref_role","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"SparkConf"}],"domain":"std","name":"label","target":"spark-conf","flag":"","fileid":["configuration","std-label-spark-conf"]},{"type":"text","position":{"start":{"line":0}},"value":" to specify any of the previous settings, you can\neither include them in the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":0}},"value":" setting or list them individually."}]},{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"The following code example shows how to specify the\ndatabase, collection, and read preference as part of the "},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":3}},"value":" setting:"}]},{"type":"code","position":{"start":{"line":6}},"lang":"cfg","copyable":true,"emphasize_lines":[],"value":"spark.mongodb.read.connection.uri=mongodb://127.0.0.1/myDB.myCollection?readPreference=primaryPreferred","linenos":false},{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"To keep the "},{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":10}},"value":" shorter and make the settings easier to read, you can\nspecify them individually instead:"}]},{"type":"code","position":{"start":{"line":13}},"lang":"cfg","copyable":true,"emphasize_lines":[],"value":"spark.mongodb.read.connection.uri=mongodb://127.0.0.1/\nspark.mongodb.read.database=myDB\nspark.mongodb.read.collection=myCollection\nspark.mongodb.read.readPreference.name=primaryPreferred","linenos":false},{"type":"directive","position":{"start":{"line":20}},"children":[{"type":"paragraph","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"If you specify a setting in both the "},{"type":"literal","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":22}},"value":" and on its own line,\nthe "},{"type":"literal","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":22}},"value":" setting takes precedence.\nFor example, in the following configuration, the connection\ndatabase is "},{"type":"literal","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"foobar"}]},{"type":"text","position":{"start":{"line":22}},"value":", because it's the value in the "},{"type":"literal","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":22}},"value":" setting:"}]},{"type":"code","position":{"start":{"line":27}},"lang":"cfg","copyable":true,"emphasize_lines":[],"value":"spark.mongodb.read.connection.uri=mongodb://127.0.0.1/foobar\nspark.mongodb.read.database=bar","linenos":false}],"domain":"","name":"important","argument":[]}],"fileid":"includes/connection-read-config.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":380}},"value":"/includes/connection-read-config.rst"}]}]}]}],"fileid":"batch-mode/batch-read-config.txt","options":{"headings":[{"depth":2,"id":"overview","title":[{"type":"text","position":{"start":{"line":22}},"value":"Overview"}],"selector_ids":{}},{"depth":2,"id":"partitioner-configurations","title":[{"type":"text","position":{"start":{"line":171}},"value":"Partitioner Configurations"}],"selector_ids":{}},{"depth":2,"id":"specifying-properties-in-connection.uri","title":[{"type":"text","position":{"start":{"line":378}},"value":"Specifying Properties in "},{"type":"literal","position":{"start":{"line":378}},"children":[{"type":"text","position":{"start":{"line":378}},"value":"connection.uri"}]}],"selector_ids":{}}]}},"build_id":"674f335303fff01a16b0b68f","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"batch-mode/batch-read-config.txt","static_assets":[],"updated_at":"2024-12-03T16:37:46.994Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d2a","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/batch-mode/batch-write","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Write to MongoDB in Batch Mode"}],"ids":["batch-write-to-mongodb"]}],"domain":"std","name":"label","html_id":"std-label-batch-write-to-mongodb"},{"type":"section","position":{"start":{"line":4}},"children":[{"type":"heading","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Write to MongoDB in Batch Mode"}],"id":"write-to-mongodb-in-batch-mode"},{"type":"directive","position":{"start":{"line":6}},"children":[],"domain":"","name":"toctree","argument":[],"options":{"caption":"Batch Write Configuration Options"},"entries":[{"title":"Configuration","slug":"/batch-mode/batch-write-config"}]},{"type":"section","position":{"start":{"line":12}},"children":[{"type":"heading","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"Overview"}],"id":"overview"},{"type":"directive","position":{"start":{"line":14}},"children":[{"type":"directive","position":{"start":{"line":16}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"To write data to MongoDB, call the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"write()"}]},{"type":"text","position":{"start":{"line":0}},"value":" method on your\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Dataset<Row>"}]},{"type":"text","position":{"start":{"line":0}},"value":" object. This method returns a\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrameWriter"}]},{"type":"text","position":{"start":{"line":0}},"value":"\nobject, which you can use to specify the format and other configuration settings for your\nbatch write operation."}]},{"type":"directive","position":{"start":{"line":6}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"You must specify the following configuration settings to write to MongoDB:"}]},{"type":"directive","position":{"start":{"line":2}},"children":[{"type":"list","position":{"start":{"line":7}},"children":[{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":7}},"children":[{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"Setting"}]}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":10}},"children":[{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"dataFrame.write.format()"}]}]}]},{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"Specifies the format of the underlying output data source. Use "},{"type":"literal","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":11}},"value":"\nto write to MongoDB."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":14}},"children":[{"type":"listItem","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":14}},"children":[{"type":"literal","position":{"start":{"line":14}},"children":[{"type":"text","position":{"start":{"line":14}},"value":"dataFrame.write.option()"}]}]}]},{"type":"listItem","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"Use the "},{"type":"literal","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"option"}]},{"type":"text","position":{"start":{"line":15}},"value":" method to configure batch write settings, including the\nMongoDB deployment\n"},{"type":"reference","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"connection string"}],"refuri":"https://www.mongodb.com/docs/manual/reference/connection-string/"},{"type":"text","position":{"start":{"line":15}},"value":",\nMongoDB database and collection, and\ndestination directory."}]},{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"For a list of batch write configuration options, see\nthe "},{"type":"ref_role","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Batch Write Configuration Options"}],"domain":"std","name":"label","target":"spark-batch-write-conf","flag":"","fileid":["batch-mode/batch-write-config","std-label-spark-batch-write-conf"]},{"type":"text","position":{"start":{"line":21}},"value":" guide."}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"stub-columns":1,"widths":"10 40"}}],"fileid":"includes/batch-write-settings.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":6}},"value":"/includes/batch-write-settings.rst"}]},{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"The following example creates a DataFrame from a "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"json"}]},{"type":"text","position":{"start":{"line":8}},"value":" file and\nsaves it to the "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"people.contacts"}]},{"type":"text","position":{"start":{"line":8}},"value":" collection in MongoDB:"}]},{"type":"code","position":{"start":{"line":11}},"lang":"java","copyable":true,"emphasize_lines":[],"value":"Dataset<Row> dataFrame = spark.read().format(\"json\")\n                                     .load(\"example.json\");\n\ndataFrame.write().format(\"mongodb\")\n                 .mode(\"overwrite\")\n                 .option(\"database\", \"people\")\n                 .option(\"collection\", \"contacts\")\n                 .save();","linenos":false},{"type":"directive","position":{"start":{"line":22}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":2}},"value":" doesn't exist as a class in the Java API. Use\n"},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"Dataset<Row>"}]},{"type":"text","position":{"start":{"line":2}},"value":" to reference a DataFrame."}]}],"domain":"","name":"tip","argument":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrame Type"}]}],"fileid":"includes/java-dataframe-tip.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":22}},"value":"/includes/java-dataframe-tip.rst"}]}],"fileid":"java/write-to-mongodb.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/java/write-to-mongodb.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":14}},"value":"Java (Sync)"}],"options":{"tabid":"java-sync"}},{"type":"directive","position":{"start":{"line":21}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"To write data to MongoDB, call the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"write"}]},{"type":"text","position":{"start":{"line":0}},"value":" function on your\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":0}},"value":" object. This function returns a\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrameWriter"}]},{"type":"text","position":{"start":{"line":0}},"value":"\nobject, which you can use to specify the format and other configuration settings for your\nbatch write operation."}]},{"type":"directive","position":{"start":{"line":6}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"You must specify the following configuration settings to write to MongoDB:"}]},{"type":"directive","position":{"start":{"line":2}},"children":[{"type":"list","position":{"start":{"line":7}},"children":[{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":7}},"children":[{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"Setting"}]}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":10}},"children":[{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"dataFrame.write.format()"}]}]}]},{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"Specifies the format of the underlying output data source. Use "},{"type":"literal","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":11}},"value":"\nto write to MongoDB."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":14}},"children":[{"type":"listItem","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":14}},"children":[{"type":"literal","position":{"start":{"line":14}},"children":[{"type":"text","position":{"start":{"line":14}},"value":"dataFrame.write.option()"}]}]}]},{"type":"listItem","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"Use the "},{"type":"literal","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"option"}]},{"type":"text","position":{"start":{"line":15}},"value":" method to configure batch write settings, including the\nMongoDB deployment\n"},{"type":"reference","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"connection string"}],"refuri":"https://www.mongodb.com/docs/manual/reference/connection-string/"},{"type":"text","position":{"start":{"line":15}},"value":",\nMongoDB database and collection, and\ndestination directory."}]},{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"For a list of batch write configuration options, see\nthe "},{"type":"ref_role","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Batch Write Configuration Options"}],"domain":"std","name":"label","target":"spark-batch-write-conf","flag":"","fileid":["batch-mode/batch-write-config","std-label-spark-batch-write-conf"]},{"type":"text","position":{"start":{"line":21}},"value":" guide."}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"stub-columns":1,"widths":"10 40"}}],"fileid":"includes/batch-write-settings.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":6}},"value":"/includes/batch-write-settings.rst"}]},{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"The following example uses the "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"createDataFrame()"}]},{"type":"text","position":{"start":{"line":8}},"value":" function on the "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":8}},"value":"\nobject to create a "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":8}},"value":" object from a list of tuples containing names\nand ages and a list of column names. The example then writes this "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":8}},"value":" to the\n"},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"people.contacts"}]},{"type":"text","position":{"start":{"line":8}},"value":" collection in MongoDB."}]},{"type":"code","position":{"start":{"line":13}},"lang":"python","copyable":true,"emphasize_lines":[],"value":"dataFrame = spark.createDataFrame([(\"Bilbo Baggins\",  50), (\"Gandalf\", 1000), (\"Thorin\", 195), (\"Balin\", 178), (\"Kili\", 77),\n   (\"Dwalin\", 169), (\"Oin\", 167), (\"Gloin\", 158), (\"Fili\", 82), (\"Bombur\", None)], [\"name\", \"age\"])\n\ndataFrame.write.format(\"mongodb\")\n               .mode(\"append\")\n               .option(\"database\", \"people\")\n               .option(\"collection\", \"contacts\")\n               .save()","linenos":false}],"fileid":"python/write-to-mongodb.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/python/write-to-mongodb.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":14}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":26}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"To write data to MongoDB, call the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"write()"}]},{"type":"text","position":{"start":{"line":0}},"value":" method on your\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":0}},"value":" object. This method returns a\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrameWriter"}]},{"type":"text","position":{"start":{"line":0}},"value":"\nobject, which you can use to specify the format and other configuration settings for your\nbatch write operation."}]},{"type":"directive","position":{"start":{"line":6}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"You must specify the following configuration settings to write to MongoDB:"}]},{"type":"directive","position":{"start":{"line":2}},"children":[{"type":"list","position":{"start":{"line":7}},"children":[{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":7}},"children":[{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"Setting"}]}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":10}},"children":[{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"dataFrame.write.format()"}]}]}]},{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"Specifies the format of the underlying output data source. Use "},{"type":"literal","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":11}},"value":"\nto write to MongoDB."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":7}},"children":[{"type":"list","position":{"start":{"line":14}},"children":[{"type":"listItem","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":14}},"children":[{"type":"literal","position":{"start":{"line":14}},"children":[{"type":"text","position":{"start":{"line":14}},"value":"dataFrame.write.option()"}]}]}]},{"type":"listItem","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"Use the "},{"type":"literal","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"option"}]},{"type":"text","position":{"start":{"line":15}},"value":" method to configure batch write settings, including the\nMongoDB deployment\n"},{"type":"reference","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"connection string"}],"refuri":"https://www.mongodb.com/docs/manual/reference/connection-string/"},{"type":"text","position":{"start":{"line":15}},"value":",\nMongoDB database and collection, and\ndestination directory."}]},{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"For a list of batch write configuration options, see\nthe "},{"type":"ref_role","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Batch Write Configuration Options"}],"domain":"std","name":"label","target":"spark-batch-write-conf","flag":"","fileid":["batch-mode/batch-write-config","std-label-spark-batch-write-conf"]},{"type":"text","position":{"start":{"line":21}},"value":" guide."}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"stub-columns":1,"widths":"10 40"}}],"fileid":"includes/batch-write-settings.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":6}},"value":"/includes/batch-write-settings.rst"}]},{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"The following example creates a DataFrame from a "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"json"}]},{"type":"text","position":{"start":{"line":8}},"value":" file and\nsaves it to the "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"people.contacts"}]},{"type":"text","position":{"start":{"line":8}},"value":" collection in MongoDB:"}]},{"type":"code","position":{"start":{"line":11}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"val dataFrame = spark.read.format(\"json\")\n                          .load(\"example.json\")\n\ndataFrame.write.format(\"mongodb\")\n               .mode(\"overwrite\")\n               .option(\"database\", \"people\")\n               .option(\"collection\", \"contacts\")\n               .save()","linenos":false}],"fileid":"scala/write-to-mongodb.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/scala/write-to-mongodb.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":14}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}},{"type":"directive","position":{"start":{"line":32}},"children":[{"type":"paragraph","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"The MongoDB Spark Connector supports the following save modes:"}]},{"type":"list","position":{"start":{"line":36}},"children":[{"type":"listItem","position":{"start":{"line":36}},"children":[{"type":"paragraph","position":{"start":{"line":36}},"children":[{"type":"literal","position":{"start":{"line":36}},"children":[{"type":"text","position":{"start":{"line":36}},"value":"append"}]}]}]},{"type":"listItem","position":{"start":{"line":36}},"children":[{"type":"paragraph","position":{"start":{"line":37}},"children":[{"type":"literal","position":{"start":{"line":37}},"children":[{"type":"text","position":{"start":{"line":37}},"value":"overwrite"}]}]}]}],"enumtype":"unordered"},{"type":"paragraph","position":{"start":{"line":39}},"children":[{"type":"text","position":{"start":{"line":39}},"value":"If you specify the "},{"type":"literal","position":{"start":{"line":39}},"children":[{"type":"text","position":{"start":{"line":39}},"value":"overwrite"}]},{"type":"text","position":{"start":{"line":39}},"value":" write mode, the connector drops the target\ncollection and creates a new collection that uses the\ndefault collection options.\nThis behavior can affect collections that don't use the default options,\nsuch as the following collection types:"}]},{"type":"list","position":{"start":{"line":45}},"children":[{"type":"listItem","position":{"start":{"line":45}},"children":[{"type":"paragraph","position":{"start":{"line":45}},"children":[{"type":"text","position":{"start":{"line":45}},"value":"Sharded collections"}]}]},{"type":"listItem","position":{"start":{"line":45}},"children":[{"type":"paragraph","position":{"start":{"line":46}},"children":[{"type":"text","position":{"start":{"line":46}},"value":"Collections with nondefault collations"}]}]},{"type":"listItem","position":{"start":{"line":45}},"children":[{"type":"paragraph","position":{"start":{"line":47}},"children":[{"type":"text","position":{"start":{"line":47}},"value":"Time-series collections"}]}]}],"enumtype":"unordered"},{"type":"paragraph","position":{"start":{"line":49}},"children":[{"type":"text","position":{"start":{"line":49}},"value":"To learn more about save modes, see the\n"},{"type":"reference","position":{"start":{"line":49}},"children":[{"type":"text","position":{"start":{"line":49}},"value":"Spark SQL Guide"}],"refuri":"https://spark.apache.org/docs/latest/sql-data-sources-load-save-functions.html#save-modes"},{"type":"text","position":{"start":{"line":49}},"value":"."}]}],"domain":"","name":"warning","argument":[{"type":"text","position":{"start":{"line":32}},"value":"Save Modes"}]},{"type":"directive","position":{"start":{"line":52}},"children":[{"type":"paragraph","position":{"start":{"line":54}},"children":[{"type":"text","position":{"start":{"line":54}},"value":"If your write operation includes a field with a "},{"type":"literal","position":{"start":{"line":54}},"children":[{"type":"text","position":{"start":{"line":54}},"value":"null"}]},{"type":"text","position":{"start":{"line":54}},"value":" value,\nthe connector writes the field name and "},{"type":"literal","position":{"start":{"line":54}},"children":[{"type":"text","position":{"start":{"line":54}},"value":"null"}]},{"type":"text","position":{"start":{"line":54}},"value":" value to MongoDB. You can\nchange this behavior by setting the write configuration property\n"},{"type":"literal","position":{"start":{"line":54}},"children":[{"type":"text","position":{"start":{"line":54}},"value":"ignoreNullValues"}]},{"type":"text","position":{"start":{"line":54}},"value":"."}]},{"type":"paragraph","position":{"start":{"line":59}},"children":[{"type":"text","position":{"start":{"line":59}},"value":"For more information about setting the connector's\nwrite behavior, see "},{"type":"ref_role","position":{"start":{"line":59}},"children":[{"type":"text","position":{"start":{"line":59}},"value":"Write Configuration Options"}],"domain":"std","name":"label","target":"spark-batch-write-conf","flag":"","fileid":["batch-mode/batch-write-config","std-label-spark-batch-write-conf"]},{"type":"text","position":{"start":{"line":59}},"value":"."}]}],"domain":"","name":"important","argument":[]}]},{"type":"section","position":{"start":{"line":63}},"children":[{"type":"heading","position":{"start":{"line":63}},"children":[{"type":"text","position":{"start":{"line":63}},"value":"API Documentation"}],"id":"api-documentation"},{"type":"paragraph","position":{"start":{"line":65}},"children":[{"type":"text","position":{"start":{"line":65}},"value":"To learn more about the types used in these examples, see the following Apache Spark\nAPI documentation:"}]},{"type":"directive","position":{"start":{"line":68}},"children":[{"type":"directive","position":{"start":{"line":70}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Dataset<T>"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/Dataset.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":1}},"children":[{"type":"reference","position":{"start":{"line":1}},"children":[{"type":"text","position":{"start":{"line":1}},"value":"DataFrameWriter"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/DataFrameWriter.html"}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":68}},"value":"Java (Sync)"}],"options":{"tabid":"java-sync"}},{"type":"directive","position":{"start":{"line":76}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrame"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.sql/dataframe.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":1}},"children":[{"type":"reference","position":{"start":{"line":1}},"children":[{"type":"text","position":{"start":{"line":1}},"value":"DataFrameReader"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.sql/api/pyspark.sql.DataFrameWriter.html"}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":68}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":82}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Dataset[T]"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/Dataset.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":1}},"children":[{"type":"reference","position":{"start":{"line":1}},"children":[{"type":"text","position":{"start":{"line":1}},"value":"DataFrameReader"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/DataFrameWriter.html"}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":68}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}}]}]}],"fileid":"batch-mode/batch-write.txt"},"build_id":"67a2781217a2103536045b53","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"batch-mode/batch-write.txt","static_assets":[],"updated_at":"2025-02-04T20:29:20.756Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d24","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/batch-mode/batch-write-config","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Batch Write Configuration Options"}],"ids":["spark-batch-write-conf"]}],"domain":"std","name":"label","html_id":"std-label-spark-batch-write-conf"},{"type":"section","position":{"start":{"line":4}},"children":[{"type":"heading","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Batch Write Configuration Options"}],"id":"batch-write-configuration-options"},{"type":"directive","position":{"start":{"line":6}},"children":[],"domain":"","name":"contents","argument":[{"type":"text","position":{"start":{"line":6}},"value":"On this page"}],"options":{"local":true,"backlinks":"none","depth":1,"class":"singlecol"}},{"type":"target","position":{"start":{"line":12}},"children":[{"type":"target_identifier","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"Overview"}],"ids":["spark-batch-output-conf"]}],"domain":"std","name":"label","html_id":"std-label-spark-batch-output-conf"},{"type":"section","position":{"start":{"line":15}},"children":[{"type":"heading","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"Overview"}],"id":"overview"},{"type":"paragraph","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"You can configure the following properties when writing data to MongoDB in batch mode."}]},{"type":"directive","position":{"start":{"line":19}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"If you use "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":2}},"value":" to set the connector's write configurations,\nprefix "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"spark.mongodb.write."}]},{"type":"text","position":{"start":{"line":2}},"value":" to each property."}]}],"domain":"","name":"note","argument":[]}],"fileid":"includes/conf-write-prefix.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":19}},"value":"/includes/conf-write-prefix.rst"}]},{"type":"directive","position":{"start":{"line":21}},"children":[{"type":"list","position":{"start":{"line":25}},"children":[{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":25}},"children":[{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"paragraph","position":{"start":{"line":25}},"children":[{"type":"text","position":{"start":{"line":25}},"value":"Property name"}]}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"paragraph","position":{"start":{"line":26}},"children":[{"type":"text","position":{"start":{"line":26}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":28}},"children":[{"type":"listItem","position":{"start":{"line":28}},"children":[{"type":"paragraph","position":{"start":{"line":28}},"children":[{"type":"literal","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"connection.uri"}]}]}]},{"type":"listItem","position":{"start":{"line":28}},"children":[{"type":"line_block","position":{"start":{"line":28}},"children":[{"type":"line","position":{"start":{"line":28}},"children":[{"type":"strong","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"Required."}]}]},{"type":"line","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"The connection string configuration key."}]},{"type":"line","position":{"start":{"line":28}},"children":[]},{"type":"line","position":{"start":{"line":28}},"children":[{"type":"strong","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":28}},"value":" "},{"type":"literal","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"mongodb://localhost:27017/"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":34}},"children":[{"type":"listItem","position":{"start":{"line":34}},"children":[{"type":"paragraph","position":{"start":{"line":34}},"children":[{"type":"literal","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"database"}]}]}]},{"type":"listItem","position":{"start":{"line":34}},"children":[{"type":"line_block","position":{"start":{"line":34}},"children":[{"type":"line","position":{"start":{"line":34}},"children":[{"type":"strong","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"Required."}]}]},{"type":"line","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"The database name configuration."}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":38}},"children":[{"type":"listItem","position":{"start":{"line":38}},"children":[{"type":"paragraph","position":{"start":{"line":38}},"children":[{"type":"literal","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"collection"}]}]}]},{"type":"listItem","position":{"start":{"line":38}},"children":[{"type":"line_block","position":{"start":{"line":38}},"children":[{"type":"line","position":{"start":{"line":38}},"children":[{"type":"strong","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"Required."}]}]},{"type":"line","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"The collection name configuration."}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":42}},"children":[{"type":"listItem","position":{"start":{"line":42}},"children":[{"type":"paragraph","position":{"start":{"line":42}},"children":[{"type":"literal","position":{"start":{"line":42}},"children":[{"type":"text","position":{"start":{"line":42}},"value":"comment"}]}]}]},{"type":"listItem","position":{"start":{"line":42}},"children":[{"type":"line_block","position":{"start":{"line":42}},"children":[{"type":"line","position":{"start":{"line":42}},"children":[{"type":"text","position":{"start":{"line":42}},"value":"The comment to append to the write operation. Comments appear in the\n"},{"type":"reference","position":{"start":{"line":42}},"children":[{"type":"text","position":{"start":{"line":42}},"value":"output of the Database Profiler."}],"refuri":"https://www.mongodb.com/docs/manual/reference/database-profiler/"}]},{"type":"line","position":{"start":{"line":42}},"children":[]},{"type":"line","position":{"start":{"line":42}},"children":[{"type":"strong","position":{"start":{"line":42}},"children":[{"type":"text","position":{"start":{"line":42}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":42}},"value":" None"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":48}},"children":[{"type":"listItem","position":{"start":{"line":48}},"children":[{"type":"paragraph","position":{"start":{"line":48}},"children":[{"type":"literal","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"mongoClientFactory"}]}]}]},{"type":"listItem","position":{"start":{"line":48}},"children":[{"type":"line_block","position":{"start":{"line":48}},"children":[{"type":"line","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"MongoClientFactory configuration key."}]},{"type":"line","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"You can specify a custom implementation that must implement the\n"},{"type":"literal","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"com.mongodb.spark.sql.connector.connection.MongoClientFactory"}]},{"type":"text","position":{"start":{"line":48}},"value":"\ninterface."}]},{"type":"line","position":{"start":{"line":48}},"children":[]},{"type":"line","position":{"start":{"line":48}},"children":[{"type":"strong","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":48}},"value":" "},{"type":"literal","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"com.mongodb.spark.sql.connector.connection.DefaultMongoClientFactory"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":56}},"children":[{"type":"listItem","position":{"start":{"line":56}},"children":[{"type":"paragraph","position":{"start":{"line":56}},"children":[{"type":"literal","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"convertJson"}]}]}]},{"type":"listItem","position":{"start":{"line":56}},"children":[{"type":"line_block","position":{"start":{"line":56}},"children":[{"type":"line","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"Specifies whether the connector parses the string and converts extended JSON\ninto BSON."}]},{"type":"line","position":{"start":{"line":56}},"children":[]},{"type":"line","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"This setting accepts the following values:"}]}]},{"type":"list","position":{"start":{"line":62}},"children":[{"type":"listItem","position":{"start":{"line":62}},"children":[{"type":"paragraph","position":{"start":{"line":62}},"children":[{"type":"literal","position":{"start":{"line":62}},"children":[{"type":"text","position":{"start":{"line":62}},"value":"any"}]},{"type":"text","position":{"start":{"line":62}},"value":": The connector converts all JSON values to BSON."}]},{"type":"list","position":{"start":{"line":64}},"children":[{"type":"listItem","position":{"start":{"line":64}},"children":[{"type":"paragraph","position":{"start":{"line":64}},"children":[{"type":"literal","position":{"start":{"line":64}},"children":[{"type":"text","position":{"start":{"line":64}},"value":"\"{a: 1}\""}]},{"type":"text","position":{"start":{"line":64}},"value":" becomes "},{"type":"literal","position":{"start":{"line":64}},"children":[{"type":"text","position":{"start":{"line":64}},"value":"{a: 1}"}]},{"type":"text","position":{"start":{"line":64}},"value":"."}]}]},{"type":"listItem","position":{"start":{"line":64}},"children":[{"type":"paragraph","position":{"start":{"line":65}},"children":[{"type":"literal","position":{"start":{"line":65}},"children":[{"type":"text","position":{"start":{"line":65}},"value":"\"[1, 2, 3]\""}]},{"type":"text","position":{"start":{"line":65}},"value":" becomes "},{"type":"literal","position":{"start":{"line":65}},"children":[{"type":"text","position":{"start":{"line":65}},"value":"[1, 2, 3]"}]},{"type":"text","position":{"start":{"line":65}},"value":"."}]}]},{"type":"listItem","position":{"start":{"line":64}},"children":[{"type":"paragraph","position":{"start":{"line":66}},"children":[{"type":"literal","position":{"start":{"line":66}},"children":[{"type":"text","position":{"start":{"line":66}},"value":"\"true\""}]},{"type":"text","position":{"start":{"line":66}},"value":" becomes "},{"type":"literal","position":{"start":{"line":66}},"children":[{"type":"text","position":{"start":{"line":66}},"value":"true"}]},{"type":"text","position":{"start":{"line":66}},"value":"."}]}]},{"type":"listItem","position":{"start":{"line":64}},"children":[{"type":"paragraph","position":{"start":{"line":67}},"children":[{"type":"literal","position":{"start":{"line":67}},"children":[{"type":"text","position":{"start":{"line":67}},"value":"\"01234\""}]},{"type":"text","position":{"start":{"line":67}},"value":" becomes "},{"type":"literal","position":{"start":{"line":67}},"children":[{"type":"text","position":{"start":{"line":67}},"value":"1234"}]},{"type":"text","position":{"start":{"line":67}},"value":"."}]}]},{"type":"listItem","position":{"start":{"line":64}},"children":[{"type":"paragraph","position":{"start":{"line":68}},"children":[{"type":"literal","position":{"start":{"line":68}},"children":[{"type":"text","position":{"start":{"line":68}},"value":"\"{a:b:c}\""}]},{"type":"text","position":{"start":{"line":68}},"value":" doesn't change."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":62}},"children":[{"type":"paragraph","position":{"start":{"line":70}},"children":[{"type":"literal","position":{"start":{"line":70}},"children":[{"type":"text","position":{"start":{"line":70}},"value":"objectOrArrayOnly"}]},{"type":"text","position":{"start":{"line":70}},"value":": The connector converts only JSON objects and arrays to\nBSON."}]},{"type":"list","position":{"start":{"line":73}},"children":[{"type":"listItem","position":{"start":{"line":73}},"children":[{"type":"paragraph","position":{"start":{"line":73}},"children":[{"type":"literal","position":{"start":{"line":73}},"children":[{"type":"text","position":{"start":{"line":73}},"value":"\"{a: 1}\""}]},{"type":"text","position":{"start":{"line":73}},"value":" becomes "},{"type":"literal","position":{"start":{"line":73}},"children":[{"type":"text","position":{"start":{"line":73}},"value":"{a: 1}"}]},{"type":"text","position":{"start":{"line":73}},"value":"."}]}]},{"type":"listItem","position":{"start":{"line":73}},"children":[{"type":"paragraph","position":{"start":{"line":74}},"children":[{"type":"literal","position":{"start":{"line":74}},"children":[{"type":"text","position":{"start":{"line":74}},"value":"\"[1, 2, 3]\""}]},{"type":"text","position":{"start":{"line":74}},"value":" becomes "},{"type":"literal","position":{"start":{"line":74}},"children":[{"type":"text","position":{"start":{"line":74}},"value":"[1, 2, 3]"}]},{"type":"text","position":{"start":{"line":74}},"value":"."}]}]},{"type":"listItem","position":{"start":{"line":73}},"children":[{"type":"paragraph","position":{"start":{"line":75}},"children":[{"type":"literal","position":{"start":{"line":75}},"children":[{"type":"text","position":{"start":{"line":75}},"value":"\"true\""}]},{"type":"text","position":{"start":{"line":75}},"value":" doesn't change."}]}]},{"type":"listItem","position":{"start":{"line":73}},"children":[{"type":"paragraph","position":{"start":{"line":76}},"children":[{"type":"literal","position":{"start":{"line":76}},"children":[{"type":"text","position":{"start":{"line":76}},"value":"\"01234\""}]},{"type":"text","position":{"start":{"line":76}},"value":" doesn't change."}]}]},{"type":"listItem","position":{"start":{"line":73}},"children":[{"type":"paragraph","position":{"start":{"line":77}},"children":[{"type":"literal","position":{"start":{"line":77}},"children":[{"type":"text","position":{"start":{"line":77}},"value":"\"{a:b:c}\""}]},{"type":"text","position":{"start":{"line":77}},"value":" doesn't change."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":62}},"children":[{"type":"paragraph","position":{"start":{"line":79}},"children":[{"type":"literal","position":{"start":{"line":79}},"children":[{"type":"text","position":{"start":{"line":79}},"value":"false"}]},{"type":"text","position":{"start":{"line":79}},"value":": The connector leaves all values as strings."}]}]}],"enumtype":"unordered"},{"type":"line_block","position":{"start":{"line":56}},"children":[{"type":"line","position":{"start":{"line":56}},"children":[{"type":"strong","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":56}},"value":" "},{"type":"literal","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"false"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":83}},"children":[{"type":"listItem","position":{"start":{"line":83}},"children":[{"type":"paragraph","position":{"start":{"line":83}},"children":[{"type":"literal","position":{"start":{"line":83}},"children":[{"type":"text","position":{"start":{"line":83}},"value":"idFieldList"}]}]}]},{"type":"listItem","position":{"start":{"line":83}},"children":[{"type":"line_block","position":{"start":{"line":83}},"children":[{"type":"line","position":{"start":{"line":83}},"children":[{"type":"text","position":{"start":{"line":83}},"value":"Field or list of fields by which to split the collection data. To\nspecify more than one field, separate them using a comma as shown\nin the following example:"}]}]},{"type":"code","position":{"start":{"line":88}},"lang":"none","copyable":false,"emphasize_lines":[],"value":"\"fieldName1,fieldName2\"","linenos":false},{"type":"line_block","position":{"start":{"line":83}},"children":[{"type":"line","position":{"start":{"line":83}},"children":[{"type":"strong","position":{"start":{"line":83}},"children":[{"type":"text","position":{"start":{"line":83}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":83}},"value":" "},{"type":"literal","position":{"start":{"line":83}},"children":[{"type":"text","position":{"start":{"line":83}},"value":"_id"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":95}},"children":[{"type":"listItem","position":{"start":{"line":95}},"children":[{"type":"paragraph","position":{"start":{"line":95}},"children":[{"type":"literal","position":{"start":{"line":95}},"children":[{"type":"text","position":{"start":{"line":95}},"value":"ignoreNullValues"}]}]}]},{"type":"listItem","position":{"start":{"line":95}},"children":[{"type":"line_block","position":{"start":{"line":95}},"children":[{"type":"line","position":{"start":{"line":95}},"children":[{"type":"text","position":{"start":{"line":95}},"value":"When "},{"type":"literal","position":{"start":{"line":95}},"children":[{"type":"text","position":{"start":{"line":95}},"value":"true"}]},{"type":"text","position":{"start":{"line":95}},"value":", the connector ignores any "},{"type":"literal","position":{"start":{"line":95}},"children":[{"type":"text","position":{"start":{"line":95}},"value":"null"}]},{"type":"text","position":{"start":{"line":95}},"value":" values when writing,\nincluding "},{"type":"literal","position":{"start":{"line":95}},"children":[{"type":"text","position":{"start":{"line":95}},"value":"null"}]},{"type":"text","position":{"start":{"line":95}},"value":" values in arrays and nested documents."}]},{"type":"line","position":{"start":{"line":95}},"children":[]},{"type":"line","position":{"start":{"line":95}},"children":[{"type":"strong","position":{"start":{"line":95}},"children":[{"type":"text","position":{"start":{"line":95}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":95}},"value":" "},{"type":"literal","position":{"start":{"line":95}},"children":[{"type":"text","position":{"start":{"line":95}},"value":"false"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":101}},"children":[{"type":"listItem","position":{"start":{"line":101}},"children":[{"type":"paragraph","position":{"start":{"line":101}},"children":[{"type":"literal","position":{"start":{"line":101}},"children":[{"type":"text","position":{"start":{"line":101}},"value":"maxBatchSize"}]}]}]},{"type":"listItem","position":{"start":{"line":101}},"children":[{"type":"line_block","position":{"start":{"line":101}},"children":[{"type":"line","position":{"start":{"line":101}},"children":[{"type":"text","position":{"start":{"line":101}},"value":"Specifies the maximum number of operations to batch in bulk\noperations."}]},{"type":"line","position":{"start":{"line":101}},"children":[]},{"type":"line","position":{"start":{"line":101}},"children":[{"type":"strong","position":{"start":{"line":101}},"children":[{"type":"text","position":{"start":{"line":101}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":101}},"value":" "},{"type":"literal","position":{"start":{"line":101}},"children":[{"type":"text","position":{"start":{"line":101}},"value":"512"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":107}},"children":[{"type":"listItem","position":{"start":{"line":107}},"children":[{"type":"paragraph","position":{"start":{"line":107}},"children":[{"type":"literal","position":{"start":{"line":107}},"children":[{"type":"text","position":{"start":{"line":107}},"value":"operationType"}]}]}]},{"type":"listItem","position":{"start":{"line":107}},"children":[{"type":"line_block","position":{"start":{"line":107}},"children":[{"type":"line","position":{"start":{"line":107}},"children":[{"type":"text","position":{"start":{"line":107}},"value":"Specifies the type of write operation to perform. You can set\nthis to one of the following values:"}]}]},{"type":"list","position":{"start":{"line":111}},"children":[{"type":"listItem","position":{"start":{"line":111}},"children":[{"type":"paragraph","position":{"start":{"line":111}},"children":[{"type":"literal","position":{"start":{"line":111}},"children":[{"type":"text","position":{"start":{"line":111}},"value":"insert"}]},{"type":"text","position":{"start":{"line":111}},"value":": Insert the data."}]}]},{"type":"listItem","position":{"start":{"line":111}},"children":[{"type":"paragraph","position":{"start":{"line":112}},"children":[{"type":"literal","position":{"start":{"line":112}},"children":[{"type":"text","position":{"start":{"line":112}},"value":"replace"}]},{"type":"text","position":{"start":{"line":112}},"value":": Replace an existing document that matches the\n"},{"type":"literal","position":{"start":{"line":112}},"children":[{"type":"text","position":{"start":{"line":112}},"value":"idFieldList"}]},{"type":"text","position":{"start":{"line":112}},"value":" value with the new data. If no match exists, the\nvalue of "},{"type":"literal","position":{"start":{"line":112}},"children":[{"type":"text","position":{"start":{"line":112}},"value":"upsertDocument"}]},{"type":"text","position":{"start":{"line":112}},"value":" indicates whether the connector\ninserts a new document."}]}]},{"type":"listItem","position":{"start":{"line":111}},"children":[{"type":"paragraph","position":{"start":{"line":116}},"children":[{"type":"literal","position":{"start":{"line":116}},"children":[{"type":"text","position":{"start":{"line":116}},"value":"update"}]},{"type":"text","position":{"start":{"line":116}},"value":": Update an existing document that matches the\n"},{"type":"literal","position":{"start":{"line":116}},"children":[{"type":"text","position":{"start":{"line":116}},"value":"idFieldList"}]},{"type":"text","position":{"start":{"line":116}},"value":" value with the new data. If no match exists, the\nvalue of "},{"type":"literal","position":{"start":{"line":116}},"children":[{"type":"text","position":{"start":{"line":116}},"value":"upsertDocument"}]},{"type":"text","position":{"start":{"line":116}},"value":" indicates whether the connector\ninserts a new document."}]}]}],"enumtype":"unordered"},{"type":"line_block","position":{"start":{"line":107}},"children":[{"type":"line","position":{"start":{"line":107}},"children":[]},{"type":"line","position":{"start":{"line":107}},"children":[{"type":"strong","position":{"start":{"line":107}},"children":[{"type":"text","position":{"start":{"line":107}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":107}},"value":" "},{"type":"literal","position":{"start":{"line":107}},"children":[{"type":"text","position":{"start":{"line":107}},"value":"replace"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":124}},"children":[{"type":"listItem","position":{"start":{"line":124}},"children":[{"type":"paragraph","position":{"start":{"line":124}},"children":[{"type":"literal","position":{"start":{"line":124}},"children":[{"type":"text","position":{"start":{"line":124}},"value":"ordered"}]}]}]},{"type":"listItem","position":{"start":{"line":124}},"children":[{"type":"line_block","position":{"start":{"line":124}},"children":[{"type":"line","position":{"start":{"line":124}},"children":[{"type":"text","position":{"start":{"line":124}},"value":"Specifies whether to perform ordered bulk operations."}]},{"type":"line","position":{"start":{"line":124}},"children":[]},{"type":"line","position":{"start":{"line":124}},"children":[{"type":"strong","position":{"start":{"line":124}},"children":[{"type":"text","position":{"start":{"line":124}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":124}},"value":" "},{"type":"literal","position":{"start":{"line":124}},"children":[{"type":"text","position":{"start":{"line":124}},"value":"true"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":129}},"children":[{"type":"listItem","position":{"start":{"line":129}},"children":[{"type":"paragraph","position":{"start":{"line":129}},"children":[{"type":"literal","position":{"start":{"line":129}},"children":[{"type":"text","position":{"start":{"line":129}},"value":"upsertDocument"}]}]}]},{"type":"listItem","position":{"start":{"line":129}},"children":[{"type":"line_block","position":{"start":{"line":129}},"children":[{"type":"line","position":{"start":{"line":129}},"children":[{"type":"text","position":{"start":{"line":129}},"value":"When "},{"type":"literal","position":{"start":{"line":129}},"children":[{"type":"text","position":{"start":{"line":129}},"value":"true"}]},{"type":"text","position":{"start":{"line":129}},"value":", replace and update operations will insert the data\nif no match exists."}]},{"type":"line","position":{"start":{"line":129}},"children":[]},{"type":"line","position":{"start":{"line":129}},"children":[{"type":"text","position":{"start":{"line":129}},"value":"For time series collections, you must set "},{"type":"literal","position":{"start":{"line":129}},"children":[{"type":"text","position":{"start":{"line":129}},"value":"upsertDocument"}]},{"type":"text","position":{"start":{"line":129}},"value":" to\n"},{"type":"literal","position":{"start":{"line":129}},"children":[{"type":"text","position":{"start":{"line":129}},"value":"false"}]},{"type":"text","position":{"start":{"line":129}},"value":"."}]},{"type":"line","position":{"start":{"line":129}},"children":[]},{"type":"line","position":{"start":{"line":129}},"children":[{"type":"strong","position":{"start":{"line":129}},"children":[{"type":"text","position":{"start":{"line":129}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":129}},"value":" "},{"type":"literal","position":{"start":{"line":129}},"children":[{"type":"text","position":{"start":{"line":129}},"value":"true"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":138}},"children":[{"type":"listItem","position":{"start":{"line":138}},"children":[{"type":"paragraph","position":{"start":{"line":138}},"children":[{"type":"literal","position":{"start":{"line":138}},"children":[{"type":"text","position":{"start":{"line":138}},"value":"writeConcern.journal"}]}]}]},{"type":"listItem","position":{"start":{"line":138}},"children":[{"type":"line_block","position":{"start":{"line":138}},"children":[{"type":"line","position":{"start":{"line":138}},"children":[{"type":"text","position":{"start":{"line":138}},"value":"Specifies "},{"type":"literal","position":{"start":{"line":138}},"children":[{"type":"text","position":{"start":{"line":138}},"value":"j"}]},{"type":"text","position":{"start":{"line":138}},"value":", a write-concern option to enable request for\nacknowledgment that the data is confirmed on on-disk journal for\nthe criteria specified in the "},{"type":"literal","position":{"start":{"line":138}},"children":[{"type":"text","position":{"start":{"line":138}},"value":"w"}]},{"type":"text","position":{"start":{"line":138}},"value":" option. You can specify\neither "},{"type":"literal","position":{"start":{"line":138}},"children":[{"type":"text","position":{"start":{"line":138}},"value":"true"}]},{"type":"text","position":{"start":{"line":138}},"value":" or "},{"type":"literal","position":{"start":{"line":138}},"children":[{"type":"text","position":{"start":{"line":138}},"value":"false"}]},{"type":"text","position":{"start":{"line":138}},"value":"."}]},{"type":"line","position":{"start":{"line":138}},"children":[]},{"type":"line","position":{"start":{"line":138}},"children":[{"type":"text","position":{"start":{"line":138}},"value":"For more information on "},{"type":"literal","position":{"start":{"line":138}},"children":[{"type":"text","position":{"start":{"line":138}},"value":"j"}]},{"type":"text","position":{"start":{"line":138}},"value":" values, see the MongoDB server\nguide on the\n"},{"type":"reference","position":{"start":{"line":138}},"children":[{"type":"text","position":{"start":{"line":138}},"value":"WriteConcern j option"}],"refuri":"https://www.mongodb.com/docs/manual/reference/write-concern/#j-option"},{"type":"text","position":{"start":{"line":138}},"value":"."}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":148}},"children":[{"type":"listItem","position":{"start":{"line":148}},"children":[{"type":"paragraph","position":{"start":{"line":148}},"children":[{"type":"literal","position":{"start":{"line":148}},"children":[{"type":"text","position":{"start":{"line":148}},"value":"writeConcern.w"}]}]}]},{"type":"listItem","position":{"start":{"line":148}},"children":[{"type":"line_block","position":{"start":{"line":148}},"children":[{"type":"line","position":{"start":{"line":148}},"children":[{"type":"text","position":{"start":{"line":148}},"value":"Specifies "},{"type":"literal","position":{"start":{"line":148}},"children":[{"type":"text","position":{"start":{"line":148}},"value":"w"}]},{"type":"text","position":{"start":{"line":148}},"value":", a write-concern option to request acknowledgment\nthat the write operation has propagated to a specified number of\nMongoDB nodes. For a list\nof allowed values for this option, see "},{"type":"reference","position":{"start":{"line":148}},"children":[{"type":"text","position":{"start":{"line":148}},"value":"WriteConcern"}],"refuri":"https://www.mongodb.com/docs/manual/reference/write-concern/#w-option"},{"type":"text","position":{"start":{"line":148}},"value":" in the MongoDB manual."}]},{"type":"line","position":{"start":{"line":148}},"children":[]},{"type":"line","position":{"start":{"line":148}},"children":[{"type":"strong","position":{"start":{"line":148}},"children":[{"type":"text","position":{"start":{"line":148}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":148}},"value":" "},{"type":"literal","position":{"start":{"line":148}},"children":[{"type":"text","position":{"start":{"line":148}},"value":"1"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":157}},"children":[{"type":"listItem","position":{"start":{"line":157}},"children":[{"type":"paragraph","position":{"start":{"line":157}},"children":[{"type":"literal","position":{"start":{"line":157}},"children":[{"type":"text","position":{"start":{"line":157}},"value":"writeConcern.wTimeoutMS"}]}]}]},{"type":"listItem","position":{"start":{"line":157}},"children":[{"type":"line_block","position":{"start":{"line":157}},"children":[{"type":"line","position":{"start":{"line":157}},"children":[{"type":"text","position":{"start":{"line":157}},"value":"Specifies "},{"type":"literal","position":{"start":{"line":157}},"children":[{"type":"text","position":{"start":{"line":157}},"value":"wTimeoutMS"}]},{"type":"text","position":{"start":{"line":157}},"value":", a write-concern option to return an error\nwhen a write operation exceeds the number of milliseconds. If you\nuse this optional setting, you must specify a nonnegative integer."}]},{"type":"line","position":{"start":{"line":157}},"children":[]},{"type":"line","position":{"start":{"line":157}},"children":[{"type":"text","position":{"start":{"line":157}},"value":"For more information on "},{"type":"literal","position":{"start":{"line":157}},"children":[{"type":"text","position":{"start":{"line":157}},"value":"wTimeoutMS"}]},{"type":"text","position":{"start":{"line":157}},"value":" values, see the MongoDB server\nguide on the\n"},{"type":"reference","position":{"start":{"line":157}},"children":[{"type":"text","position":{"start":{"line":157}},"value":"WriteConcern wtimeout option"}],"refuri":"https://www.mongodb.com/docs/manual/reference/write-concern/#wtimeout"},{"type":"text","position":{"start":{"line":157}},"value":"."}]}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"widths":"35 65"}}]},{"type":"section","position":{"start":{"line":167}},"children":[{"type":"heading","position":{"start":{"line":167}},"children":[{"type":"text","position":{"start":{"line":167}},"value":"Specifying Properties in "},{"type":"literal","position":{"start":{"line":167}},"children":[{"type":"text","position":{"start":{"line":167}},"value":"connection.uri"}]}],"id":"specifying-properties-in-connection.uri"},{"type":"directive","position":{"start":{"line":169}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"If you use "},{"type":"ref_role","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"SparkConf"}],"domain":"std","name":"label","target":"spark-conf","flag":"","fileid":["configuration","std-label-spark-conf"]},{"type":"text","position":{"start":{"line":0}},"value":" to specify any of the previous settings, you can\neither include them in the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":0}},"value":" setting or list them individually."}]},{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"The following code example shows how to specify the\ndatabase, collection, and "},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"convertJson"}]},{"type":"text","position":{"start":{"line":3}},"value":" setting as part of the "},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":3}},"value":"\nsetting:"}]},{"type":"code","position":{"start":{"line":7}},"lang":"cfg","copyable":true,"emphasize_lines":[],"value":"spark.mongodb.write.connection.uri=mongodb://127.0.0.1/myDB.myCollection?convertJson=any","linenos":false},{"type":"paragraph","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"To keep the "},{"type":"literal","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":11}},"value":" shorter and make the settings easier to read, you can\nspecify them individually instead:"}]},{"type":"code","position":{"start":{"line":14}},"lang":"cfg","copyable":true,"emphasize_lines":[],"value":"spark.mongodb.write.connection.uri=mongodb://127.0.0.1/\nspark.mongodb.write.database=myDB\nspark.mongodb.write.collection=myCollection\nspark.mongodb.write.convertJson=any","linenos":false},{"type":"directive","position":{"start":{"line":21}},"children":[{"type":"paragraph","position":{"start":{"line":23}},"children":[{"type":"text","position":{"start":{"line":23}},"value":"If you specify a setting in both the "},{"type":"literal","position":{"start":{"line":23}},"children":[{"type":"text","position":{"start":{"line":23}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":23}},"value":" and on its own line,\nthe "},{"type":"literal","position":{"start":{"line":23}},"children":[{"type":"text","position":{"start":{"line":23}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":23}},"value":" setting takes precedence.\nFor example, in the following configuration, the connection\ndatabase is "},{"type":"literal","position":{"start":{"line":23}},"children":[{"type":"text","position":{"start":{"line":23}},"value":"foobar"}]},{"type":"text","position":{"start":{"line":23}},"value":":"}]},{"type":"code","position":{"start":{"line":28}},"lang":"cfg","copyable":true,"emphasize_lines":[],"value":"spark.mongodb.write.connection.uri=mongodb://127.0.0.1/foobar\nspark.mongodb.write.database=bar","linenos":false}],"domain":"","name":"important","argument":[]}],"fileid":"includes/connection-write-config.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":169}},"value":"/includes/connection-write-config.rst"}]}]}]}],"fileid":"batch-mode/batch-write-config.txt","options":{"headings":[{"depth":2,"id":"overview","title":[{"type":"text","position":{"start":{"line":15}},"value":"Overview"}],"selector_ids":{}},{"depth":2,"id":"specifying-properties-in-connection.uri","title":[{"type":"text","position":{"start":{"line":167}},"value":"Specifying Properties in "},{"type":"literal","position":{"start":{"line":167}},"children":[{"type":"text","position":{"start":{"line":167}},"value":"connection.uri"}]}],"selector_ids":{}}]}},"build_id":"674f335303fff01a16b0b68f","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"batch-mode/batch-write-config.txt","static_assets":[],"updated_at":"2024-12-03T16:37:46.994Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d33","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/configuration","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Configuring Spark"}],"ids":["configuration"]}],"domain":"std","name":"label","html_id":"std-label-configuration"},{"type":"section","position":{"start":{"line":4}},"children":[{"type":"heading","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Configuring Spark"}],"id":"configuring-spark"},{"type":"directive","position":{"start":{"line":6}},"children":[],"domain":"","name":"contents","argument":[{"type":"text","position":{"start":{"line":6}},"value":"On this page"}],"options":{"local":true,"backlinks":"none","depth":1,"class":"singlecol"}},{"type":"section","position":{"start":{"line":13}},"children":[{"type":"heading","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"Overview"}],"id":"overview"},{"type":"paragraph","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"You can configure read and write operations in both batch and streaming mode.\nTo learn more about the available configuration options, see the following\npages:"}]},{"type":"list","position":{"start":{"line":19}},"children":[{"type":"listItem","position":{"start":{"line":19}},"children":[{"type":"paragraph","position":{"start":{"line":19}},"children":[{"type":"ref_role","position":{"start":{"line":19}},"children":[{"type":"text","position":{"start":{"line":19}},"value":"Batch Read Configuration Options"}],"domain":"std","name":"label","target":"spark-batch-read-conf","flag":"","fileid":["batch-mode/batch-read-config","std-label-spark-batch-read-conf"]}]}]},{"type":"listItem","position":{"start":{"line":19}},"children":[{"type":"paragraph","position":{"start":{"line":20}},"children":[{"type":"ref_role","position":{"start":{"line":20}},"children":[{"type":"text","position":{"start":{"line":20}},"value":"Batch Write Configuration Options"}],"domain":"std","name":"label","target":"spark-batch-write-conf","flag":"","fileid":["batch-mode/batch-write-config","std-label-spark-batch-write-conf"]}]}]},{"type":"listItem","position":{"start":{"line":19}},"children":[{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"ref_role","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Streaming Read Configuration Options"}],"domain":"std","name":"label","target":"spark-streaming-read-conf","flag":"","fileid":["streaming-mode/streaming-read-config","std-label-spark-streaming-read-conf"]}]}]},{"type":"listItem","position":{"start":{"line":19}},"children":[{"type":"paragraph","position":{"start":{"line":22}},"children":[{"type":"ref_role","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"Streaming Write Configuration Options"}],"domain":"std","name":"label","target":"spark-streaming-write-conf","flag":"","fileid":["streaming-mode/streaming-write-config","std-label-spark-streaming-write-conf"]}]}]}],"enumtype":"unordered"}]},{"type":"section","position":{"start":{"line":25}},"children":[{"type":"heading","position":{"start":{"line":25}},"children":[{"type":"text","position":{"start":{"line":25}},"value":"Specify Configuration"}],"id":"specify-configuration"},{"type":"target","position":{"start":{"line":27}},"children":[{"type":"target_identifier","position":{"start":{"line":27}},"children":[{"type":"text","position":{"start":{"line":30}},"value":"Using "},{"type":"literal","position":{"start":{"line":30}},"children":[{"type":"text","position":{"start":{"line":30}},"value":"SparkConf"}]}],"ids":["spark-conf"]}],"domain":"std","name":"label","html_id":"std-label-spark-conf"},{"type":"section","position":{"start":{"line":30}},"children":[{"type":"heading","position":{"start":{"line":30}},"children":[{"type":"text","position":{"start":{"line":30}},"value":"Using "},{"type":"literal","position":{"start":{"line":30}},"children":[{"type":"text","position":{"start":{"line":30}},"value":"SparkConf"}]}],"id":"using-sparkconf"},{"type":"paragraph","position":{"start":{"line":32}},"children":[{"type":"text","position":{"start":{"line":32}},"value":"You can specify configuration options with "},{"type":"literal","position":{"start":{"line":32}},"children":[{"type":"text","position":{"start":{"line":32}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":32}},"value":" using any of\nthe following approaches:"}]},{"type":"directive","position":{"start":{"line":35}},"children":[{"type":"directive","position":{"start":{"line":37}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"The "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":0}},"value":" constructor in your application. To learn more, see the "},{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Java SparkConf documentation"}],"refuri":"https://spark.apache.org/docs/latest/api/java/index.html?org/apache/spark/SparkConf.html"},{"type":"text","position":{"start":{"line":0}},"value":"."}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":35}},"value":"Java (Sync)"}],"options":{"tabid":"java-sync"}},{"type":"directive","position":{"start":{"line":42}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"The "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":0}},"value":" constructor in your application. To learn more, see the "},{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Python SparkConf documentation"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/api/pyspark.SparkConf.html"},{"type":"text","position":{"start":{"line":0}},"value":"."}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":35}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":47}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"The "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":0}},"value":" constructor in your application. To learn more, see the "},{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Scala SparkConf documentation"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/SparkConf.html"},{"type":"text","position":{"start":{"line":0}},"value":"."}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":35}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}},{"type":"list","position":{"start":{"line":53}},"children":[{"type":"listItem","position":{"start":{"line":53}},"children":[{"type":"paragraph","position":{"start":{"line":53}},"children":[{"type":"text","position":{"start":{"line":53}},"value":"The "},{"type":"literal","position":{"start":{"line":53}},"children":[{"type":"text","position":{"start":{"line":53}},"value":"--conf"}]},{"type":"text","position":{"start":{"line":53}},"value":" flag at runtime. To learn more, see\n"},{"type":"reference","position":{"start":{"line":53}},"children":[{"type":"text","position":{"start":{"line":53}},"value":"Dynamically Loading Spark Properties"}],"refuri":"https://spark.apache.org/docs/latest/configuration.html#dynamically-loading-spark-properties"},{"type":"text","position":{"start":{"line":53}},"value":" in\nthe Spark documentation."}]}]},{"type":"listItem","position":{"start":{"line":53}},"children":[{"type":"paragraph","position":{"start":{"line":57}},"children":[{"type":"text","position":{"start":{"line":57}},"value":"The "},{"type":"literal","position":{"start":{"line":57}},"children":[{"type":"text","position":{"start":{"line":57}},"value":"$SPARK_HOME/conf/spark-default.conf"}]},{"type":"text","position":{"start":{"line":57}},"value":" file."}]}]}],"enumtype":"unordered"},{"type":"paragraph","position":{"start":{"line":59}},"children":[{"type":"text","position":{"start":{"line":59}},"value":"The MongoDB Spark Connector will use the settings in "},{"type":"literal","position":{"start":{"line":59}},"children":[{"type":"text","position":{"start":{"line":59}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":59}},"value":" as\ndefaults."}]},{"type":"target","position":{"start":{"line":62}},"children":[{"type":"target_identifier","position":{"start":{"line":62}},"children":[{"type":"text","position":{"start":{"line":65}},"value":"Using an Options Map"}],"ids":["options-map"]}],"domain":"std","name":"label","html_id":"std-label-options-map"}]},{"type":"section","position":{"start":{"line":65}},"children":[{"type":"heading","position":{"start":{"line":65}},"children":[{"type":"text","position":{"start":{"line":65}},"value":"Using an Options Map"}],"id":"using-an-options-map"},{"type":"paragraph","position":{"start":{"line":67}},"children":[{"type":"text","position":{"start":{"line":67}},"value":"In the Spark API, the "},{"type":"literal","position":{"start":{"line":67}},"children":[{"type":"text","position":{"start":{"line":67}},"value":"DataFrameReader"}]},{"type":"text","position":{"start":{"line":67}},"value":", "},{"type":"literal","position":{"start":{"line":67}},"children":[{"type":"text","position":{"start":{"line":67}},"value":"DataFrameWriter"}]},{"type":"text","position":{"start":{"line":67}},"value":", "},{"type":"literal","position":{"start":{"line":67}},"children":[{"type":"text","position":{"start":{"line":67}},"value":"DataStreamReader"}]},{"type":"text","position":{"start":{"line":67}},"value":",\nand "},{"type":"literal","position":{"start":{"line":67}},"children":[{"type":"text","position":{"start":{"line":67}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":67}},"value":" classes each contain an "},{"type":"literal","position":{"start":{"line":67}},"children":[{"type":"text","position":{"start":{"line":67}},"value":"option()"}]},{"type":"text","position":{"start":{"line":67}},"value":" method. You can use\nthis method to specify options for the underlying read or write operation."}]},{"type":"directive","position":{"start":{"line":71}},"children":[{"type":"paragraph","position":{"start":{"line":73}},"children":[{"type":"text","position":{"start":{"line":73}},"value":"Options specified in this way override any corresponding settings in "},{"type":"literal","position":{"start":{"line":73}},"children":[{"type":"text","position":{"start":{"line":73}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":73}},"value":"."}]}],"domain":"","name":"note","argument":[]},{"type":"section","position":{"start":{"line":76}},"children":[{"type":"heading","position":{"start":{"line":76}},"children":[{"type":"text","position":{"start":{"line":76}},"value":"Short-Form Syntax"}],"id":"short-form-syntax"},{"type":"paragraph","position":{"start":{"line":78}},"children":[{"type":"text","position":{"start":{"line":78}},"value":"Options maps support short-form syntax. You may omit the prefix when\nspecifying an option key string."}]},{"type":"directive","position":{"start":{"line":81}},"children":[{"type":"paragraph","position":{"start":{"line":83}},"children":[{"type":"text","position":{"start":{"line":83}},"value":"The following syntaxes are equivalent to one another:"}]},{"type":"list","position":{"start":{"line":85}},"children":[{"type":"listItem","position":{"start":{"line":85}},"children":[{"type":"paragraph","position":{"start":{"line":85}},"children":[{"type":"literal","position":{"start":{"line":85}},"children":[{"type":"text","position":{"start":{"line":85}},"value":"dfw.option(\"spark.mongodb.write.collection\", \"myCollection\").save()"}]}]}]},{"type":"listItem","position":{"start":{"line":85}},"children":[{"type":"paragraph","position":{"start":{"line":87}},"children":[{"type":"literal","position":{"start":{"line":87}},"children":[{"type":"text","position":{"start":{"line":87}},"value":"dfw.option(\"spark.mongodb.collection\", \"myCollection\").save()"}]}]}]},{"type":"listItem","position":{"start":{"line":85}},"children":[{"type":"paragraph","position":{"start":{"line":89}},"children":[{"type":"literal","position":{"start":{"line":89}},"children":[{"type":"text","position":{"start":{"line":89}},"value":"dfw.option(\"collection\", \"myCollection\").save()"}]}]}]}],"enumtype":"unordered"}],"domain":"","name":"example","argument":[]},{"type":"paragraph","position":{"start":{"line":91}},"children":[{"type":"text","position":{"start":{"line":91}},"value":"To learn more about the "},{"type":"literal","position":{"start":{"line":91}},"children":[{"type":"text","position":{"start":{"line":91}},"value":"option()"}]},{"type":"text","position":{"start":{"line":91}},"value":" method, see the following Spark\ndocumentation pages:"}]},{"type":"directive","position":{"start":{"line":94}},"children":[{"type":"directive","position":{"start":{"line":96}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrameReader"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/DataFrameReader.html#option-java.lang.String-java.lang.String-"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":1}},"children":[{"type":"reference","position":{"start":{"line":1}},"children":[{"type":"text","position":{"start":{"line":1}},"value":"DataFrameWriter"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/DataFrameWriter.html#option-java.lang.String-java.lang.String-"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"reference","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataStreamReader"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/streaming/DataStreamReader.html#option-java.lang.String-java.lang.String-"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"reference","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"DataStreamWriter"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/streaming/DataStreamWriter.html#option-java.lang.String-java.lang.String--"}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":94}},"value":"Java (Sync)"}],"options":{"tabid":"java-sync"}},{"type":"directive","position":{"start":{"line":104}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrameReader"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.sql/api/pyspark.sql.DataFrameReader.option.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":1}},"children":[{"type":"reference","position":{"start":{"line":1}},"children":[{"type":"text","position":{"start":{"line":1}},"value":"DataFrameWriter"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.sql/api/pyspark.sql.DataFrameWriter.option.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"reference","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataStreamReader"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.ss/api/pyspark.sql.streaming.DataStreamReader.option.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"reference","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"DataStreamWriter"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.ss/api/pyspark.sql.streaming.DataStreamWriter.option.html"}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":94}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":112}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrameReader"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/DataFrameReader.html#option(key:String,value:Double):org.apache.spark.sql.DataFrameReader"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":1}},"children":[{"type":"reference","position":{"start":{"line":1}},"children":[{"type":"text","position":{"start":{"line":1}},"value":"DataFrameWriter"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/DataFrameWriter.html#option(key:String,value:Double):org.apache.spark.sql.DataFrameWriter[T]"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"reference","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataStreamReader"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/streaming/DataStreamReader.html#option(key:String,value:Double):org.apache.spark.sql.streaming.DataStreamReader"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"reference","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"DataStreamWriter"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/streaming/DataStreamWriter.html#option(key:String,value:Double):org.apache.spark.sql.streaming.DataStreamWriter[T]"}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":94}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}}]}]},{"type":"section","position":{"start":{"line":122}},"children":[{"type":"heading","position":{"start":{"line":122}},"children":[{"type":"text","position":{"start":{"line":122}},"value":"Using a System Property"}],"id":"using-a-system-property"},{"type":"paragraph","position":{"start":{"line":124}},"children":[{"type":"text","position":{"start":{"line":124}},"value":"The Spark Connector reads some configuration settings before "},{"type":"literal","position":{"start":{"line":124}},"children":[{"type":"text","position":{"start":{"line":124}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":124}},"value":" is\navailable. You must specify these settings by using a JVM system property."}]},{"type":"paragraph","position":{"start":{"line":127}},"children":[{"type":"text","position":{"start":{"line":127}},"value":"For more information on Java system properties, see the "},{"type":"reference","position":{"start":{"line":127}},"children":[{"type":"text","position":{"start":{"line":127}},"value":"Java documentation."}],"refuri":"https://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html"}]},{"type":"directive","position":{"start":{"line":129}},"children":[{"type":"paragraph","position":{"start":{"line":131}},"children":[{"type":"text","position":{"start":{"line":131}},"value":"If the Spark Connector throws a "},{"type":"literal","position":{"start":{"line":131}},"children":[{"type":"text","position":{"start":{"line":131}},"value":"ConfigException"}]},{"type":"text","position":{"start":{"line":131}},"value":", confirm that your "},{"type":"literal","position":{"start":{"line":131}},"children":[{"type":"text","position":{"start":{"line":131}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":131}},"value":"\nor options map uses correct syntax and contains only valid configuration options."}]}],"domain":"","name":"tip","argument":[{"type":"text","position":{"start":{"line":129}},"value":"Configuration Exceptions"}]}]}]}]}],"fileid":"configuration.txt","options":{"headings":[{"depth":2,"id":"overview","title":[{"type":"text","position":{"start":{"line":13}},"value":"Overview"}],"selector_ids":{}},{"depth":2,"id":"specify-configuration","title":[{"type":"text","position":{"start":{"line":25}},"value":"Specify Configuration"}],"selector_ids":{}}]}},"build_id":"674f335303fff01a16b0b68f","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"configuration.txt","static_assets":[],"updated_at":"2024-12-03T16:37:46.994Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d36","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/faq","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"section","position":{"start":{"line":2}},"children":[{"type":"heading","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"FAQ"}],"id":"faq"},{"type":"section","position":{"start":{"line":5}},"children":[{"type":"heading","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"How can I achieve data locality?"}],"id":"how-can-i-achieve-data-locality-"},{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"For any MongoDB deployment, the Spark Connector sets the\npreferred location for a DataFrame or Dataset to be where the data is."}]},{"type":"list","position":{"start":{"line":10}},"children":[{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"For a nonsharded system, it sets the preferred location to be the\nhostname(s) of the standalone or the replica set."}]}]},{"type":"listItem","position":{"start":{"line":10}},"children":[{"type":"paragraph","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"For a sharded system, it sets the preferred location to be the\nhostname(s) of the shards."}]}]}],"enumtype":"unordered"},{"type":"paragraph","position":{"start":{"line":16}},"children":[{"type":"text","position":{"start":{"line":16}},"value":"To promote data locality, we recommend taking the following actions:"}]},{"type":"list","position":{"start":{"line":18}},"children":[{"type":"listItem","position":{"start":{"line":18}},"children":[{"type":"paragraph","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"Ensure there is a Spark Worker on one of the hosts for nonsharded\nsystem or one per shard for sharded systems."}]}]},{"type":"listItem","position":{"start":{"line":18}},"children":[{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Use a "},{"type":"ref_role","position":{"start":{"line":21}},"children":[{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"nearest"}]}],"domain":"mongodb","name":"readmode","target":"nearest","flag":"","url":"https://www.mongodb.com/docs/manual/core/read-preference/#mongodb-readmode-nearest"},{"type":"text","position":{"start":{"line":21}},"value":" read preference to read from the local\n"},{"type":"ref_role","position":{"start":{"line":21}},"children":[{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"mongod"}]}],"domain":"mongodb","name":"binary","target":"bin.mongod","flag":"~","url":"https://www.mongodb.com/docs/manual/reference/program/mongod/#mongodb-binary-bin.mongod"},{"type":"text","position":{"start":{"line":21}},"value":"."}]}]},{"type":"listItem","position":{"start":{"line":18}},"children":[{"type":"paragraph","position":{"start":{"line":24}},"children":[{"type":"text","position":{"start":{"line":24}},"value":"For a sharded cluster, have a "},{"type":"ref_role","position":{"start":{"line":24}},"children":[{"type":"literal","position":{"start":{"line":24}},"children":[{"type":"text","position":{"start":{"line":24}},"value":"mongos"}]}],"domain":"mongodb","name":"binary","target":"bin.mongos","flag":"~","url":"https://www.mongodb.com/docs/manual/reference/program/mongos/#mongodb-binary-bin.mongos"},{"type":"text","position":{"start":{"line":24}},"value":" on the\nsame nodes and use the "},{"type":"literal","position":{"start":{"line":24}},"children":[{"type":"text","position":{"start":{"line":24}},"value":"localThreshold"}]},{"type":"text","position":{"start":{"line":24}},"value":"\nconfiguration setting to connect to the nearest "},{"type":"ref_role","position":{"start":{"line":24}},"children":[{"type":"literal","position":{"start":{"line":24}},"children":[{"type":"text","position":{"start":{"line":24}},"value":"mongos"}]}],"domain":"mongodb","name":"binary","target":"bin.mongos","flag":"~","url":"https://www.mongodb.com/docs/manual/reference/program/mongos/#mongodb-binary-bin.mongos"},{"type":"text","position":{"start":{"line":24}},"value":".\nTo partition the data by shard use the\n"},{"type":"ref_role","position":{"start":{"line":24}},"children":[{"type":"literal","position":{"start":{"line":24}},"children":[{"type":"text","position":{"start":{"line":24}},"value":"ShardedPartitioner"}]},{"type":"text","position":{"start":{"line":24}},"value":" Configuration"}],"domain":"std","name":"label","target":"conf-shardedpartitioner","flag":"","fileid":["batch-mode/batch-read-config","std-label-conf-shardedpartitioner"]},{"type":"text","position":{"start":{"line":24}},"value":"."}]}]}],"enumtype":"unordered"}]},{"type":"section","position":{"start":{"line":31}},"children":[{"type":"heading","position":{"start":{"line":31}},"children":[{"type":"text","position":{"start":{"line":31}},"value":"How do I resolve "},{"type":"literal","position":{"start":{"line":31}},"children":[{"type":"text","position":{"start":{"line":31}},"value":"Unrecognized pipeline stage name"}]},{"type":"text","position":{"start":{"line":31}},"value":" Error?"}],"id":"how-do-i-resolve-unrecognized-pipeline-stage-name-error-"},{"type":"paragraph","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"In MongoDB deployments with mixed versions of "},{"type":"ref_role","position":{"start":{"line":33}},"children":[{"type":"literal","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"mongod"}]}],"domain":"mongodb","name":"binary","target":"bin.mongod","flag":"~","url":"https://www.mongodb.com/docs/manual/reference/program/mongod/#mongodb-binary-bin.mongod"},{"type":"text","position":{"start":{"line":33}},"value":", it is\npossible to get an "},{"type":"literal","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"Unrecognized pipeline stage name: '$sample'"}]},{"type":"text","position":{"start":{"line":33}},"value":"\nerror. To mitigate this situation, explicitly configure the partitioner\nto use and define the schema when using DataFrames."}]}]},{"type":"section","position":{"start":{"line":39}},"children":[{"type":"heading","position":{"start":{"line":39}},"children":[{"type":"text","position":{"start":{"line":39}},"value":"How can I use mTLS for authentication?"}],"id":"how-can-i-use-mtls-for-authentication-"},{"type":"paragraph","position":{"start":{"line":41}},"children":[{"type":"text","position":{"start":{"line":41}},"value":"To use mTLS, include the following options when you run "},{"type":"literal","position":{"start":{"line":41}},"children":[{"type":"text","position":{"start":{"line":41}},"value":"spark-submit"}]},{"type":"text","position":{"start":{"line":41}},"value":":"}]},{"type":"code","position":{"start":{"line":43}},"lang":"bash","copyable":true,"emphasize_lines":[],"value":"--driver-java-options -Djavax.net.ssl.trustStore=<path to your truststore.jks file> \\\n--driver-java-options -Djavax.net.ssl.trustStorePassword=<your truststore password> \\\n--driver-java-options -Djavax.net.ssl.keyStore=<path to your keystore.jks file> \\\n--driver-java-options -Djavax.net.ssl.keyStorePassword=<your keystore password> \\\n--conf spark.executor.extraJavaOptions=-Djavax.net.ssl.trustStore=<path to your truststore.jks file> \\\n--conf spark.executor.extraJavaOptions=-Djavax.net.ssl.trustStorePassword=<your truststore password> \\\n--conf spark.executor.extraJavaOptions=-Djavax.net.ssl.keyStore=<path to your keystore.jks file> \\\n--conf spark.executor.extraJavaOptions=-Djavax.net.ssl.keyStorePassword=<your keystore password> \\","linenos":false},{"type":"target","position":{"start":{"line":54}},"children":[{"type":"target_identifier","position":{"start":{"line":54}},"children":[{"type":"text","position":{"start":{"line":57}},"value":"How can I share a MongoClient instance across threads?"}],"ids":["cache-configuration"]}],"domain":"std","name":"label","html_id":"std-label-cache-configuration"}]},{"type":"section","position":{"start":{"line":57}},"children":[{"type":"heading","position":{"start":{"line":57}},"children":[{"type":"text","position":{"start":{"line":57}},"value":"How can I share a MongoClient instance across threads?"}],"id":"how-can-i-share-a-mongoclient-instance-across-threads-"},{"type":"paragraph","position":{"start":{"line":59}},"children":[{"type":"text","position":{"start":{"line":59}},"value":"The MongoConnector includes a cache that lets workers\nshare a single "},{"type":"literal","position":{"start":{"line":59}},"children":[{"type":"text","position":{"start":{"line":59}},"value":"MongoClient"}]},{"type":"text","position":{"start":{"line":59}},"value":" across threads. To specify the length of time to keep a\n"},{"type":"literal","position":{"start":{"line":59}},"children":[{"type":"text","position":{"start":{"line":59}},"value":"MongoClient"}]},{"type":"text","position":{"start":{"line":59}},"value":" available, include the "},{"type":"literal","position":{"start":{"line":59}},"children":[{"type":"text","position":{"start":{"line":59}},"value":"mongodb.keep_alive_ms"}]},{"type":"text","position":{"start":{"line":59}},"value":" option when you run\n"},{"type":"literal","position":{"start":{"line":59}},"children":[{"type":"text","position":{"start":{"line":59}},"value":"spark-submit"}]},{"type":"text","position":{"start":{"line":59}},"value":":"}]},{"type":"code","position":{"start":{"line":64}},"lang":"bash","copyable":true,"emphasize_lines":[],"value":"--driver-java-options -Dmongodb.keep_alive_ms=<number of milliseconds to keep MongoClient available>","linenos":false},{"type":"paragraph","position":{"start":{"line":68}},"children":[{"type":"text","position":{"start":{"line":68}},"value":"By default, this property has a value of "},{"type":"literal","position":{"start":{"line":68}},"children":[{"type":"text","position":{"start":{"line":68}},"value":"5000"}]},{"type":"text","position":{"start":{"line":68}},"value":"."}]},{"type":"directive","position":{"start":{"line":70}},"children":[{"type":"paragraph","position":{"start":{"line":72}},"children":[{"type":"text","position":{"start":{"line":72}},"value":"Because the cache is set up before the Spark Configuration is available,\nyou must use a system property to configure it."}]}],"domain":"","name":"note","argument":[]}]}]}],"fileid":"faq.txt"},"build_id":"66c8b3960075860a5c5c037b","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"faq.txt","static_assets":[],"updated_at":"2024-08-23T16:08:51.621Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d3c","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/getting-started","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"section","position":{"start":{"line":2}},"children":[{"type":"heading","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"Getting Started with the Spark Connector"}],"id":"getting-started-with-the-spark-connector"},{"type":"directive","position":{"start":{"line":4}},"children":[],"domain":"","name":"contents","argument":[{"type":"text","position":{"start":{"line":4}},"value":"On this page"}],"options":{"local":true,"backlinks":"none","depth":1,"class":"singlecol"}},{"type":"directive","position":{"start":{"line":10}},"children":[],"domain":"mongodb","name":"facet","argument":[],"options":{"name":"genre","values":"tutorial"}},{"type":"directive","position":{"start":{"line":14}},"children":[],"domain":"","name":"meta","argument":[],"options":{"keywords":"quick start, tutorial, code example"}},{"type":"section","position":{"start":{"line":18}},"children":[{"type":"heading","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"Prerequisites"}],"id":"prerequisites"},{"type":"directive","position":{"start":{"line":20}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Basic working knowledge of MongoDB and Apache Spark. Refer to the\n"},{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"MongoDB documentation"}],"refuri":"https://www.mongodb.com/docs/manual/"},{"type":"text","position":{"start":{"line":0}},"value":", "},{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Spark documentation"}],"refuri":"https://spark.apache.org/docs/latest/"},{"type":"named_reference","position":{"start":{"line":0}},"refname":"Spark documentation","refuri":"https://spark.apache.org/docs/latest/"},{"type":"text","position":{"start":{"line":0}},"value":", and this\n"},{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"MongoDB white paper"}],"refuri":"https://www.mongodb.com/collateral/apache-spark-and-mongodb-turning-analytics-into-real-time-action"},{"type":"text","position":{"start":{"line":0}},"value":"\nfor more details."}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":6}},"children":[{"type":"text","position":{"start":{"line":6}},"value":"MongoDB version 4.0 or later"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"Spark version 3.1 through 3.5"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"Java 8 or later"}]}]}],"enumtype":"unordered"}],"fileid":"includes/list-prerequisites.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":20}},"value":"/includes/list-prerequisites.rst"}]},{"type":"target","position":{"start":{"line":22}},"children":[{"type":"target_identifier","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":27}},"value":"Getting Started"}],"ids":["pyspark-shell"]}],"domain":"std","name":"label","html_id":"std-label-pyspark-shell"},{"type":"target","position":{"start":{"line":23}},"children":[{"type":"target_identifier","position":{"start":{"line":23}},"children":[{"type":"text","position":{"start":{"line":27}},"value":"Getting Started"}],"ids":["scala-getting-started"]}],"domain":"std","name":"label","html_id":"std-label-scala-getting-started"},{"type":"target","position":{"start":{"line":24}},"children":[{"type":"target_identifier","position":{"start":{"line":24}},"children":[{"type":"text","position":{"start":{"line":27}},"value":"Getting Started"}],"ids":["python-basics"]}],"domain":"std","name":"label","html_id":"std-label-python-basics"}]},{"type":"section","position":{"start":{"line":27}},"children":[{"type":"heading","position":{"start":{"line":27}},"children":[{"type":"text","position":{"start":{"line":27}},"value":"Getting Started"}],"id":"getting-started"},{"type":"directive","position":{"start":{"line":29}},"children":[{"type":"directive","position":{"start":{"line":31}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"In version 10.0.0 and later of the Connector, use the format\n"},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":2}},"value":" to read from and write to MongoDB:"}]},{"type":"paragraph","position":{"start":{"line":5}},"children":[{"type":"literal","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"df = spark.read.format(\"mongodb\").load()"}]}]}],"domain":"","name":"important","argument":[]}],"fileid":"includes/new-format-name.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/includes/new-format-name.rst"}]},{"type":"section","position":{"start":{"line":3}},"children":[{"type":"heading","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"Dependency Management"}],"id":"dependency-management"},{"type":"directive","position":{"start":{"line":5}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Provide the Spark Core, Spark SQL, and MongoDB Spark Connector\ndependencies to your dependency management tool."}]}],"fileid":"includes/scala-java-dependencies.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":5}},"value":"/includes/scala-java-dependencies.rst"}]},{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"Beginning in version 3.2.0, Apache Spark supports both Scala 2.12 and 2.13.\nSpark 3.1.3 and previous versions support only Scala 2.12.\nTo provide support for both Scala versions, version 10.4.1 of the Spark\nConnector produces two artifacts:"}]},{"type":"list","position":{"start":{"line":12}},"children":[{"type":"listItem","position":{"start":{"line":12}},"children":[{"type":"paragraph","position":{"start":{"line":12}},"children":[{"type":"literal","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"org.mongodb.spark:mongo-spark-connector_2.12:10.4.1"}]},{"type":"text","position":{"start":{"line":12}},"value":" is\ncompiled against Scala 2.12, and supports Spark 3.1.x and above."}]}]},{"type":"listItem","position":{"start":{"line":12}},"children":[{"type":"paragraph","position":{"start":{"line":14}},"children":[{"type":"literal","position":{"start":{"line":14}},"children":[{"type":"text","position":{"start":{"line":14}},"value":"org.mongodb.spark:mongo-spark-connector_2.13:10.4.1"}]},{"type":"text","position":{"start":{"line":14}},"value":" is\ncompiled against Scala 2.13, and supports Spark 3.2.x and above."}]}]}],"enumtype":"unordered"},{"type":"directive","position":{"start":{"line":17}},"children":[{"type":"paragraph","position":{"start":{"line":19}},"children":[{"type":"text","position":{"start":{"line":19}},"value":"Use the Spark Connector artifact that's compatible with your\nversions of Scala and Spark."}]}],"domain":"","name":"important","argument":[]},{"type":"paragraph","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"The following excerpt from a Maven "},{"type":"literal","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"pom.xml"}]},{"type":"text","position":{"start":{"line":22}},"value":" file shows how to include dependencies\ncompatible with Scala 2.12:"}]},{"type":"code","position":{"start":{"line":25}},"lang":"xml","copyable":true,"emphasize_lines":[],"value":"<dependencies>\n  <dependency>\n    <groupId>org.mongodb.spark</groupId>\n    <artifactId>mongo-spark-connector_2.12</artifactId>\n    <version>10.4.1</version>\n  </dependency>\n  <dependency>\n    <groupId>org.apache.spark</groupId>\n    <artifactId>spark-core_2.12</artifactId>\n    <version>3.3.1</version>\n  </dependency>\n  <dependency>\n    <groupId>org.apache.spark</groupId>\n    <artifactId>spark-sql_2.12</artifactId>\n    <version>3.3.1</version>\n  </dependency>\n</dependencies>","linenos":false}]},{"type":"section","position":{"start":{"line":46}},"children":[{"type":"heading","position":{"start":{"line":46}},"children":[{"type":"text","position":{"start":{"line":46}},"value":"Configuration"}],"id":"configuration"},{"type":"directive","position":{"start":{"line":48}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"When specifying the Connector configuration via "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":0}},"value":", you\nmust prefix the settings appropriately. For details and other\navailable MongoDB Spark Connector options, see the\n"},{"type":"ref_role","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Configuring Spark"}],"domain":"std","name":"doc","target":"","flag":"","fileid":["/configuration",""]},{"type":"text","position":{"start":{"line":0}},"value":" guide."}]}],"fileid":"includes/scala-java-sparksession-config.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":48}},"value":"/includes/scala-java-sparksession-config.rst"}]},{"type":"code","position":{"start":{"line":50}},"lang":"java","copyable":true,"emphasize_lines":[],"value":"package com.mongodb.spark_examples;\n\nimport org.apache.spark.sql.SparkSession;\n\npublic final class GettingStarted {\n\n  public static void main(final String[] args) throws InterruptedException {\n    /* Create the SparkSession.\n     * If config arguments are passed from the command line using --conf,\n     * parse args for the values to set.\n     */\n    SparkSession spark = SparkSession.builder()\n      .master(\"local\")\n      .appName(\"MongoSparkConnectorIntro\")\n      .config(\"spark.mongodb.read.connection.uri\", \"mongodb://127.0.0.1/test.myCollection\")\n      .config(\"spark.mongodb.write.connection.uri\", \"mongodb://127.0.0.1/test.myCollection\")\n      .getOrCreate();\n\n    // Application logic\n\n  }\n}","linenos":false},{"type":"list","position":{"start":{"line":75}},"children":[{"type":"listItem","position":{"start":{"line":75}},"children":[{"type":"paragraph","position":{"start":{"line":75}},"children":[{"type":"text","position":{"start":{"line":75}},"value":"The "},{"type":"literal","position":{"start":{"line":75}},"children":[{"type":"text","position":{"start":{"line":75}},"value":"spark.mongodb.read.connection.uri"}]},{"type":"text","position":{"start":{"line":75}},"value":" specifies the\nMongoDB server  address("},{"type":"literal","position":{"start":{"line":75}},"children":[{"type":"text","position":{"start":{"line":75}},"value":"127.0.0.1"}]},{"type":"text","position":{"start":{"line":75}},"value":"), the database to connect\n("},{"type":"literal","position":{"start":{"line":75}},"children":[{"type":"text","position":{"start":{"line":75}},"value":"test"}]},{"type":"text","position":{"start":{"line":75}},"value":"), and the collection ("},{"type":"literal","position":{"start":{"line":75}},"children":[{"type":"text","position":{"start":{"line":75}},"value":"myCollection"}]},{"type":"text","position":{"start":{"line":75}},"value":") from which to read\ndata, and the read preference."}]}]},{"type":"listItem","position":{"start":{"line":75}},"children":[{"type":"paragraph","position":{"start":{"line":80}},"children":[{"type":"text","position":{"start":{"line":80}},"value":"The "},{"type":"literal","position":{"start":{"line":80}},"children":[{"type":"text","position":{"start":{"line":80}},"value":"spark.mongodb.write.connection.uri"}]},{"type":"text","position":{"start":{"line":80}},"value":" specifies the\nMongoDB server address("},{"type":"literal","position":{"start":{"line":80}},"children":[{"type":"text","position":{"start":{"line":80}},"value":"127.0.0.1"}]},{"type":"text","position":{"start":{"line":80}},"value":"), the database to connect\n("},{"type":"literal","position":{"start":{"line":80}},"children":[{"type":"text","position":{"start":{"line":80}},"value":"test"}]},{"type":"text","position":{"start":{"line":80}},"value":"), and the collection ("},{"type":"literal","position":{"start":{"line":80}},"children":[{"type":"text","position":{"start":{"line":80}},"value":"myCollection"}]},{"type":"text","position":{"start":{"line":80}},"value":") to which to write\ndata."}]}]}],"enumtype":"unordered"},{"type":"paragraph","position":{"start":{"line":85}},"children":[{"type":"text","position":{"start":{"line":85}},"value":"You can use a "},{"type":"literal","position":{"start":{"line":85}},"children":[{"type":"text","position":{"start":{"line":85}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":85}},"value":" object to write data to MongoDB, read\ndata from MongoDB, create Datasets, and perform SQL operations."}]}]}],"fileid":"java/api.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/java/api.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":29}},"value":"Java (Sync)"}],"options":{"tabid":"java-sync"}},{"type":"directive","position":{"start":{"line":36}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"In version 10.0.0 and later of the Connector, use the format\n"},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":2}},"value":" to read from and write to MongoDB:"}]},{"type":"paragraph","position":{"start":{"line":5}},"children":[{"type":"literal","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"df = spark.read.format(\"mongodb\").load()"}]}]}],"domain":"","name":"important","argument":[]}],"fileid":"includes/new-format-name.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/includes/new-format-name.rst"}]},{"type":"section","position":{"start":{"line":3}},"children":[{"type":"heading","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"Python Spark Shell"}],"id":"python-spark-shell"},{"type":"paragraph","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"This tutorial uses the "},{"type":"literal","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"pyspark"}]},{"type":"text","position":{"start":{"line":5}},"value":" shell, but the code works\nwith self-contained Python applications as well."}]},{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"When starting the "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"pyspark"}]},{"type":"text","position":{"start":{"line":8}},"value":" shell, you can specify:"}]},{"type":"directive","position":{"start":{"line":10}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"--packages"}]},{"type":"text","position":{"start":{"line":0}},"value":" option to download the MongoDB Spark Connector\npackage.  The following package is available:"}]},{"type":"list","position":{"start":{"line":3}},"children":[{"type":"listItem","position":{"start":{"line":3}},"children":[{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"mongo-spark-connector"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"the "},{"type":"literal","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"--conf"}]},{"type":"text","position":{"start":{"line":5}},"value":" option to configure the MongoDB Spark Connnector.\nThese settings configure the "},{"type":"literal","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":5}},"value":" object."}]},{"type":"directive","position":{"start":{"line":8}},"children":[{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"If you use "},{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":10}},"value":" to configure the Spark Connector, you\nmust prefix the settings appropriately. For details and other\navailable MongoDB Spark Connector options, see the\n"},{"type":"ref_role","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Configuring Spark"}],"domain":"std","name":"doc","target":"","flag":"","fileid":["/configuration",""]},{"type":"text","position":{"start":{"line":10}},"value":" guide."}]}],"domain":"","name":"note","argument":[]}]}],"enumtype":"unordered"}],"domain":"","name":"extract","argument":[]}],"fileid":"includes/extracts-command-line.yaml"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/includes/extracts/list-command-line-specification.rst"}]},{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"The following example starts the "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"pyspark"}]},{"type":"text","position":{"start":{"line":2}},"value":" shell from the command\nline:"}]},{"type":"code","position":{"start":{"line":5}},"lang":"sh","copyable":true,"emphasize_lines":[],"value":"./bin/pyspark --conf \"spark.mongodb.read.connection.uri=mongodb://127.0.0.1/test.myCollection?readPreference=primaryPreferred\" \\\n              --conf \"spark.mongodb.write.connection.uri=mongodb://127.0.0.1/test.myCollection\" \\\n              --packages org.mongodb.spark:mongo-spark-connector_2.12:10.4.1","linenos":false},{"type":"directive","position":{"start":{"line":11}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"The "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"spark.mongodb.read.connection.uri"}]},{"type":"text","position":{"start":{"line":0}},"value":" specifies the\nMongoDB server address ("},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"127.0.0.1"}]},{"type":"text","position":{"start":{"line":0}},"value":"), the database to connect\n("},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"test"}]},{"type":"text","position":{"start":{"line":0}},"value":"), and the collection ("},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"myCollection"}]},{"type":"text","position":{"start":{"line":0}},"value":") from which to read\ndata, and the read preference."}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"The "},{"type":"literal","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"spark.mongodb.write.connection.uri"}]},{"type":"text","position":{"start":{"line":4}},"value":" specifies the\nMongoDB server address ("},{"type":"literal","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"127.0.0.1"}]},{"type":"text","position":{"start":{"line":4}},"value":"), the database to connect\n("},{"type":"literal","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"test"}]},{"type":"text","position":{"start":{"line":4}},"value":"), and the collection ("},{"type":"literal","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"myCollection"}]},{"type":"text","position":{"start":{"line":4}},"value":") to which to write\ndata. Connects to port "},{"type":"literal","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"27017"}]},{"type":"text","position":{"start":{"line":4}},"value":" by default."}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"The "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"packages"}]},{"type":"text","position":{"start":{"line":8}},"value":" option specifies the Spark Connector's\nMaven coordinates, in the format "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"groupId:artifactId:version"}]},{"type":"text","position":{"start":{"line":8}},"value":"."}]}]}],"enumtype":"unordered"}],"domain":"","name":"extract","argument":[]}],"fileid":"includes/extracts-command-line.yaml"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":11}},"value":"/includes/extracts/list-configuration-explanation.rst"}]},{"type":"paragraph","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"The examples in this tutorial will use this database and collection."}]}],"domain":"","name":"extract","argument":[]}],"fileid":"includes/extracts-command-line.yaml"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":10}},"value":"/includes/extracts/command-line-start-pyspark.rst"}]}]},{"type":"section","position":{"start":{"line":13}},"children":[{"type":"heading","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"Create a "},{"type":"literal","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":13}},"value":" Object"}],"id":"create-a-sparksession-object"},{"type":"directive","position":{"start":{"line":15}},"children":[{"type":"paragraph","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"When you start "},{"type":"literal","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"pyspark"}]},{"type":"text","position":{"start":{"line":17}},"value":" you get a "},{"type":"literal","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":17}},"value":" object called\n"},{"type":"literal","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"spark"}]},{"type":"text","position":{"start":{"line":17}},"value":" by default. In a standalone Python application, you need\nto create your "},{"type":"literal","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":17}},"value":" object explicitly, as show below."}]}],"domain":"","name":"note","argument":[]},{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"If you specified the "},{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"spark.mongodb.read.connection.uri"}]},{"type":"text","position":{"start":{"line":21}},"value":"\nand "},{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"spark.mongodb.write.connection.uri"}]},{"type":"text","position":{"start":{"line":21}},"value":" configuration options when you\nstarted "},{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"pyspark"}]},{"type":"text","position":{"start":{"line":21}},"value":", the default "},{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":21}},"value":" object uses them.\nIf you'd rather create your own "},{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":21}},"value":" object from within\n"},{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"pyspark"}]},{"type":"text","position":{"start":{"line":21}},"value":", you can use "},{"type":"literal","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"SparkSession.builder"}]},{"type":"text","position":{"start":{"line":21}},"value":" and specify different\nconfiguration options."}]},{"type":"code","position":{"start":{"line":28}},"lang":"python","copyable":true,"emphasize_lines":[],"value":"from pyspark.sql import SparkSession\n\nmy_spark = SparkSession \\\n    .builder \\\n    .appName(\"myApp\") \\\n    .config(\"spark.mongodb.read.connection.uri\", \"mongodb://127.0.0.1/test.coll\") \\\n    .config(\"spark.mongodb.write.connection.uri\", \"mongodb://127.0.0.1/test.coll\") \\\n    .getOrCreate()","linenos":false},{"type":"paragraph","position":{"start":{"line":39}},"children":[{"type":"text","position":{"start":{"line":39}},"value":"You can use a "},{"type":"literal","position":{"start":{"line":39}},"children":[{"type":"text","position":{"start":{"line":39}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":39}},"value":" object to write data to MongoDB, read\ndata from MongoDB, create DataFrames, and perform SQL operations."}]}]}],"fileid":"python/api.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/python/api.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":29}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":41}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"In version 10.0.0 and later of the Connector, use the format\n"},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":2}},"value":" to read from and write to MongoDB:"}]},{"type":"paragraph","position":{"start":{"line":5}},"children":[{"type":"literal","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"df = spark.read.format(\"mongodb\").load()"}]}]}],"domain":"","name":"important","argument":[]}],"fileid":"includes/new-format-name.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/includes/new-format-name.rst"}]},{"type":"section","position":{"start":{"line":3}},"children":[{"type":"heading","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"Spark Shell"}],"id":"spark-shell"},{"type":"paragraph","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"When starting the Spark shell, specify:"}]},{"type":"directive","position":{"start":{"line":7}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"--packages"}]},{"type":"text","position":{"start":{"line":0}},"value":" option to download the MongoDB Spark Connector\npackage.  The following package is available:"}]},{"type":"list","position":{"start":{"line":3}},"children":[{"type":"listItem","position":{"start":{"line":3}},"children":[{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"mongo-spark-connector"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"the "},{"type":"literal","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"--conf"}]},{"type":"text","position":{"start":{"line":5}},"value":" option to configure the MongoDB Spark Connnector.\nThese settings configure the "},{"type":"literal","position":{"start":{"line":5}},"children":[{"type":"text","position":{"start":{"line":5}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":5}},"value":" object."}]},{"type":"directive","position":{"start":{"line":8}},"children":[{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"If you use "},{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":10}},"value":" to configure the Spark Connector, you\nmust prefix the settings appropriately. For details and other\navailable MongoDB Spark Connector options, see the\n"},{"type":"ref_role","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Configuring Spark"}],"domain":"std","name":"doc","target":"","flag":"","fileid":["/configuration",""]},{"type":"text","position":{"start":{"line":10}},"value":" guide."}]}],"domain":"","name":"note","argument":[]}]}],"enumtype":"unordered"}],"domain":"","name":"extract","argument":[]}],"fileid":"includes/extracts-command-line.yaml"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/includes/extracts/list-command-line-specification.rst"}]},{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"For example,"}]},{"type":"code","position":{"start":{"line":4}},"lang":"sh","copyable":true,"emphasize_lines":[],"value":"./bin/spark-shell --conf \"spark.mongodb.read.connection.uri=mongodb://127.0.0.1/test.myCollection?readPreference=primaryPreferred\" \\\n                  --conf \"spark.mongodb.write.connection.uri=mongodb://127.0.0.1/test.myCollection\" \\\n                  --packages org.mongodb.spark:mongo-spark-connector_2.12:10.4.1","linenos":false},{"type":"directive","position":{"start":{"line":10}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"The "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"spark.mongodb.read.connection.uri"}]},{"type":"text","position":{"start":{"line":0}},"value":" specifies the\nMongoDB server address ("},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"127.0.0.1"}]},{"type":"text","position":{"start":{"line":0}},"value":"), the database to connect\n("},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"test"}]},{"type":"text","position":{"start":{"line":0}},"value":"), and the collection ("},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"myCollection"}]},{"type":"text","position":{"start":{"line":0}},"value":") from which to read\ndata, and the read preference."}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"The "},{"type":"literal","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"spark.mongodb.write.connection.uri"}]},{"type":"text","position":{"start":{"line":4}},"value":" specifies the\nMongoDB server address ("},{"type":"literal","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"127.0.0.1"}]},{"type":"text","position":{"start":{"line":4}},"value":"), the database to connect\n("},{"type":"literal","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"test"}]},{"type":"text","position":{"start":{"line":4}},"value":"), and the collection ("},{"type":"literal","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"myCollection"}]},{"type":"text","position":{"start":{"line":4}},"value":") to which to write\ndata. Connects to port "},{"type":"literal","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"27017"}]},{"type":"text","position":{"start":{"line":4}},"value":" by default."}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"The "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"packages"}]},{"type":"text","position":{"start":{"line":8}},"value":" option specifies the Spark Connector's\nMaven coordinates, in the format "},{"type":"literal","position":{"start":{"line":8}},"children":[{"type":"text","position":{"start":{"line":8}},"value":"groupId:artifactId:version"}]},{"type":"text","position":{"start":{"line":8}},"value":"."}]}]}],"enumtype":"unordered"}],"domain":"","name":"extract","argument":[]}],"fileid":"includes/extracts-command-line.yaml"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":10}},"value":"/includes/extracts/list-configuration-explanation.rst"}]}],"domain":"","name":"extract","argument":[]}],"fileid":"includes/extracts-command-line.yaml"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":7}},"value":"/includes/extracts/command-line-start-spark-shell.rst"}]},{"type":"section","position":{"start":{"line":10}},"children":[{"type":"heading","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"Import the MongoDB Connector Package"}],"id":"import-the-mongodb-connector-package"},{"type":"paragraph","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"Enable MongoDB Connector-specific functions and implicits for your\n"},{"type":"literal","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":12}},"value":" and "},{"type":"literal","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":12}},"value":"Dataset"}]},{"type":"text","position":{"start":{"line":12}},"value":" objects by importing the following\npackage in the Spark shell:"}]},{"type":"code","position":{"start":{"line":16}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"import com.mongodb.spark._","linenos":false}]},{"type":"section","position":{"start":{"line":21}},"children":[{"type":"heading","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Connect to MongoDB"}],"id":"connect-to-mongodb"},{"type":"paragraph","position":{"start":{"line":23}},"children":[{"type":"text","position":{"start":{"line":23}},"value":"Connection to MongoDB happens automatically when a Dataset\naction requires a read from MongoDB or a\nwrite to MongoDB."}]},{"type":"target","position":{"start":{"line":27}},"children":[{"type":"target_identifier","position":{"start":{"line":27}},"children":[{"type":"text","position":{"start":{"line":30}},"value":"Self-Contained Scala Application"}],"ids":["scala-app"]}],"domain":"std","name":"label","html_id":"std-label-scala-app"}]}]},{"type":"section","position":{"start":{"line":30}},"children":[{"type":"heading","position":{"start":{"line":30}},"children":[{"type":"text","position":{"start":{"line":30}},"value":"Self-Contained Scala Application"}],"id":"self-contained-scala-application"},{"type":"section","position":{"start":{"line":33}},"children":[{"type":"heading","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"Dependency Management"}],"id":"dependency-management-1"},{"type":"directive","position":{"start":{"line":35}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Provide the Spark Core, Spark SQL, and MongoDB Spark Connector\ndependencies to your dependency management tool."}]}],"fileid":"includes/scala-java-dependencies.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":35}},"value":"/includes/scala-java-dependencies.rst"}]},{"type":"paragraph","position":{"start":{"line":37}},"children":[{"type":"text","position":{"start":{"line":37}},"value":"The following excerpt demonstrates how to include these dependencies in\na "},{"type":"reference","position":{"start":{"line":37}},"children":[{"type":"text","position":{"start":{"line":37}},"value":"SBT"}],"refuri":"http://www.scala-sbt.org/documentation.html"},{"type":"named_reference","position":{"start":{"line":37}},"refname":"SBT","refuri":"http://www.scala-sbt.org/documentation.html"},{"type":"text","position":{"start":{"line":37}},"value":" "},{"type":"literal","position":{"start":{"line":37}},"children":[{"type":"text","position":{"start":{"line":37}},"value":"build.scala"}]},{"type":"text","position":{"start":{"line":37}},"value":" file:"}]},{"type":"code","position":{"start":{"line":40}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"scalaVersion := \"2.12\",\nlibraryDependencies ++= Seq(\n  \"org.mongodb.spark\" %% \"mongo-spark-connector_2.12\" % \"10.4.1\",\n  \"org.apache.spark\" %% \"spark-core\" % \"3.3.1\",\n  \"org.apache.spark\" %% \"spark-sql\" % \"3.3.1\"\n)","linenos":false}]},{"type":"section","position":{"start":{"line":50}},"children":[{"type":"heading","position":{"start":{"line":50}},"children":[{"type":"text","position":{"start":{"line":50}},"value":"Configuration"}],"id":"configuration-1"},{"type":"directive","position":{"start":{"line":52}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"When specifying the Connector configuration via "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"SparkSession"}]},{"type":"text","position":{"start":{"line":0}},"value":", you\nmust prefix the settings appropriately. For details and other\navailable MongoDB Spark Connector options, see the\n"},{"type":"ref_role","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Configuring Spark"}],"domain":"std","name":"doc","target":"","flag":"","fileid":["/configuration",""]},{"type":"text","position":{"start":{"line":0}},"value":" guide."}]}],"fileid":"includes/scala-java-sparksession-config.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":52}},"value":"/includes/scala-java-sparksession-config.rst"}]},{"type":"code","position":{"start":{"line":54}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"package com.mongodb\n\nobject GettingStarted {\n\n  def main(args: Array[String]): Unit = {\n\n    /* Create the SparkSession.\n     * If config arguments are passed from the command line using --conf,\n     * parse args for the values to set.\n     */\n    import org.apache.spark.sql.SparkSession\n\n    val spark = SparkSession.builder()\n      .master(\"local\")\n      .appName(\"MongoSparkConnectorIntro\")\n      .config(\"spark.mongodb.read.connection.uri\", \"mongodb://127.0.0.1/test.myCollection\")\n      .config(\"spark.mongodb.write.connection.uri\", \"mongodb://127.0.0.1/test.myCollection\")\n      .getOrCreate()\n\n  }\n}","linenos":false}]}]},{"type":"section","position":{"start":{"line":79}},"children":[{"type":"heading","position":{"start":{"line":79}},"children":[{"type":"text","position":{"start":{"line":79}},"value":"Troubleshooting"}],"id":"troubleshooting"},{"type":"paragraph","position":{"start":{"line":81}},"children":[{"type":"text","position":{"start":{"line":81}},"value":"If you get a "},{"type":"literal","position":{"start":{"line":81}},"children":[{"type":"text","position":{"start":{"line":81}},"value":"java.net.BindException: Can't assign requested address"}]},{"type":"text","position":{"start":{"line":81}},"value":","}]},{"type":"list","position":{"start":{"line":83}},"children":[{"type":"listItem","position":{"start":{"line":83}},"children":[{"type":"paragraph","position":{"start":{"line":83}},"children":[{"type":"text","position":{"start":{"line":83}},"value":"Check to ensure that you do not have another Spark shell already\nrunning."}]}]},{"type":"listItem","position":{"start":{"line":83}},"children":[{"type":"paragraph","position":{"start":{"line":86}},"children":[{"type":"text","position":{"start":{"line":86}},"value":"Try setting the "},{"type":"literal","position":{"start":{"line":86}},"children":[{"type":"text","position":{"start":{"line":86}},"value":"SPARK_LOCAL_IP"}]},{"type":"text","position":{"start":{"line":86}},"value":" environment variable; e.g."}]},{"type":"code","position":{"start":{"line":88}},"lang":"sh","copyable":true,"emphasize_lines":[],"value":"export SPARK_LOCAL_IP=127.0.0.1","linenos":false}]},{"type":"listItem","position":{"start":{"line":83}},"children":[{"type":"paragraph","position":{"start":{"line":92}},"children":[{"type":"text","position":{"start":{"line":92}},"value":"Try including the following option when starting the Spark shell:"}]},{"type":"code","position":{"start":{"line":94}},"lang":"sh","copyable":true,"emphasize_lines":[],"value":"--driver-java-options \"-Djava.net.preferIPv4Stack=true\"","linenos":false}]}],"enumtype":"unordered"},{"type":"paragraph","position":{"start":{"line":98}},"children":[{"type":"text","position":{"start":{"line":98}},"value":"If you have errors running the examples in this tutorial, you may need\nto clear your local Ivy cache ("},{"type":"literal","position":{"start":{"line":98}},"children":[{"type":"text","position":{"start":{"line":98}},"value":"~/.ivy2/cache/org.mongodb.spark"}]},{"type":"text","position":{"start":{"line":98}},"value":" and\n"},{"type":"literal","position":{"start":{"line":98}},"children":[{"type":"text","position":{"start":{"line":98}},"value":"~/.ivy2/jars"}]},{"type":"text","position":{"start":{"line":98}},"value":")."}]}]}],"fileid":"scala/api.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":0}},"value":"/scala/api.rst"}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":29}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}}]},{"type":"section","position":{"start":{"line":48}},"children":[{"type":"heading","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"Tutorials"}],"id":"tutorials"},{"type":"list","position":{"start":{"line":50}},"children":[{"type":"listItem","position":{"start":{"line":50}},"children":[{"type":"paragraph","position":{"start":{"line":50}},"children":[{"type":"ref_role","position":{"start":{"line":50}},"children":[{"type":"text","position":{"start":{"line":50}},"value":"Write to MongoDB in Batch Mode"}],"domain":"std","name":"label","target":"batch-write-to-mongodb","flag":"","fileid":["batch-mode/batch-write","std-label-batch-write-to-mongodb"]}]}]},{"type":"listItem","position":{"start":{"line":50}},"children":[{"type":"paragraph","position":{"start":{"line":51}},"children":[{"type":"ref_role","position":{"start":{"line":51}},"children":[{"type":"text","position":{"start":{"line":51}},"value":"Read from MongoDB in Batch Mode"}],"domain":"std","name":"label","target":"batch-read-from-mongodb","flag":"","fileid":["batch-mode/batch-read","std-label-batch-read-from-mongodb"]}]}]},{"type":"listItem","position":{"start":{"line":50}},"children":[{"type":"paragraph","position":{"start":{"line":52}},"children":[{"type":"ref_role","position":{"start":{"line":52}},"children":[{"type":"text","position":{"start":{"line":52}},"value":"Write to MongoDB in Streaming Mode"}],"domain":"std","name":"label","target":"streaming-write-to-mongodb","flag":"","fileid":["streaming-mode/streaming-write","std-label-streaming-write-to-mongodb"]}]}]},{"type":"listItem","position":{"start":{"line":50}},"children":[{"type":"paragraph","position":{"start":{"line":53}},"children":[{"type":"ref_role","position":{"start":{"line":53}},"children":[{"type":"text","position":{"start":{"line":53}},"value":"Read from MongoDB in Streaming Mode"}],"domain":"std","name":"label","target":"streaming-read-from-mongodb","flag":"","fileid":["streaming-mode/streaming-read","std-label-streaming-read-from-mongodb"]}]}]}],"enumtype":"unordered"}]}]}],"fileid":"getting-started.txt","options":{"headings":[{"depth":2,"id":"prerequisites","title":[{"type":"text","position":{"start":{"line":18}},"value":"Prerequisites"}],"selector_ids":{}},{"depth":2,"id":"getting-started","title":[{"type":"text","position":{"start":{"line":27}},"value":"Getting Started"}],"selector_ids":{}},{"depth":2,"id":"tutorials","title":[{"type":"text","position":{"start":{"line":48}},"value":"Tutorials"}],"selector_ids":{}}]}},"build_id":"67a262d5234479c10483105c","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"getting-started.txt","static_assets":[],"updated_at":"2025-02-04T18:59:02.075Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d62","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/streaming-mode","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Streaming Mode"}],"ids":["streaming-mode"]}],"domain":"std","name":"label","html_id":"std-label-streaming-mode"},{"type":"section","position":{"start":{"line":4}},"children":[{"type":"heading","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Streaming Mode"}],"id":"streaming-mode"},{"type":"directive","position":{"start":{"line":6}},"children":[],"domain":"","name":"contents","argument":[{"type":"text","position":{"start":{"line":6}},"value":"On this page"}],"options":{"local":true,"backlinks":"none","depth":1,"class":"singlecol"}},{"type":"directive","position":{"start":{"line":12}},"children":[],"domain":"","name":"toctree","argument":[],"entries":[{"title":"Read","slug":"/streaming-mode/streaming-read"},{"title":"Write","slug":"/streaming-mode/streaming-write"}]},{"type":"section","position":{"start":{"line":18}},"children":[{"type":"heading","position":{"start":{"line":18}},"children":[{"type":"text","position":{"start":{"line":18}},"value":"Overview"}],"id":"overview"},{"type":"paragraph","position":{"start":{"line":20}},"children":[{"type":"text","position":{"start":{"line":20}},"value":"The Spark Connector supports streaming mode, which uses Spark Structured Streaming\nto process data as soon as it's available instead of waiting for a time interval to pass.\nSpark Structured Streaming is a data-stream-processing engine that you can access by using\nthe Dataset or DataFrame API."}]},{"type":"directive","position":{"start":{"line":25}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"Apache Spark contains two different stream-processing engines:"}]},{"type":"list","position":{"start":{"line":4}},"children":[{"type":"listItem","position":{"start":{"line":4}},"children":[{"type":"paragraph","position":{"start":{"line":4}},"children":[{"type":"reference","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Spark Streaming with DStreams"}],"refuri":"https://spark.apache.org/docs/latest/streaming-programming-guide.html"},{"type":"text","position":{"start":{"line":4}},"value":",\nnow an unsupported legacy engine"}]}]},{"type":"listItem","position":{"start":{"line":4}},"children":[{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"reference","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"Spark Structured Streaming"}],"refuri":"https://spark.apache.org/docs/latest/structured-streaming-programming-guide.html"},{"type":"text","position":{"start":{"line":7}},"value":"."}]}]}],"enumtype":"unordered"},{"type":"paragraph","position":{"start":{"line":9}},"children":[{"type":"text","position":{"start":{"line":9}},"value":"This guide pertains only to Spark Structured Streaming."}]}],"domain":"","name":"important","argument":[]}],"fileid":"includes/streaming-distinction.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":25}},"value":"includes/streaming-distinction.rst"}]},{"type":"paragraph","position":{"start":{"line":27}},"children":[{"type":"text","position":{"start":{"line":27}},"value":"The following sections show you how to use the Spark Connector to read data from\nMongoDB and write data to MongoDB in streaming mode:"}]},{"type":"list","position":{"start":{"line":30}},"children":[{"type":"listItem","position":{"start":{"line":30}},"children":[{"type":"paragraph","position":{"start":{"line":30}},"children":[{"type":"ref_role","position":{"start":{"line":30}},"children":[{"type":"text","position":{"start":{"line":30}},"value":"Read from MongoDB in Streaming Mode"}],"domain":"std","name":"label","target":"streaming-read-from-mongodb","flag":"","fileid":["streaming-mode/streaming-read","std-label-streaming-read-from-mongodb"]}]}]},{"type":"listItem","position":{"start":{"line":30}},"children":[{"type":"paragraph","position":{"start":{"line":31}},"children":[{"type":"ref_role","position":{"start":{"line":31}},"children":[{"type":"text","position":{"start":{"line":31}},"value":"Write to MongoDB in Streaming Mode"}],"domain":"std","name":"label","target":"streaming-write-to-mongodb","flag":"","fileid":["streaming-mode/streaming-write","std-label-streaming-write-to-mongodb"]}]}]}],"enumtype":"unordered"},{"type":"directive","position":{"start":{"line":33}},"children":[{"type":"paragraph","position":{"start":{"line":35}},"children":[{"type":"text","position":{"start":{"line":35}},"value":"To learn more about using Spark to process streams of data, see the\n"},{"type":"reference","position":{"start":{"line":35}},"children":[{"type":"text","position":{"start":{"line":35}},"value":"Spark Programming Guide"}],"refuri":"https://spark.apache.org/docs/latest/structured-streaming-programming-guide.html"},{"type":"text","position":{"start":{"line":35}},"value":"."}]}],"domain":"","name":"tip","argument":[{"type":"text","position":{"start":{"line":33}},"value":"Apache Spark Documentation"}]}]}]}],"fileid":"streaming-mode.txt","options":{"headings":[{"depth":2,"id":"overview","title":[{"type":"text","position":{"start":{"line":18}},"value":"Overview"}],"selector_ids":{}}]}},"build_id":"674f335303fff01a16b0b68f","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"streaming-mode.txt","static_assets":[],"updated_at":"2024-12-03T16:37:46.994Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d60","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/streaming-mode/streaming-write","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Write to MongoDB in Streaming Mode"}],"ids":["streaming-write-to-mongodb"]}],"domain":"std","name":"label","html_id":"std-label-streaming-write-to-mongodb"},{"type":"section","position":{"start":{"line":4}},"children":[{"type":"heading","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Write to MongoDB in Streaming Mode"}],"id":"write-to-mongodb-in-streaming-mode"},{"type":"directive","position":{"start":{"line":6}},"children":[],"domain":"","name":"toctree","argument":[],"options":{"caption":"Streaming Write Configuration Options"},"entries":[{"title":"Configuration","slug":"/streaming-mode/streaming-write-config"}]},{"type":"directive","position":{"start":{"line":11}},"children":[{"type":"directive","position":{"start":{"line":14}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"To write data to MongoDB, call the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"writeStream()"}]},{"type":"text","position":{"start":{"line":0}},"value":" method on your\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Dataset<Row>"}]},{"type":"text","position":{"start":{"line":0}},"value":" object. This method returns a\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":0}},"value":"\nobject, which you can use to specify the format and other configuration settings\nfor your streaming write operation."}]},{"type":"paragraph","position":{"start":{"line":6}},"children":[{"type":"text","position":{"start":{"line":6}},"value":"You must specify the following configuration settings to write to MongoDB:"}]},{"type":"directive","position":{"start":{"line":8}},"children":[{"type":"list","position":{"start":{"line":13}},"children":[{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":13}},"children":[{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"paragraph","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"Setting"}]}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"paragraph","position":{"start":{"line":14}},"children":[{"type":"text","position":{"start":{"line":14}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":16}},"children":[{"type":"listItem","position":{"start":{"line":16}},"children":[{"type":"paragraph","position":{"start":{"line":16}},"children":[{"type":"literal","position":{"start":{"line":16}},"children":[{"type":"text","position":{"start":{"line":16}},"value":"writeStream.format()"}]}]}]},{"type":"listItem","position":{"start":{"line":16}},"children":[{"type":"paragraph","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"Specifies the format of the underlying output data source. Use "},{"type":"literal","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":17}},"value":"\nto write to MongoDB."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":20}},"children":[{"type":"listItem","position":{"start":{"line":20}},"children":[{"type":"paragraph","position":{"start":{"line":20}},"children":[{"type":"literal","position":{"start":{"line":20}},"children":[{"type":"text","position":{"start":{"line":20}},"value":"writeStream.option()"}]}]}]},{"type":"listItem","position":{"start":{"line":20}},"children":[{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Specifies stream settings, including the MongoDB deployment\n"},{"type":"reference","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"connection string"}],"refuri":"https://www.mongodb.com/docs/manual/reference/connection-string/"},{"type":"text","position":{"start":{"line":21}},"value":",\nMongoDB database and collection, and checkpoint directory."}]},{"type":"paragraph","position":{"start":{"line":25}},"children":[{"type":"text","position":{"start":{"line":25}},"value":"For a list of write stream configuration options, see\nthe "},{"type":"ref_role","position":{"start":{"line":25}},"children":[{"type":"text","position":{"start":{"line":25}},"value":"Streaming Write Configuration Options"}],"domain":"std","name":"label","target":"spark-streaming-write-conf","flag":"","fileid":["streaming-mode/streaming-write-config","std-label-spark-streaming-write-conf"]},{"type":"text","position":{"start":{"line":25}},"value":" guide."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":28}},"children":[{"type":"listItem","position":{"start":{"line":28}},"children":[{"type":"paragraph","position":{"start":{"line":28}},"children":[{"type":"literal","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"writeStream.outputMode()"}]}]}]},{"type":"listItem","position":{"start":{"line":28}},"children":[{"type":"paragraph","position":{"start":{"line":29}},"children":[{"type":"text","position":{"start":{"line":29}},"value":"Specifies how data of a streaming DataFrame is\nwritten to a streaming sink. To view a list of all\nsupported output modes, see the "},{"type":"reference","position":{"start":{"line":29}},"children":[{"type":"text","position":{"start":{"line":29}},"value":"Java outputMode documentation"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/streaming/DataStreamWriter.html#outputMode-java.lang.String-"},{"type":"text","position":{"start":{"line":29}},"value":"."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":33}},"children":[{"type":"listItem","position":{"start":{"line":33}},"children":[{"type":"paragraph","position":{"start":{"line":33}},"children":[{"type":"literal","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"writeStream.trigger()"}]}]}]},{"type":"listItem","position":{"start":{"line":33}},"children":[{"type":"paragraph","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"Specifies how often the Spark Connector writes results\nto the streaming sink. Call this method on the "},{"type":"literal","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":34}},"value":" object\nyou create from the "},{"type":"literal","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"DataStreamReader"}]},{"type":"text","position":{"start":{"line":34}},"value":" you configure."}]},{"type":"paragraph","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"To use continuous processing, pass "},{"type":"literal","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"Trigger.Continuous(<time value>)"}]},{"type":"text","position":{"start":{"line":38}},"value":"\nas an argument, where "},{"type":"literal","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"<time value>"}]},{"type":"text","position":{"start":{"line":38}},"value":" is how often you want the Spark\nConnector to asynchronously checkpoint. If you\npass any other static method of the "},{"type":"literal","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"Trigger"}]},{"type":"text","position":{"start":{"line":38}},"value":" class, or if you don't\ncall "},{"type":"literal","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"writeStream.trigger()"}]},{"type":"text","position":{"start":{"line":38}},"value":", the Spark connector uses\nmicro-batch processing instead."}]},{"type":"paragraph","position":{"start":{"line":45}},"children":[{"type":"text","position":{"start":{"line":45}},"value":"To view a list of all supported processing policies, see the "},{"type":"reference","position":{"start":{"line":45}},"children":[{"type":"text","position":{"start":{"line":45}},"value":"Java\ntrigger documentation"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/streaming/Trigger.html"},{"type":"text","position":{"start":{"line":45}},"value":"."}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"stub-columns":1,"widths":"10 40"}},{"type":"paragraph","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"The following code snippet shows how to use the previous\nconfiguration settings to stream data to MongoDB:"}]},{"type":"code","position":{"start":{"line":51}},"lang":"java","copyable":true,"emphasize_lines":[],"value":"<streaming DataFrame>.writeStream()\n  .format(\"mongodb\")\n  .option(\"spark.mongodb.connection.uri\", <mongodb-connection-string>)\n  .option(\"spark.mongodb.database\", <database-name>)\n  .option(\"spark.mongodb.collection\", <collection-name>)\n  .outputMode(\"append\");","linenos":false},{"type":"paragraph","position":{"start":{"line":61}},"children":[{"type":"text","position":{"start":{"line":61}},"value":"For a complete list of methods, see the\n"},{"type":"reference","position":{"start":{"line":61}},"children":[{"type":"text","position":{"start":{"line":61}},"value":"Java Structured Streaming reference"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/streaming/DataStreamWriter.html"},{"type":"text","position":{"start":{"line":61}},"value":"."}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":11}},"value":"Java (Sync)"}],"options":{"tabid":"java-sync"}},{"type":"directive","position":{"start":{"line":81}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"To write data to MongoDB, call the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"writeStream"}]},{"type":"text","position":{"start":{"line":0}},"value":" function on your\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":0}},"value":" object. This function returns a\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":0}},"value":"\nobject, which you can use to specify the format and other configuration settings for your\nstreaming write operation."}]},{"type":"paragraph","position":{"start":{"line":6}},"children":[{"type":"text","position":{"start":{"line":6}},"value":"You must specify the following configuration settings to write to MongoDB:"}]},{"type":"directive","position":{"start":{"line":8}},"children":[{"type":"list","position":{"start":{"line":13}},"children":[{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":13}},"children":[{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"paragraph","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"Setting"}]}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"paragraph","position":{"start":{"line":14}},"children":[{"type":"text","position":{"start":{"line":14}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":16}},"children":[{"type":"listItem","position":{"start":{"line":16}},"children":[{"type":"paragraph","position":{"start":{"line":16}},"children":[{"type":"literal","position":{"start":{"line":16}},"children":[{"type":"text","position":{"start":{"line":16}},"value":"writeStream.format()"}]}]}]},{"type":"listItem","position":{"start":{"line":16}},"children":[{"type":"paragraph","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"Specifies the format of the underlying output data source. Use "},{"type":"literal","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":17}},"value":"\nto write to MongoDB."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":20}},"children":[{"type":"listItem","position":{"start":{"line":20}},"children":[{"type":"paragraph","position":{"start":{"line":20}},"children":[{"type":"literal","position":{"start":{"line":20}},"children":[{"type":"text","position":{"start":{"line":20}},"value":"writeStream.option()"}]}]}]},{"type":"listItem","position":{"start":{"line":20}},"children":[{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Specifies stream settings, including the MongoDB deployment\n"},{"type":"reference","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"connection string"}],"refuri":"https://www.mongodb.com/docs/manual/reference/connection-string/"},{"type":"text","position":{"start":{"line":21}},"value":",\nMongoDB database and collection, and checkpoint directory."}]},{"type":"paragraph","position":{"start":{"line":25}},"children":[{"type":"text","position":{"start":{"line":25}},"value":"For a list of write stream configuration options, see\nthe "},{"type":"ref_role","position":{"start":{"line":25}},"children":[{"type":"text","position":{"start":{"line":25}},"value":"Streaming Write Configuration Options"}],"domain":"std","name":"label","target":"spark-streaming-write-conf","flag":"","fileid":["streaming-mode/streaming-write-config","std-label-spark-streaming-write-conf"]},{"type":"text","position":{"start":{"line":25}},"value":" guide."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":28}},"children":[{"type":"listItem","position":{"start":{"line":28}},"children":[{"type":"paragraph","position":{"start":{"line":28}},"children":[{"type":"literal","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"writeStream.outputMode()"}]}]}]},{"type":"listItem","position":{"start":{"line":28}},"children":[{"type":"paragraph","position":{"start":{"line":29}},"children":[{"type":"text","position":{"start":{"line":29}},"value":"Specifies how the Spark Connector writes a streaming DataFrame\nto a streaming sink. To view a list of all\nsupported output modes, see the "},{"type":"reference","position":{"start":{"line":29}},"children":[{"type":"text","position":{"start":{"line":29}},"value":"pyspark outputMode documentation"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.ss/api/pyspark.sql.streaming.DataStreamWriter.outputMode.html#pyspark.sql.streaming.DataStreamWriter.outputMode"},{"type":"text","position":{"start":{"line":29}},"value":"."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":33}},"children":[{"type":"listItem","position":{"start":{"line":33}},"children":[{"type":"paragraph","position":{"start":{"line":33}},"children":[{"type":"literal","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"writeStream.trigger()"}]}]}]},{"type":"listItem","position":{"start":{"line":33}},"children":[{"type":"paragraph","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"Specifies how often the Spark Connector writes results\nto the streaming sink. Call this method on the "},{"type":"literal","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":34}},"value":" object\nyou create from the "},{"type":"literal","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"DataStreamReader"}]},{"type":"text","position":{"start":{"line":34}},"value":" you configure."}]},{"type":"paragraph","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"To use continuous processing, pass the function a time value\nusing the "},{"type":"literal","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"continuous"}]},{"type":"text","position":{"start":{"line":38}},"value":" parameter.\nIf you pass any other named parameter, or if you don't\ncall "},{"type":"literal","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"writeStream.trigger()"}]},{"type":"text","position":{"start":{"line":38}},"value":", the Spark Connector uses\nmicro-batch processing instead."}]},{"type":"paragraph","position":{"start":{"line":44}},"children":[{"type":"text","position":{"start":{"line":44}},"value":"To view a list of all supported processing policies, see\nthe "},{"type":"reference","position":{"start":{"line":44}},"children":[{"type":"text","position":{"start":{"line":44}},"value":"pyspark trigger documentation"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.ss/api/pyspark.sql.streaming.DataStreamWriter.trigger.html"},{"type":"text","position":{"start":{"line":44}},"value":"."}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"stub-columns":1,"widths":"10 40"}},{"type":"paragraph","position":{"start":{"line":47}},"children":[{"type":"text","position":{"start":{"line":47}},"value":"The following code snippet shows how to use the previous\nconfiguration settings to stream data to MongoDB:"}]},{"type":"code","position":{"start":{"line":50}},"lang":"python","copyable":true,"emphasize_lines":[],"value":"<streaming DataFrame>.writeStream \\\n  .format(\"mongodb\") \\\n  .option(\"spark.mongodb.connection.uri\", <mongodb-connection-string>) \\\n  .option(\"spark.mongodb.database\", <database-name>) \\\n  .option(\"spark.mongodb.collection\", <collection-name>) \\\n  .outputMode(\"append\")","linenos":false},{"type":"paragraph","position":{"start":{"line":60}},"children":[{"type":"text","position":{"start":{"line":60}},"value":"For a complete list of functions, see the\n"},{"type":"reference","position":{"start":{"line":60}},"children":[{"type":"text","position":{"start":{"line":60}},"value":"pyspark Structured Streaming reference"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.ss/api/pyspark.sql.streaming.DataStreamWriter.html"},{"type":"text","position":{"start":{"line":60}},"value":"."}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":11}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":147}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"To write data to MongoDB, call the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"write"}]},{"type":"text","position":{"start":{"line":0}},"value":" method on your\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":0}},"value":" object. This method returns a\n"},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":0}},"value":"\nobject, which you can use to specify the format and other configuration settings\nfor your streaming write operation."}]},{"type":"paragraph","position":{"start":{"line":6}},"children":[{"type":"text","position":{"start":{"line":6}},"value":"You must specify the following configuration settings to write to MongoDB:"}]},{"type":"directive","position":{"start":{"line":8}},"children":[{"type":"list","position":{"start":{"line":13}},"children":[{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":13}},"children":[{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"paragraph","position":{"start":{"line":13}},"children":[{"type":"text","position":{"start":{"line":13}},"value":"Setting"}]}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"paragraph","position":{"start":{"line":14}},"children":[{"type":"text","position":{"start":{"line":14}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":16}},"children":[{"type":"listItem","position":{"start":{"line":16}},"children":[{"type":"paragraph","position":{"start":{"line":16}},"children":[{"type":"literal","position":{"start":{"line":16}},"children":[{"type":"text","position":{"start":{"line":16}},"value":"writeStream.format()"}]}]}]},{"type":"listItem","position":{"start":{"line":16}},"children":[{"type":"paragraph","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"Specifies the format of the underlying output data source. Use "},{"type":"literal","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":17}},"value":"\nto write to MongoDB."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":20}},"children":[{"type":"listItem","position":{"start":{"line":20}},"children":[{"type":"paragraph","position":{"start":{"line":20}},"children":[{"type":"literal","position":{"start":{"line":20}},"children":[{"type":"text","position":{"start":{"line":20}},"value":"writeStream.option()"}]}]}]},{"type":"listItem","position":{"start":{"line":20}},"children":[{"type":"paragraph","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"Specifies stream settings, including the MongoDB deployment\n"},{"type":"reference","position":{"start":{"line":21}},"children":[{"type":"text","position":{"start":{"line":21}},"value":"connection string"}],"refuri":"https://www.mongodb.com/docs/manual/reference/connection-string/"},{"type":"text","position":{"start":{"line":21}},"value":",\nMongoDB database and collection, and checkpoint directory."}]},{"type":"paragraph","position":{"start":{"line":25}},"children":[{"type":"text","position":{"start":{"line":25}},"value":"For a list of write stream configuration options, see\nthe "},{"type":"ref_role","position":{"start":{"line":25}},"children":[{"type":"text","position":{"start":{"line":25}},"value":"Streaming Write Configuration Options"}],"domain":"std","name":"label","target":"spark-streaming-write-conf","flag":"","fileid":["streaming-mode/streaming-write-config","std-label-spark-streaming-write-conf"]},{"type":"text","position":{"start":{"line":25}},"value":" guide."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":28}},"children":[{"type":"listItem","position":{"start":{"line":28}},"children":[{"type":"paragraph","position":{"start":{"line":28}},"children":[{"type":"literal","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"writeStream.outputMode()"}]}]}]},{"type":"listItem","position":{"start":{"line":28}},"children":[{"type":"paragraph","position":{"start":{"line":29}},"children":[{"type":"text","position":{"start":{"line":29}},"value":"Specifies how the Spark Connector writes a streaming DataFrame\nto a streaming sink. To view a list of all supported output modes, see\n"},{"type":"reference","position":{"start":{"line":29}},"children":[{"type":"text","position":{"start":{"line":29}},"value":"Scala outputMode documentation"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/streaming/DataStreamWriter.html#outputMode(outputMode:String):org.apache.spark.sql.streaming.DataStreamWriter[T]"},{"type":"text","position":{"start":{"line":29}},"value":"."}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":13}},"children":[{"type":"list","position":{"start":{"line":33}},"children":[{"type":"listItem","position":{"start":{"line":33}},"children":[{"type":"paragraph","position":{"start":{"line":33}},"children":[{"type":"literal","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"writeStream.trigger()"}]}]}]},{"type":"listItem","position":{"start":{"line":33}},"children":[{"type":"paragraph","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"Specifies how often the Spark Connector writes results\nto the streaming sink. Call this method on the "},{"type":"literal","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":34}},"value":" object\nyou create from the "},{"type":"literal","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"DataStreamReader"}]},{"type":"text","position":{"start":{"line":34}},"value":" you configure."}]},{"type":"paragraph","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"To use continuous processing, pass "},{"type":"literal","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"Trigger.Continuous(<time value>)"}]},{"type":"text","position":{"start":{"line":38}},"value":"\nas an argument, where "},{"type":"literal","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"<time value>"}]},{"type":"text","position":{"start":{"line":38}},"value":" is how often you want the Spark\nConnector to asynchronously checkpoint. If you\npass any other static method of the "},{"type":"literal","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"Trigger"}]},{"type":"text","position":{"start":{"line":38}},"value":" class, or if you don't\ncall "},{"type":"literal","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"writeStream.trigger()"}]},{"type":"text","position":{"start":{"line":38}},"value":", the Spark connector uses\nmicro-batch processing instead."}]},{"type":"paragraph","position":{"start":{"line":45}},"children":[{"type":"text","position":{"start":{"line":45}},"value":"To view a list of all\nsupported processing policies, see the "},{"type":"reference","position":{"start":{"line":45}},"children":[{"type":"text","position":{"start":{"line":45}},"value":"Scala trigger documentation"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/streaming/DataStreamWriter.html#trigger(trigger:org.apache.spark.sql.streaming.Trigger):org.apache.spark.sql.streaming.DataStreamWriter[T]"},{"type":"text","position":{"start":{"line":45}},"value":"."}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"stub-columns":1,"widths":"10 40"}},{"type":"paragraph","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"The following code snippet shows how to use the previous\nconfiguration settings to stream data to MongoDB:"}]},{"type":"code","position":{"start":{"line":51}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"<streaming DataFrame>.writeStream\n  .format(\"mongodb\")\n  .option(\"spark.mongodb.connection.uri\", <mongodb-connection-string>)\n  .option(\"spark.mongodb.database\", <database-name>)\n  .option(\"spark.mongodb.collection\", <collection-name>)\n  .outputMode(\"append\")","linenos":false},{"type":"paragraph","position":{"start":{"line":61}},"children":[{"type":"text","position":{"start":{"line":61}},"value":"For a complete list of methods, see the\n"},{"type":"reference","position":{"start":{"line":61}},"children":[{"type":"text","position":{"start":{"line":61}},"value":"Scala Structured Streaming reference"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/streaming/DataStreamWriter.html"},{"type":"text","position":{"start":{"line":61}},"value":"."}]}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":11}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}},{"type":"section","position":{"start":{"line":216}},"children":[{"type":"heading","position":{"start":{"line":216}},"children":[{"type":"text","position":{"start":{"line":216}},"value":"Example"}],"id":"example"},{"type":"paragraph","position":{"start":{"line":218}},"children":[{"type":"text","position":{"start":{"line":218}},"value":"The following example shows how to stream data from a "},{"type":"role","position":{"start":{"line":218}},"children":[{"type":"text","position":{"start":{"line":218}},"value":"CSV (comma-separated values)"}],"domain":"","name":"abbr","target":"","flag":""},{"type":"text","position":{"start":{"line":218}},"value":"\nfile to MongoDB:"}]},{"type":"directive","position":{"start":{"line":221}},"children":[{"type":"directive","position":{"start":{"line":224}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Create a "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataStreamReader"}]},{"type":"text","position":{"start":{"line":0}},"value":" object that reads from the CSV file."}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"To create a "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":2}},"value":" object, call the "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"writeStream()"}]},{"type":"text","position":{"start":{"line":2}},"value":" method\non the streaming "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"Dataset<Row>"}]},{"type":"text","position":{"start":{"line":2}},"value":" that you created with the\n"},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataStreamReader"}]},{"type":"text","position":{"start":{"line":2}},"value":". Use the "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"format()"}]},{"type":"text","position":{"start":{"line":2}},"value":" method to specify "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":2}},"value":" as\nthe underlying data format."}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"Call the "},{"type":"literal","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"start()"}]},{"type":"text","position":{"start":{"line":7}},"value":" method on the "},{"type":"literal","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":7}},"value":"\nobject to begin the stream."}]}]}],"enumtype":"arabic"},{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"As the connector reads data from the CSV file, it adds that\ndata to MongoDB according to the "},{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"outputMode"}]},{"type":"text","position":{"start":{"line":10}},"value":" you specify."}]},{"type":"code","position":{"start":{"line":13}},"lang":"java","copyable":true,"emphasize_lines":[],"value":"// create a local SparkSession\nSparkSession spark = SparkSession.builder()\n  .appName(\"writeExample\")\n  .master(\"spark://spark-master:<port>\")\n  .config(\"spark.jars\", \"<mongo-spark-connector-JAR-file-name>\")\n  .getOrCreate();\n\n// define a streaming query\nDataStreamWriter<Row> dataStreamWriter = spark.readStream()\n  .format(\"csv\")\n  .option(\"header\", \"true\")\n  .schema(\"<csv-schema>\")\n  .load(\"<csv-file-name>\")\n  // manipulate your streaming data\n  .writeStream()\n  .format(\"mongodb\")\n  .option(\"checkpointLocation\", \"/tmp/\")\n  .option(\"forceDeleteTempCheckpointLocation\", \"true\")\n  .option(\"spark.mongodb.connection.uri\", \"<mongodb-connection-string>\")\n  .option(\"spark.mongodb.database\", \"<database-name>\")\n  .option(\"spark.mongodb.collection\", \"<collection-name>\")\n  .outputMode(\"append\");\n\n// run the query\nStreamingQuery query = dataStreamWriter.start();","linenos":false}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":221}},"value":"Java (Sync)"}],"options":{"tabid":"java-sync"}},{"type":"directive","position":{"start":{"line":269}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Create a "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataStreamReader"}]},{"type":"text","position":{"start":{"line":0}},"value":" object that reads from the CSV file."}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"To create a "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":2}},"value":" object, call the "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"writeStream"}]},{"type":"text","position":{"start":{"line":2}},"value":" function\non the streaming "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":2}},"value":" that you created with the\n"},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataStreamReader"}]},{"type":"text","position":{"start":{"line":2}},"value":". Use the "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"format()"}]},{"type":"text","position":{"start":{"line":2}},"value":" function to specify "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":2}},"value":" as\nthe underlying data format."}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"Call the "},{"type":"literal","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"start()"}]},{"type":"text","position":{"start":{"line":7}},"value":" function on the "},{"type":"literal","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":7}},"value":"\ninstance to begin the stream."}]}]}],"enumtype":"arabic"},{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"As the connector reads data from the CSV file, it adds that\ndata to MongoDB according to the "},{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"outputMode"}]},{"type":"text","position":{"start":{"line":10}},"value":" you specify."}]},{"type":"code","position":{"start":{"line":13}},"lang":"python","copyable":true,"emphasize_lines":[],"value":"# create a local SparkSession\nspark = SparkSession.builder \\\n  .appName(\"writeExample\") \\\n  .master(\"spark://spark-master:<port>\") \\\n  .config(\"spark.jars\", \"<mongo-spark-connector-JAR-file-name>\") \\\n  .getOrCreate()\n\n# define a streaming query\ndataStreamWriter = (spark.readStream\n  .format(\"csv\")\n  .option(\"header\", \"true\")\n  .schema(<csv-schema>)\n  .load(<csv-file-name>)\n  # manipulate your streaming data\n  .writeStream\n  .format(\"mongodb\")\n  .option(\"checkpointLocation\", \"/tmp/pyspark/\")\n  .option(\"forceDeleteTempCheckpointLocation\", \"true\")\n  .option(\"spark.mongodb.connection.uri\", <mongodb-connection-string>)\n  .option(\"spark.mongodb.database\", <database-name>)\n  .option(\"spark.mongodb.collection\", <collection-name>)\n  .outputMode(\"append\")\n)\n\n# run the query\nquery = dataStreamWriter.start()","linenos":false}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":221}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":315}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Create a "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataStreamReader"}]},{"type":"text","position":{"start":{"line":0}},"value":" object that reads from the CSV file."}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"To create a "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":2}},"value":" object, call the "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"writeStream"}]},{"type":"text","position":{"start":{"line":2}},"value":" method\non the streaming "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataFrame"}]},{"type":"text","position":{"start":{"line":2}},"value":" that you created with the\n"},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataStreamReader"}]},{"type":"text","position":{"start":{"line":2}},"value":". Use the "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"format()"}]},{"type":"text","position":{"start":{"line":2}},"value":" method to specify "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"mongodb"}]},{"type":"text","position":{"start":{"line":2}},"value":" as\nthe underlying data format."}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"Call the "},{"type":"literal","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"start()"}]},{"type":"text","position":{"start":{"line":7}},"value":" method on the "},{"type":"literal","position":{"start":{"line":7}},"children":[{"type":"text","position":{"start":{"line":7}},"value":"DataStreamWriter"}]},{"type":"text","position":{"start":{"line":7}},"value":"\ninstance to begin the stream."}]}]}],"enumtype":"arabic"},{"type":"paragraph","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"As the connector reads data from the CSV file, it adds that\ndata to MongoDB according to the "},{"type":"literal","position":{"start":{"line":10}},"children":[{"type":"text","position":{"start":{"line":10}},"value":"outputMode"}]},{"type":"text","position":{"start":{"line":10}},"value":" you specify."}]},{"type":"code","position":{"start":{"line":13}},"lang":"scala","copyable":true,"emphasize_lines":[],"value":"// create a local SparkSession\nval spark = SparkSession.builder\n  .appName(\"writeExample\")\n  .master(\"spark://spark-master:<port>\")\n  .config(\"spark.jars\", \"<mongo-spark-connector-JAR-file-name>\")\n  .getOrCreate()\n\n// define a streaming query\nval dataStreamWriter = spark.readStream\n  .format(\"csv\")\n  .option(\"header\", \"true\")\n  .schema(<csv-schema>)\n  .load(<csv-file-name>)\n  // manipulate your streaming data\n  .writeStream\n  .format(\"mongodb\")\n  .option(\"checkpointLocation\", \"/tmp/\")\n  .option(\"forceDeleteTempCheckpointLocation\", \"true\")\n  .option(\"spark.mongodb.connection.uri\", <mongodb-connection-string>)\n  .option(\"spark.mongodb.database\", <database-name>)\n  .option(\"spark.mongodb.collection\", <collection-name>)\n  .outputMode(\"append\")\n\n// run the query\nval query = dataStreamWriter.start()","linenos":false}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":221}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}}]},{"type":"section","position":{"start":{"line":362}},"children":[{"type":"heading","position":{"start":{"line":362}},"children":[{"type":"text","position":{"start":{"line":362}},"value":"API Documentation"}],"id":"api-documentation"},{"type":"paragraph","position":{"start":{"line":364}},"children":[{"type":"text","position":{"start":{"line":364}},"value":"To learn more about the types used in these examples, see the following Apache Spark\nAPI documentation:"}]},{"type":"directive","position":{"start":{"line":367}},"children":[{"type":"directive","position":{"start":{"line":369}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Dataset<T>"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/Dataset.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":1}},"children":[{"type":"reference","position":{"start":{"line":1}},"children":[{"type":"text","position":{"start":{"line":1}},"value":"DataStreamReader"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/streaming/DataStreamReader.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"reference","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataStreamWriter"}],"refuri":"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/streaming/DataStreamWriter.html"}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":367}},"value":"Java (Sync)"}],"options":{"tabid":"java-sync"}},{"type":"directive","position":{"start":{"line":376}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"DataFrame"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.sql/dataframe.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":1}},"children":[{"type":"reference","position":{"start":{"line":1}},"children":[{"type":"text","position":{"start":{"line":1}},"value":"DataStreamReader"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.ss/api/pyspark.sql.streaming.DataStreamReader.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"reference","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataStreamWriter"}],"refuri":"https://spark.apache.org/docs/latest/api/python/reference/pyspark.ss/api/pyspark.sql.streaming.DataStreamWriter.html"}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":367}},"value":"Python"}],"options":{"tabid":"python"}},{"type":"directive","position":{"start":{"line":383}},"children":[{"type":"list","position":{"start":{"line":0}},"children":[{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"reference","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"Dataset[T]"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/Dataset.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":1}},"children":[{"type":"reference","position":{"start":{"line":1}},"children":[{"type":"text","position":{"start":{"line":1}},"value":"DataStreamReader"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/streaming/DataStreamReader.html"}]}]},{"type":"listItem","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"reference","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"DataStreamWriter"}],"refuri":"https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/streaming/DataStreamWriter.html"}]}]}],"enumtype":"unordered"}],"domain":"","name":"tab","argument":[{"type":"text","position":{"start":{"line":367}},"value":"Scala"}],"options":{"tabid":"scala"}}],"domain":"","name":"tabs","argument":[],"options":{"tabset":"drivers"}}]}]}],"fileid":"streaming-mode/streaming-write.txt"},"build_id":"674f335303fff01a16b0b68f","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"streaming-mode/streaming-write.txt","static_assets":[],"updated_at":"2024-12-03T16:37:46.994Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d57","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/streaming-mode/streaming-write-config","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Streaming Write Configuration Options"}],"ids":["spark-streaming-write-conf"]}],"domain":"std","name":"label","html_id":"std-label-spark-streaming-write-conf"},{"type":"section","position":{"start":{"line":4}},"children":[{"type":"heading","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Streaming Write Configuration Options"}],"id":"streaming-write-configuration-options"},{"type":"directive","position":{"start":{"line":6}},"children":[],"domain":"","name":"contents","argument":[{"type":"text","position":{"start":{"line":6}},"value":"On this page"}],"options":{"local":true,"backlinks":"none","depth":1,"class":"singlecol"}},{"type":"target","position":{"start":{"line":12}},"children":[{"type":"target_identifier","position":{"start":{"line":12}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"Overview"}],"ids":["spark-streaming-output-conf"]}],"domain":"std","name":"label","html_id":"std-label-spark-streaming-output-conf"},{"type":"section","position":{"start":{"line":15}},"children":[{"type":"heading","position":{"start":{"line":15}},"children":[{"type":"text","position":{"start":{"line":15}},"value":"Overview"}],"id":"overview"},{"type":"paragraph","position":{"start":{"line":17}},"children":[{"type":"text","position":{"start":{"line":17}},"value":"You can configure the following properties when writing data to MongoDB in streaming mode."}]},{"type":"directive","position":{"start":{"line":19}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"directive","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"If you use "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"SparkConf"}]},{"type":"text","position":{"start":{"line":2}},"value":" to set the connector's write configurations,\nprefix "},{"type":"literal","position":{"start":{"line":2}},"children":[{"type":"text","position":{"start":{"line":2}},"value":"spark.mongodb.write."}]},{"type":"text","position":{"start":{"line":2}},"value":" to each property."}]}],"domain":"","name":"note","argument":[]}],"fileid":"includes/conf-write-prefix.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":19}},"value":"/includes/conf-write-prefix.rst"}]},{"type":"directive","position":{"start":{"line":21}},"children":[{"type":"list","position":{"start":{"line":25}},"children":[{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":25}},"children":[{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"paragraph","position":{"start":{"line":25}},"children":[{"type":"text","position":{"start":{"line":25}},"value":"Property name"}]}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"paragraph","position":{"start":{"line":26}},"children":[{"type":"text","position":{"start":{"line":26}},"value":"Description"}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":28}},"children":[{"type":"listItem","position":{"start":{"line":28}},"children":[{"type":"paragraph","position":{"start":{"line":28}},"children":[{"type":"literal","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"connection.uri"}]}]}]},{"type":"listItem","position":{"start":{"line":28}},"children":[{"type":"line_block","position":{"start":{"line":28}},"children":[{"type":"line","position":{"start":{"line":28}},"children":[{"type":"strong","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"Required."}]}]},{"type":"line","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"The connection string configuration key."}]},{"type":"line","position":{"start":{"line":28}},"children":[]},{"type":"line","position":{"start":{"line":28}},"children":[{"type":"strong","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":28}},"value":" "},{"type":"literal","position":{"start":{"line":28}},"children":[{"type":"text","position":{"start":{"line":28}},"value":"mongodb://localhost:27017/"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":34}},"children":[{"type":"listItem","position":{"start":{"line":34}},"children":[{"type":"paragraph","position":{"start":{"line":34}},"children":[{"type":"literal","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"database"}]}]}]},{"type":"listItem","position":{"start":{"line":34}},"children":[{"type":"line_block","position":{"start":{"line":34}},"children":[{"type":"line","position":{"start":{"line":34}},"children":[{"type":"strong","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"Required."}]}]},{"type":"line","position":{"start":{"line":34}},"children":[{"type":"text","position":{"start":{"line":34}},"value":"The database name configuration."}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":38}},"children":[{"type":"listItem","position":{"start":{"line":38}},"children":[{"type":"paragraph","position":{"start":{"line":38}},"children":[{"type":"literal","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"collection"}]}]}]},{"type":"listItem","position":{"start":{"line":38}},"children":[{"type":"line_block","position":{"start":{"line":38}},"children":[{"type":"line","position":{"start":{"line":38}},"children":[{"type":"strong","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"Required."}]}]},{"type":"line","position":{"start":{"line":38}},"children":[{"type":"text","position":{"start":{"line":38}},"value":"The collection name configuration."}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":42}},"children":[{"type":"listItem","position":{"start":{"line":42}},"children":[{"type":"paragraph","position":{"start":{"line":42}},"children":[{"type":"literal","position":{"start":{"line":42}},"children":[{"type":"text","position":{"start":{"line":42}},"value":"comment"}]}]}]},{"type":"listItem","position":{"start":{"line":42}},"children":[{"type":"line_block","position":{"start":{"line":42}},"children":[{"type":"line","position":{"start":{"line":42}},"children":[{"type":"text","position":{"start":{"line":42}},"value":"The comment to append to the write operation. Comments appear in the\n"},{"type":"reference","position":{"start":{"line":42}},"children":[{"type":"text","position":{"start":{"line":42}},"value":"output of the Database Profiler."}],"refuri":"https://www.mongodb.com/docs/manual/reference/database-profiler/"}]},{"type":"line","position":{"start":{"line":42}},"children":[]},{"type":"line","position":{"start":{"line":42}},"children":[{"type":"strong","position":{"start":{"line":42}},"children":[{"type":"text","position":{"start":{"line":42}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":42}},"value":" None"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":48}},"children":[{"type":"listItem","position":{"start":{"line":48}},"children":[{"type":"paragraph","position":{"start":{"line":48}},"children":[{"type":"literal","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"mongoClientFactory"}]}]}]},{"type":"listItem","position":{"start":{"line":48}},"children":[{"type":"line_block","position":{"start":{"line":48}},"children":[{"type":"line","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"MongoClientFactory configuration key."}]},{"type":"line","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"You can specify a custom implementation that must implement the\n"},{"type":"literal","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"com.mongodb.spark.sql.connector.connection.MongoClientFactory"}]},{"type":"text","position":{"start":{"line":48}},"value":"\ninterface."}]},{"type":"line","position":{"start":{"line":48}},"children":[]},{"type":"line","position":{"start":{"line":48}},"children":[{"type":"strong","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":48}},"value":" "},{"type":"literal","position":{"start":{"line":48}},"children":[{"type":"text","position":{"start":{"line":48}},"value":"com.mongodb.spark.sql.connector.connection.DefaultMongoClientFactory"}]}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":56}},"children":[{"type":"listItem","position":{"start":{"line":56}},"children":[{"type":"paragraph","position":{"start":{"line":56}},"children":[{"type":"literal","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"checkpointLocation"}]}]}]},{"type":"listItem","position":{"start":{"line":56}},"children":[{"type":"line_block","position":{"start":{"line":56}},"children":[{"type":"line","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"The absolute file path of the directory to which the connector writes checkpoint\ninformation."}]},{"type":"line","position":{"start":{"line":56}},"children":[]},{"type":"line","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"For more information about checkpoints, see the\n"},{"type":"reference","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"Spark Structured Streaming Programming Guide"}],"refuri":"https://spark.apache.org/docs/latest/structured-streaming-programming-guide.html#recovering-from-failures-with-checkpointing"}]},{"type":"line","position":{"start":{"line":56}},"children":[]},{"type":"line","position":{"start":{"line":56}},"children":[{"type":"strong","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":56}},"value":" None"}]}]}]}],"enumtype":"unordered"}]},{"type":"listItem","position":{"start":{"line":25}},"children":[{"type":"list","position":{"start":{"line":65}},"children":[{"type":"listItem","position":{"start":{"line":65}},"children":[{"type":"paragraph","position":{"start":{"line":65}},"children":[{"type":"literal","position":{"start":{"line":65}},"children":[{"type":"text","position":{"start":{"line":65}},"value":"forceDeleteTempCheckpointLocation"}]}]}]},{"type":"listItem","position":{"start":{"line":65}},"children":[{"type":"line_block","position":{"start":{"line":65}},"children":[{"type":"line","position":{"start":{"line":65}},"children":[{"type":"text","position":{"start":{"line":65}},"value":"A Boolean value that specifies whether to delete existing checkpoint data."}]},{"type":"line","position":{"start":{"line":65}},"children":[]},{"type":"line","position":{"start":{"line":65}},"children":[{"type":"strong","position":{"start":{"line":65}},"children":[{"type":"text","position":{"start":{"line":65}},"value":"Default:"}]},{"type":"text","position":{"start":{"line":65}},"value":" "},{"type":"literal","position":{"start":{"line":65}},"children":[{"type":"text","position":{"start":{"line":65}},"value":"false"}]}]}]}]}],"enumtype":"unordered"}]}],"enumtype":"unordered"}],"domain":"","name":"list-table","argument":[],"options":{"header-rows":1,"widths":"35 65"}}]},{"type":"section","position":{"start":{"line":71}},"children":[{"type":"heading","position":{"start":{"line":71}},"children":[{"type":"text","position":{"start":{"line":71}},"value":"Specifying Properties in "},{"type":"literal","position":{"start":{"line":71}},"children":[{"type":"text","position":{"start":{"line":71}},"value":"connection.uri"}]}],"id":"specifying-properties-in-connection.uri"},{"type":"directive","position":{"start":{"line":73}},"children":[{"type":"root","position":{"start":{"line":0}},"children":[{"type":"paragraph","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"If you use "},{"type":"ref_role","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"SparkConf"}],"domain":"std","name":"label","target":"spark-conf","flag":"","fileid":["configuration","std-label-spark-conf"]},{"type":"text","position":{"start":{"line":0}},"value":" to specify any of the previous settings, you can\neither include them in the "},{"type":"literal","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":0}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":0}},"value":" setting or list them individually."}]},{"type":"paragraph","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"The following code example shows how to specify the\ndatabase, collection, and "},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"convertJson"}]},{"type":"text","position":{"start":{"line":3}},"value":" setting as part of the "},{"type":"literal","position":{"start":{"line":3}},"children":[{"type":"text","position":{"start":{"line":3}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":3}},"value":"\nsetting:"}]},{"type":"code","position":{"start":{"line":7}},"lang":"cfg","copyable":true,"emphasize_lines":[],"value":"spark.mongodb.write.connection.uri=mongodb://127.0.0.1/myDB.myCollection?convertJson=any","linenos":false},{"type":"paragraph","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"To keep the "},{"type":"literal","position":{"start":{"line":11}},"children":[{"type":"text","position":{"start":{"line":11}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":11}},"value":" shorter and make the settings easier to read, you can\nspecify them individually instead:"}]},{"type":"code","position":{"start":{"line":14}},"lang":"cfg","copyable":true,"emphasize_lines":[],"value":"spark.mongodb.write.connection.uri=mongodb://127.0.0.1/\nspark.mongodb.write.database=myDB\nspark.mongodb.write.collection=myCollection\nspark.mongodb.write.convertJson=any","linenos":false},{"type":"directive","position":{"start":{"line":21}},"children":[{"type":"paragraph","position":{"start":{"line":23}},"children":[{"type":"text","position":{"start":{"line":23}},"value":"If you specify a setting in both the "},{"type":"literal","position":{"start":{"line":23}},"children":[{"type":"text","position":{"start":{"line":23}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":23}},"value":" and on its own line,\nthe "},{"type":"literal","position":{"start":{"line":23}},"children":[{"type":"text","position":{"start":{"line":23}},"value":"connection.uri"}]},{"type":"text","position":{"start":{"line":23}},"value":" setting takes precedence.\nFor example, in the following configuration, the connection\ndatabase is "},{"type":"literal","position":{"start":{"line":23}},"children":[{"type":"text","position":{"start":{"line":23}},"value":"foobar"}]},{"type":"text","position":{"start":{"line":23}},"value":":"}]},{"type":"code","position":{"start":{"line":28}},"lang":"cfg","copyable":true,"emphasize_lines":[],"value":"spark.mongodb.write.connection.uri=mongodb://127.0.0.1/foobar\nspark.mongodb.write.database=bar","linenos":false}],"domain":"","name":"important","argument":[]}],"fileid":"includes/connection-write-config.rst"}],"domain":"","name":"include","argument":[{"type":"text","position":{"start":{"line":73}},"value":"/includes/connection-write-config.rst"}]}]}]}],"fileid":"streaming-mode/streaming-write-config.txt","options":{"headings":[{"depth":2,"id":"overview","title":[{"type":"text","position":{"start":{"line":15}},"value":"Overview"}],"selector_ids":{}},{"depth":2,"id":"specifying-properties-in-connection.uri","title":[{"type":"text","position":{"start":{"line":71}},"value":"Specifying Properties in "},{"type":"literal","position":{"start":{"line":71}},"children":[{"type":"text","position":{"start":{"line":71}},"value":"connection.uri"}]}],"selector_ids":{}}]}},"build_id":"674f335303fff01a16b0b68f","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"streaming-mode/streaming-write-config.txt","static_assets":[],"updated_at":"2024-12-03T16:37:46.994Z"}}
{"type":"page","data":{"_id":"66c8b41325dc1b90c7522d6a","github_username":"docs-builder-bot","page_id":"spark-connector/docsworker-xlarge/v10.4/tls","ast":{"type":"root","position":{"start":{"line":0}},"children":[{"type":"target","position":{"start":{"line":0}},"children":[{"type":"target_identifier","position":{"start":{"line":0}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Configure TLS/SSL"}],"ids":["spark-configure-tls"]}],"domain":"std","name":"label","html_id":"std-label-spark-configure-tls"},{"type":"section","position":{"start":{"line":4}},"children":[{"type":"heading","position":{"start":{"line":4}},"children":[{"type":"text","position":{"start":{"line":4}},"value":"Configure TLS/SSL"}],"id":"configure-tls-ssl"},{"type":"directive","position":{"start":{"line":6}},"children":[],"domain":"","name":"contents","argument":[{"type":"text","position":{"start":{"line":6}},"value":"On this page"}],"options":{"local":true,"backlinks":"none","depth":2,"class":"singlecol"}},{"type":"directive","position":{"start":{"line":12}},"children":[],"domain":"mongodb","name":"facet","argument":[],"options":{"name":"genre","values":"reference"}},{"type":"directive","position":{"start":{"line":16}},"children":[],"domain":"","name":"meta","argument":[],"options":{"keywords":"code example, authenticate"}},{"type":"section","position":{"start":{"line":20}},"children":[{"type":"heading","position":{"start":{"line":20}},"children":[{"type":"text","position":{"start":{"line":20}},"value":"Overview"}],"id":"overview"},{"type":"paragraph","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"In this guide, you can learn how to configure "},{"type":"reference","position":{"start":{"line":22}},"children":[{"type":"text","position":{"start":{"line":22}},"value":"TLS/SSL"}],"refuri":"https://en.wikipedia.org/wiki/Transport_Layer_Security"},{"type":"text","position":{"start":{"line":22}},"value":" to secure communications between the\nMongoDB Spark Connector and your MongoDB deployment."}]},{"type":"paragraph","position":{"start":{"line":26}},"children":[{"type":"text","position":{"start":{"line":26}},"value":"To use TLS/SSL, your application and each of your Spark\nworkers must have access to cryptographic certificates that prove their\nidentity. Store the certificates in your JVM trust store and your JVM\nkey store. You can configure access to these certificates through your Spark\nconfiguration file, or when launching a Spark job from the command line."}]}]},{"type":"section","position":{"start":{"line":33}},"children":[{"type":"heading","position":{"start":{"line":33}},"children":[{"type":"text","position":{"start":{"line":33}},"value":"Create a JVM Trust Store"}],"id":"create-a-jvm-trust-store"},{"type":"paragraph","position":{"start":{"line":35}},"children":[{"type":"text","position":{"start":{"line":35}},"value":"The JVM trust store saves certificates that securely identify other applications\nwith which your application interacts. Using these certificates, your\napplication can prove that the connection to another application is genuine and\nsecure."}]},{"type":"paragraph","position":{"start":{"line":40}},"children":[{"type":"text","position":{"start":{"line":40}},"value":"Create a trust store with the "},{"type":"reference","position":{"start":{"line":40}},"children":[{"type":"text","position":{"start":{"line":40}},"value":"keytool"}],"refuri":"https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html"},{"type":"text","position":{"start":{"line":40}},"value":" command line tool provided as part of the\nJDK:"}]},{"type":"code","position":{"start":{"line":43}},"lang":"sh","copyable":true,"emphasize_lines":[],"value":"keytool -importcert -trustcacerts -file <path to certificate authority file>\n        -keystore <path to trust store> -storepass <password>","linenos":false}]},{"type":"section","position":{"start":{"line":49}},"children":[{"type":"heading","position":{"start":{"line":49}},"children":[{"type":"text","position":{"start":{"line":49}},"value":"Create a JVM Key Store"}],"id":"create-a-jvm-key-store"},{"type":"paragraph","position":{"start":{"line":51}},"children":[{"type":"text","position":{"start":{"line":51}},"value":"The JVM key store saves certificates that securely identify your application to\nother applications. Using these certificates, other\napplications can prove that the connection to your application is genuine and\nsecure."}]},{"type":"paragraph","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"Create a key store by using the "},{"type":"reference","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"keytool"}],"refuri":"https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html"},{"type":"text","position":{"start":{"line":56}},"value":", or\n"},{"type":"reference","position":{"start":{"line":56}},"children":[{"type":"text","position":{"start":{"line":56}},"value":"openssl"}],"refuri":"https://www.openssl.org/docs/"},{"type":"text","position":{"start":{"line":56}},"value":" command line tools."}]}]},{"type":"section","position":{"start":{"line":61}},"children":[{"type":"heading","position":{"start":{"line":61}},"children":[{"type":"text","position":{"start":{"line":61}},"value":"Enable TLS/SSL"}],"id":"enable-tls-ssl"},{"type":"paragraph","position":{"start":{"line":63}},"children":[{"type":"text","position":{"start":{"line":63}},"value":"You can enable TLS/SSL for the connection to your MongoDB instance through the\n"},{"type":"literal","position":{"start":{"line":63}},"children":[{"type":"text","position":{"start":{"line":63}},"value":"tls"}]},{"type":"text","position":{"start":{"line":63}},"value":" parameter in your connection URI."}]},{"type":"paragraph","position":{"start":{"line":66}},"children":[{"type":"text","position":{"start":{"line":66}},"value":"The following example shows a connection URI with the "},{"type":"literal","position":{"start":{"line":66}},"children":[{"type":"text","position":{"start":{"line":66}},"value":"tls"}]},{"type":"text","position":{"start":{"line":66}},"value":" option assigned\nto "},{"type":"literal","position":{"start":{"line":66}},"children":[{"type":"text","position":{"start":{"line":66}},"value":"true"}]},{"type":"text","position":{"start":{"line":66}},"value":" to enable TLS/SSL:"}]},{"type":"code","position":{"start":{"line":69}},"lang":"none","copyable":true,"emphasize_lines":[],"value":"\"mongodb+srv://<username>:<password>@<cluster-url>?tls=true\"","linenos":false},{"type":"paragraph","position":{"start":{"line":73}},"children":[{"type":"text","position":{"start":{"line":73}},"value":"For more information about creating a connection string, see the\n"},{"type":"reference","position":{"start":{"line":73}},"children":[{"type":"text","position":{"start":{"line":73}},"value":"Connection String guide"}],"refuri":"https://www.mongodb.com/docs/manualreference/connection-string/"},{"type":"text","position":{"start":{"line":73}},"value":" on the server\nmanual."}]}]},{"type":"section","position":{"start":{"line":78}},"children":[{"type":"heading","position":{"start":{"line":78}},"children":[{"type":"text","position":{"start":{"line":78}},"value":"Configure Access to Certificate Stores"}],"id":"configure-access-to-certificate-stores"},{"type":"paragraph","position":{"start":{"line":80}},"children":[{"type":"text","position":{"start":{"line":80}},"value":"To configure your Spark application to access the certificates stored in your\nJVM trust store and JVM key store, the following system properties must be set:"}]},{"type":"list","position":{"start":{"line":83}},"children":[{"type":"listItem","position":{"start":{"line":83}},"children":[{"type":"paragraph","position":{"start":{"line":83}},"children":[{"type":"text","position":{"start":{"line":83}},"value":"javax.net.ssl.trustStore"}]}]},{"type":"listItem","position":{"start":{"line":83}},"children":[{"type":"paragraph","position":{"start":{"line":84}},"children":[{"type":"text","position":{"start":{"line":84}},"value":"javax.net.ssl.trustStorePassword"}]}]},{"type":"listItem","position":{"start":{"line":83}},"children":[{"type":"paragraph","position":{"start":{"line":85}},"children":[{"type":"text","position":{"start":{"line":85}},"value":"javax.net.ssl.keyStore"}]}]},{"type":"listItem","position":{"start":{"line":83}},"children":[{"type":"paragraph","position":{"start":{"line":86}},"children":[{"type":"text","position":{"start":{"line":86}},"value":"javax.net.ssl.keyStorePassword"}]}]}],"enumtype":"unordered"},{"type":"section","position":{"start":{"line":89}},"children":[{"type":"heading","position":{"start":{"line":89}},"children":[{"type":"text","position":{"start":{"line":89}},"value":"Set the Properties in Your Spark Configuration File"}],"id":"set-the-properties-in-your-spark-configuration-file"},{"type":"paragraph","position":{"start":{"line":91}},"children":[{"type":"text","position":{"start":{"line":91}},"value":"You can set the system properties in your Spark configuration file as follows:"}]},{"type":"code","position":{"start":{"line":93}},"lang":"none","copyable":true,"emphasize_lines":[],"value":"spark.executor.extraJavaOptions=-Djavax.net.ssl.trustStore=<Path to your trust store> -Djavax.net.ssl.trustStorePassword=<Your trust store password> -Djavax.net.ssl.keyStore=<Path to your key store> -Djavax.net.ssl.keyStorePassword=<Your key store password>\"\n\nspark.driver.extraJavaOptions=-Djavax.net.ssl.trustStore=<Path to your trust store> -Djavax.net.ssl.trustStorePassword=<Your trust store password> -Djavax.net.ssl.keyStore=<Path to your key store> -Djavax.net.ssl.keyStorePassword=<Your key store password>\"","linenos":false}]},{"type":"section","position":{"start":{"line":100}},"children":[{"type":"heading","position":{"start":{"line":100}},"children":[{"type":"text","position":{"start":{"line":100}},"value":"Set the Properties From the Command Line"}],"id":"set-the-properties-from-the-command-line"},{"type":"paragraph","position":{"start":{"line":102}},"children":[{"type":"text","position":{"start":{"line":102}},"value":"You can set the system properties from the command line by adding them with the\n"},{"type":"literal","position":{"start":{"line":102}},"children":[{"type":"text","position":{"start":{"line":102}},"value":"--conf"}]},{"type":"text","position":{"start":{"line":102}},"value":" flag when you submit a Spark job:"}]},{"type":"code","position":{"start":{"line":105}},"lang":"sh","copyable":true,"emphasize_lines":[],"value":"./bin/spark-submit --name \"<Your app name>\" \\\n                   --master \"<Master URL>\" \\\n                   --conf \"spark.executor.extraJavaOptions=-Djavax.net.ssl.trustStore=<Path to your trust store> -Djavax.net.ssl.trustStorePassword=<Your trust store password> -Djavax.net.ssl.keyStore=<Path to your key store> -Djavax.net.ssl.keyStorePassword=<Your key store password>\" \\\n                   sparkApplication.jar \\\n                   --conf \"spark.driver.extraJavaOptions=-Djavax.net.ssl.trustStore=<Path to your trust store> -Djavax.net.ssl.trustStorePassword=<Your trust store password> -Djavax.net.ssl.keyStore=<Path to your key store> -Djavax.net.ssl.keyStorePassword=<Your key store password>\" \\\n                   sparkApplication.jar","linenos":false}]}]}]}],"fileid":"tls.txt","options":{"headings":[{"depth":2,"id":"overview","title":[{"type":"text","position":{"start":{"line":20}},"value":"Overview"}],"selector_ids":{}},{"depth":2,"id":"create-a-jvm-trust-store","title":[{"type":"text","position":{"start":{"line":33}},"value":"Create a JVM Trust Store"}],"selector_ids":{}},{"depth":2,"id":"create-a-jvm-key-store","title":[{"type":"text","position":{"start":{"line":49}},"value":"Create a JVM Key Store"}],"selector_ids":{}},{"depth":2,"id":"enable-tls-ssl","title":[{"type":"text","position":{"start":{"line":61}},"value":"Enable TLS/SSL"}],"selector_ids":{}},{"depth":2,"id":"configure-access-to-certificate-stores","title":[{"type":"text","position":{"start":{"line":78}},"value":"Configure Access to Certificate Stores"}],"selector_ids":{}},{"depth":3,"id":"set-the-properties-in-your-spark-configuration-file","title":[{"type":"text","position":{"start":{"line":89}},"value":"Set the Properties in Your Spark Configuration File"}],"selector_ids":{}},{"depth":3,"id":"set-the-properties-from-the-command-line","title":[{"type":"text","position":{"start":{"line":100}},"value":"Set the Properties From the Command Line"}],"selector_ids":{}}]}},"build_id":"674f335303fff01a16b0b68f","created_at":"2024-08-23T16:08:51.621Z","deleted":false,"filename":"tls.txt","static_assets":[],"updated_at":"2024-12-03T16:37:46.994Z"}}